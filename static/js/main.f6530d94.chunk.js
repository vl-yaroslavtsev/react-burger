(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{119:function(e,t,r){},16:function(e,t,r){e.exports={container:"profile_container__2srQK",menu:"profile_menu__1__XZ",menuItem:"profile_menuItem__lVgDN",menuItemActive:"profile_menuItemActive__a_SQV",menuFooter:"profile_menuFooter__27Xhl",orderList:"profile_orderList__3X4Yq",error:"profile_error__3jZER",skeletonOrder:"profile_skeletonOrder__2z85r"}},193:function(e,t,r){},194:function(e,t,r){},195:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(39),s=r.n(a),i=r(8),o=(r(119),r(3)),u=r.n(o),l=r(29),d=r.n(l),j=r(13),m=r(200),b=r(112),p=r(113),O=r(7),f=r(23),x=r.n(f),_=r(28),h=function(){return Object(_.b)()},g=_.c,v=r(6),y=r(55),N=r.n(y),E=r(201),w=r(2),S=r(9),I=r(26),k=r(5),C=r.n(k),R=r(10),T=r(56),L=r.n(T),M=r(0);var D=Object(n.memo)((function(e){var t=e.src,r=e.responsive,c=void 0===r||r,a=e.className,s=void 0===a?"":a,i=e.alt,o=void 0===i?"":i,l=e.width,d=void 0===l?250:l,j=e.height,m=void 0===j?"50%":j,b=Object(I.a)(e,["src","responsive","className","alt","width","height"]),p=Object(n.useRef)(null),f=function(e,t){var r=Object(n.useState)(!1),c=Object(O.a)(r,2),a=c[0],s=c[1],i=function(){var e=Object(R.a)(C.a.mark((function e(t){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return(r=new Image).src=t,e.abrupt("return",new Promise((function(e,n){r.onload=function(){return e(t)},r.onerror=n})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(null!==t.current&&e){var r=t.current,n=new IntersectionObserver((function(t,r){t.forEach((function(t){t.isIntersecting&&i(e).then((function(){return s(!0)}))}))}),{threshold:0});return n.observe(r),function(){return n.unobserve(r)}}}),[a,e,t]),a}(t,p),x={"--img-width":"".concat(d,"px"),"--img-height":m};return Object(M.jsx)(M.Fragment,{children:f?Object(M.jsx)("img",Object(w.a)(Object(w.a)({className:u()(s,Object(S.a)({},L.a.imageResponsive,c)),src:t},c?{}:{width:d}),{},{alt:o},b)):Object(M.jsx)("div",{className:u()(L.a.imagePreloader,s,Object(S.a)({},L.a.imagePreloaderResponsive,c)),ref:p,style:x})})}));function q(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[]\\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function F(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.expires;if("number"==typeof n&&n){var c=new Date;c.setTime(c.getTime()+1e3*n),n=r.expires=c}n&&n instanceof Date&&(r.expires=n.toUTCString()),r.path="/";var a=e+"="+(t=encodeURIComponent(t));for(var s in r){a+="; "+s;var i=r[s];!0!==i&&(a+="="+i)}document.cookie=a}function P(e){F(e,"",{expires:-1})}function A(e,t){for(var r in e){if(e.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;switch(typeof e[r]){case"object":if(!A(e[r],t[r]))return!1;break;case"function":if("undefined"==typeof t[r]||"compare"!==r&&e[r].toString()!==t[r].toString())return!1;break;default:if(e[r]!==t[r])return!1}}for(var n in t)if("undefined"==typeof e[n])return!1;return!0}function G(e){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0);var r=new Date(e),n=r.getHours()-r.getUTCHours(),c=r.getHours().toString().padStart(2,"0"),a=r.getMinutes().toString().padStart(2,"0"),s="";if(r.getTime()>t.getTime()+864e5)s=r.toLocaleDateString();else if(r>t)s="\u0421\u0435\u0433\u043e\u0434\u043d\u044f";else if(r.getTime()>t.getTime()-864e5)s="\u0412\u0447\u0435\u0440\u0430";else{var i=Math.ceil((t.getTime()-r.getTime())/864e5);s="".concat(i," ").concat(function(e,t){var r=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:r>1&&r<5?t[1]:1===r?t[0]:t[2]}(i,["\u0434\u0435\u043d\u044c","\u0434\u043d\u044f","\u0434\u043d\u0435\u0439"])," \u043d\u0430\u0437\u0430\u0434")}return"".concat(s,", ").concat(c,":").concat(a," i-GMT").concat(n>0?"+":"").concat(n)}var B={linear:function(e){return e},easeIn:function(e){return Math.pow(e,1.675)},easeOut:function(e){return 1-Math.pow(1-e,1.675)},easeInOut:function(e){return.5*(Math.sin((e-.5)*Math.PI)+1)}};function U(e){var t=e.timing,r=void 0===t?"easeInOut":t,n=e.draw,c=e.duration,a=performance.now(),s=B[r];return new Promise((function(e){requestAnimationFrame((function t(r){var i=(r-a)/c;i>1&&(i=1),i<0&&(i=0);var o=s(i);n(o),i<1?requestAnimationFrame(t):e(!0)}))}))}function H(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e}),[e]),t.current}function W(e,t){var r=!1;function c(){e(),r=!1}function a(){r||(r=!0,window.requestAnimationFrame?window.requestAnimationFrame(c):setTimeout(c,66))}Object(n.useEffect)((function(){return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}}),t)}var V=function(){var e=window.innerWidth;return e<768?"mobile":e<1024?"tablet":"desktop"};function z(){var e=Object(n.useState)(V()),t=Object(O.a)(e,2),r=t[0],c=t[1];return W((function(){c(V())}),[]),r}var J=Object(n.memo)((function(e){var t=e.className,r=e.item,n=e.count,c=void 0===n?0:n,a=e.onClick,s=void 0===a?function(){}:a,i=r.name,o=r.price,l=r.image,d=Object(E.a)((function(){return{type:"ingredient",item:r}})),j=Object(O.a)(d,2)[1],m=z();return Object(M.jsxs)("div",{className:u()(N.a.container,t),onClick:function(e){return s(e,r)},ref:j,"data-test-id":"ingredient-".concat(r._id),children:[c>0&&Object(M.jsx)(v.Counter,{count:c,size:"desktop"===m?"default":"small"}),Object(M.jsx)(D,{src:l,className:"mb-1",alt:i,width:240}),Object(M.jsxs)("p",{className:u()(N.a.price,"text text_type_digits-default mb-1"),children:[Object(M.jsx)("span",{className:"mr-2",children:o}),Object(M.jsx)(v.CurrencyIcon,{type:"primary"})]}),Object(M.jsx)("p",{className:u()(N.a.title,"text text_type_main-default"),children:i})]})})),Q=r(82),X=r.n(Q),K=function(e){var t=e.width,r=e.height,n=e.className,c=e.circle,a=void 0!==c&&c,s=e.repeat,i=void 0===s?1:s,o=e.tag,l=void 0===o?"div":o,d=Object(w.a)(Object(w.a)(Object(w.a)({},t?{width:t}:{}),a?{height:t}:{}),r?{height:r}:{}),j=u()(X.a.skeleton,n,Object(S.a)({},X.a.circle,a));return i>1?Object(M.jsx)(M.Fragment,{children:Array(i).fill(null).map((function(e,t){return Object(M.jsx)(l,{className:j,style:Object(w.a)({},d),children:"\xa0"},t)}))}):Object(M.jsx)(l,{className:j,style:Object(w.a)({},d),children:"\xa0"})},Y=r(30);function Z(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=r.exclude,a=void 0===c?[]:c,s=r.props,i=void 0===s?[]:s,o=r.maxHeight,u=r.isInModal;t=a instanceof Array?a:[a];var l=function(){var r=e.current;if(r){var n=t.reduce((function(e,t){var r=t.current;if(!r)return e;var n=getComputedStyle(r);return e+r.offsetHeight+parseInt(n.marginTop)+parseInt(n.marginBottom)}),0),c=u?"(5vh + 41px)":"0px",a=r.getBoundingClientRect().top,s="(".concat(c," + ").concat(Math.ceil(a+n),"px)");r.style.maxHeight=o?"calc(min(100vh - ".concat(s,", \n      ").concat(o,"px))"):"calc(100vh - ".concat(s,")"),r.classList.add(d.a.customScrollbar)}};Object(n.useLayoutEffect)((function(){return l(),function(){var t=e.current;t&&(t.classList.remove(d.a.customScrollbar),t.style.maxHeight="")}}),[e,o,u,t].concat(Object(Y.a)(i))),W(l,[e,o,u,t].concat(Object(Y.a)(i)))}var $="https://norma.nomoreparties.space/api",ee={ingredients:"".concat($,"/ingredients"),orders:"".concat($,"/orders"),auth:{login:"".concat($,"/auth/login"),register:"".concat($,"/auth/register"),logout:"".concat($,"/auth/logout"),token:"".concat($,"/auth/token"),user:"".concat($,"/auth/user")},password:{resetCheck:"".concat($,"/password-reset"),reset:"".concat($,"/password-reset/reset")}};function te(e){switch(e){case"email or password are incorrect":return"\u0412\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 Email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c";case"Incorrect reset token":return"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u0434\u043b\u044f \u0441\u0431\u0440\u043e\u0441\u0430 \u043f\u0430\u0440\u043e\u043b\u044f";default:return e}}function re(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(R.a)(C.a.mark((function e(t){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,t.json();case 4:r=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:if(!r||r.success){e.next=12;break}throw r.message=te(r.message),r;case 12:if(t.ok){e.next=14;break}throw new Error("\u0421\u0442\u0430\u0442\u0443\u0441: ".concat(t.status));case 14:if(r){e.next=16;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043e\u0442\u0432\u0435\u0442\u0430");case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function ce(e,t){return ae.apply(this,arguments)}function ae(){return(ae=Object(R.a)(C.a.mark((function e(t,r){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 2:return n=e.sent,e.abrupt("return",re(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){var t=e.accessToken,r=e.refreshToken;t&&F("accessToken",t=t.split("Bearer ")[1]),localStorage.setItem("refreshToken",r)}function ie(){return oe.apply(this,arguments)}function oe(){return(oe=Object(R.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(ee.auth.token,{token:localStorage.getItem("refreshToken")});case 2:return se(t=e.sent),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return le.apply(this,arguments)}function le(){return(le=Object(R.a)(C.a.mark((function e(t){var r,n,c,a,s,i,o,u=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},n=r.params,c=void 0===n?{}:n,a=r.method,s=void 0===a?"GET":a,e.prev=1,i={method:s,headers:{"Content-Type":"application/json",Authorization:"Bearer "+q("accessToken")}},"GET"!==s&&(i.body=JSON.stringify(c)),e.next=6,fetch(t,i);case 6:return o=e.sent,e.next=9,re(o);case 9:return e.abrupt("return",e.sent);case 12:if(e.prev=12,e.t0=e.catch(1),"jwt expired"!==e.t0.message){e.next=20;break}return e.next=17,ie();case 17:return e.abrupt("return",ue(t,{params:c,method:s}));case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function de(){return je.apply(this,arguments)}function je(){return(je=Object(R.a)(C.a.mark((function e(){var t,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(ee.ingredients);case 2:return t=e.sent,e.next=5,re(t);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(){return be.apply(this,arguments)}function be(){return(be=Object(R.a)(C.a.mark((function e(){var t,r=arguments;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],e.next=3,ue(ee.orders,{method:"POST",params:{ingredients:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(R.a)(C.a.mark((function e(t){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(ee.auth.login,t);case 2:return se(r=e.sent),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return xe.apply(this,arguments)}function xe(){return(xe=Object(R.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(ee.auth.logout,{token:localStorage.getItem("refreshToken")});case 2:return t=e.sent,P("accessToken"),localStorage.removeItem("refreshToken"),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return(_e=Object(R.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(ee.auth.register,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(R.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(ee.password.resetCheck,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(R.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(ee.password.reset,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(R.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(ee.auth.user);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(R.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(ee.auth.user,{method:"PATCH",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return(Ie=Object(R.a)(C.a.mark((function e(t){var r,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ee.orders,"/").concat(t));case 2:return r=e.sent,e.next=5,re(r);case 5:return n=e.sent,e.abrupt("return",n.orders[0]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke="GET_INGREDIENTS_REQUEST",Ce="GET_INGREDIENTS_SUCCESS",Re="GET_INGREDIENTS_ERROR",Te=function(){return function(){var e=Object(R.a)(C.a.mark((function e(t){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ke}),e.prev=1,e.next=4,de();case 4:r=e.sent,t({type:Ce,items:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:Re,message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},Le={bun:"\u0411\u0443\u043b\u043a\u0438",sauce:"\u0421\u043e\u0443\u0441\u044b",main:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"},Me=function(){var e=Object(n.useState)("bun"),t=Object(O.a)(e,2),r=t[0],c=t[1],a=h(),s=Object(j.h)(),o=g((function(e){return e.ingredients})),l=o.items,d=o.itemsErrorMessage,m=o.itemsRequest,b=g((function(e){return e.construct})),p=b.items,f=b.bunItem,_=Object(n.useRef)(null);Z(_);var y=Object(n.useMemo)((function(){return l.reduce((function(e,t){return f&&t._id===f._id?(e[t._id]=2,e):(e[t._id]=p.filter((function(e){return e._id===t._id})).length,e)}),{})}),[l,p,f]);Object(n.useLayoutEffect)((function(){0===l.length&&a(Te())}),[a,l.length]);Object(n.useEffect)((function(){var e=_.current;if(e){var t=e.offsetHeight,r=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var t=e.target;c(t.dataset.group||"bun")}}))}),{root:e,rootMargin:"-130px 0px ".concat(130-t,"px 0px")}),n=e.querySelectorAll("[data-group]");return n.forEach((function(e){return r.observe(e)})),function(){return n.forEach((function(e){return r.unobserve(e)}))}}}),[l]);var N=Object(n.useMemo)((function(){return Object(M.jsx)("ul",{className:u()(x.a.ingredients,"mt-10"),"data-test-id":"ingredients-skeleton",children:Object(M.jsxs)("li",{children:[Object(M.jsx)(K,{width:100,className:"text text_type_main-medium"}),Object(M.jsx)("div",{className:u()(x.a.ingredientList,"pl-4 pr-4 pt-6 pb-2"),children:Object(M.jsx)(K,{height:200,repeat:2,className:u()(x.a.ingredient,"mb-8 mt-4")})})]})})}),[]);return Object(M.jsxs)("section",{className:u()(x.a.container),children:[Object(M.jsx)("h1",{className:u()("text text_type_main-large",x.a.title),children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(M.jsx)("section",{className:x.a.tabs,children:Object.entries(Le).map((function(e){var t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(M.jsx)(v.Tab,{value:n,active:n===r,onClick:function(){return function(e){var t=_.current;if(t){var r=t.querySelector('[data-group="'.concat(e,'"]')),n=t.scrollTop,c=(null===r||void 0===r?void 0:r.offsetTop)||0;U({draw:function(e){t.scrollTop=n+(c-n)*e},duration:400})}}(n)},children:c},n)}))}),d&&Object(M.jsxs)("p",{className:u()(x.a.error,"text text_type_main-default mt-15"),children:["\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u0439\u0442\u0438 \u0435\u0449\u0435 \u0440\u0430\u0437 \u043f\u043e\u0437\u0436\u0435. ",d]}),m&&N,Object(M.jsx)("ul",{className:u()(x.a.ingredients,"mt-10"),ref:_,children:Object(n.useMemo)((function(){return l.length>0&&Object.entries(Le).map((function(e){var t=Object(O.a)(e,2),r=t[0],n=t[1];return Object(M.jsxs)("li",{"data-group":r,children:[Object(M.jsx)("h2",{className:"text text_type_main-medium",children:n}),Object(M.jsx)("ul",{className:u()(x.a.ingredientList),children:l.filter((function(e){return e.type===r})).map((function(e,t){return Object(M.jsx)("li",{className:u()(x.a.ingredient),children:Object(M.jsx)(i.b,{to:{pathname:"/ingredients/".concat(e._id),state:{background:s}},children:Object(M.jsx)(J,{count:y[e._id],item:e})})},e._id)}))})]},r)}))}),[s,l,y])})]})},De=r(202),qe=r.p+"static/media/done.7341dd32.svg",Fe=r(85),Pe=r.n(Fe),Ae=function(e){var t=e.orderNumber;return Object(M.jsxs)("div",{className:u()(Pe.a.container,"pl-15 pr-15 pb-20"),children:[Object(M.jsx)("h1",{className:u()(Pe.a.title,"text text_type_digits-large mt-4 mb-8"),children:t}),Object(M.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(M.jsx)("img",{width:"120",height:"120",src:qe,alt:"\u0417\u0430\u043a\u0430\u0437 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"}),Object(M.jsx)("p",{className:"text text_type_main-default mt-15 mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(M.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Ge=r(40),Be=r.n(Ge),Ue=r(86),He=r.n(Ue),We=function(e){var t=e.visible,r=void 0!==t&&t,n=e.onClose,c=void 0===n?function(){}:n;return Object(M.jsx)("div",{className:u()(He.a.container,Object(S.a)({},He.a.hidden,!r)),onClick:c})},Ve=document.getElementById("react-modals"),ze=[],Je=Object(n.memo)((function(e){var t=e.children,r=e.header,c=void 0===r?"":r,s=e.visible,i=void 0!==s&&s,o=e.onClose,l=Object(n.useRef)(),d=!!o;return Object(n.useEffect)((function(){if(i)ze.push(l);else{var e=ze.indexOf(l);ze.splice(e,1)}}),[i]),Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&ze[ze.length-1]===l&&o&&o()};return i&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[o,i]),Object(a.createPortal)(Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(We,{visible:i,onClose:o}),Object(M.jsxs)("div",{className:u()(Be.a.container,"pt-10 pl-10 pr-10 pb-10",Object(S.a)({},Be.a.hidden,!i)),children:[Object(M.jsx)("h1",{className:u()(Be.a.title,"text text_type_main-large pr-7"),children:c}),d&&Object(M.jsx)("div",{className:Be.a.closeButton,children:Object(M.jsx)(v.CloseIcon,{type:"primary",onClick:o})}),Object(M.jsx)("section",{className:u()(Be.a.content),children:t})]})]}),Ve)})),Qe=r(57),Xe=r.n(Qe),Ke=function(e){var t=e.size,r=void 0===t?50:t,n=e.stroke,c=void 0===n?3:n,a=e.className,s=e.center,i=void 0!==s&&s,o=.4*r;return Object(M.jsx)("svg",{className:u()(Xe.a.spinner,Object(S.a)({},Xe.a.spinnerCenter,i),a),style:{width:r,height:r},viewBox:"0 0 ".concat(r," ").concat(r),children:Object(M.jsx)("circle",{className:Xe.a.circle,cx:r/2,cy:r/2,r:o,fill:"none",strokeWidth:c})})},Ye="ADD_CONSTRUCTOR_INGREDIENT",Ze="REMOVE_CONSTRUCTOR_INGREDIENT",$e="REORDER_CONSTRUCTOR_INGREDIENTS",et="CLEAR_CONSTRUCTOR",tt=r(87),rt=r.n(tt),nt=function(e){var t,r,c=e.item,a=e.index,s=e.onDelete,i=void 0===s?function(){}:s,o=Object(_.b)(),l=Object(n.useRef)(null),d=Object(n.useState)(!1),j=Object(O.a)(d,2),m=j[0],b=j[1],p=Object(n.useState)(!1),f=Object(O.a)(p,2),x=f[0],h=f[1],g=null===(t=l.current)||void 0===t?void 0:t.querySelector(".constructor-element");Object(n.useEffect)((function(){var e=l.current;e&&(e.style.opacity="0",U({draw:function(t){e.style.opacity="".concat(t)},duration:500,timing:"easeOut"}))}),[]);var y=Object(E.a)({type:"constructorItem",item:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return{id:c._id,index:a}})),collect:function(e){return{isDrag:e.isDragging()}}}),N=Object(O.a)(y,2),w=N[0].isDrag,S=N[1],I=Object(De.a)({accept:"constructorItem",drop:function(e){var t=a-(m?1:0),r=e.index;h(!1),r!==t&&(o({type:$e,dropIndex:r,hoverIndex:t}),e.index=t)},hover:function(e,t){if(g){h(!0);var r=g.getBoundingClientRect(),n=t.getSourceClientOffset()||{y:0};b(n.y<=r.y)}},collect:function(e){return{isOver:e.isOver(),didDrop:e.didDrop()}}}),k=Object(O.a)(I,2),C=k[0],R=C.isOver,T=C.didDrop,L=k[1],D=H(w),q=H(R)&&!R,F=D&&!w,P=(null===(r=l.current)||void 0===r?void 0:r.getBoundingClientRect().height)||0;S(L(l));var A=z(),G="desktop"===A?16:0,B="desktop"===A?80:56;return Object(M.jsxs)("li",{className:u()(rt.a.container),ref:l,style:{opacity:w?0:1,display:F&&T?"none":"",marginTop:w&&q?-P:0,paddingBottom:w||!R||m?G:B+2*G,paddingTop:!w&&R&&m?B+G:0,transitionDuration:x?"0.3s":"0s"},"data-test-id":"ctr-item-".concat(c._id),children:[Object(M.jsx)("i",{className:u()(rt.a.dragItem),children:Object(M.jsx)(v.DragIcon,{type:"primary"})}),Object(M.jsx)(v.ConstructorElement,{text:c.name,price:c.price,thumbnail:c.image,handleClose:function(){return i(c,l)}})]})},ct="CHECKOUT_ORDER_REQUEST",at="CHECKOUT_ORDER_SUCCESS",st="CHECKOUT_ORDER_ERROR",it="CLEAR_ORDER",ot=r(24),ut=r.n(ot),lt=function(){var e,t=Object(n.useState)(!1),r=Object(O.a)(t,2),c=r[0],a=r[1],s=g((function(e){return e.construct})),i=s.bunItem,o=s.items,l=s.totalPrice,d=g((function(e){return e.order})),m=d.number,b=d.checkoutRequest,p=d.checkoutErrorMessage,f=h(),x=Object(n.useCallback)((function(e,t){var r=t.current;if(r){var n=r.offsetHeight;r.style.zIndex="-1",U({draw:function(e){r.style.opacity="".concat(1-e),r.style.marginTop="-".concat(n*e,"px")},duration:500,timing:"easeOut"}).then((function(){return f({type:Ze,item:e})}))}}),[f]),_=Object(n.useCallback)((function(){a(!1),m&&(f({type:et}),f({type:it}))}),[f,m]);var y=Object(De.a)((function(){return{accept:"ingredient",drop:function(e,t){f({type:Ye,item:e})},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}}),[f]),N=Object(O.a)(y,2),E=N[0],w=E.isOver,I=E.canDrop,k=N[1],T=Object(n.useRef)(null),L=Object(n.useRef)(null),D=Object(n.useRef)(null);Z(T,{exclude:[L,D],props:[i,0===o.length]});var q=Object(j.g)();return"jwt malformed"===p?(f({type:st,message:""}),q.replace("/login"),null):Object(M.jsxs)("div",{className:u()(ut.a.container),ref:k,"data-test-id":"constructor-container",children:[Object(M.jsxs)("ul",{className:ut.a.elements,children:[!i&&!o.length&&Object(M.jsx)("li",{className:u()(ut.a.dragMessage,"text text_type_main-medium pt-25 pb-25",(e={},Object(S.a)(e,ut.a.dragMessageOver,w),Object(S.a)(e,"text_color_inactive",!I),e)),children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u044b \u0441\u044e\u0434\u0430"}),i&&Object(M.jsx)("li",{className:ut.a.bunElementTop,"data-test-id":"ctr-bun-top",children:Object(M.jsx)(v.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(i.name," (\u0432\u0435\u0440\u0445)"),price:i.price,thumbnail:i.image})}),Object(M.jsx)("li",{children:Object(M.jsx)("ul",{className:u()(ut.a.elementsScroll,"noselect"),ref:T,children:o.map((function(e,t){return Object(M.jsx)(nt,{item:e,index:t,onDelete:x},e.key)}))})}),i&&Object(M.jsx)("li",{className:ut.a.bunElementBottom,ref:L,"data-test-id":"ctr-bun-bottom",children:Object(M.jsx)(v.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(i.name," (\u043d\u0438\u0437)"),price:i.price,thumbnail:i.image})})]}),Object(M.jsxs)("footer",{className:u()(ut.a.footer,"mt-10 mb-2"),ref:D,children:[Object(M.jsx)("p",{className:"text text_type_digits-medium mr-2",children:l}),Object(M.jsx)("p",{className:"text mr-10",children:Object(M.jsx)(v.CurrencyIcon,{type:"primary"})}),Object(M.jsx)(v.Button,{type:"primary",size:"large",onClick:function(){a(!0),f(function(){var e=Object(R.a)(C.a.mark((function e(t,r){var n,c,a,s,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r().construct,c=n.bunItem,a=n.items,c){e.next=3;break}return e.abrupt("return",t({type:st,message:"\u0414\u043b\u044f \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u0443\u043b\u043a\u0443!"}));case 3:return s=[c._id].concat(Object(Y.a)(a.map((function(e){return e._id})))),t({type:ct}),e.prev=5,e.next=8,me(s);case 8:i=e.sent,t({type:at,number:i.order.number}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t({type:st,message:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}())},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),Object(M.jsx)(Je,{header:p&&"\u041e\u0448\u0438\u0431\u043a\u0430",visible:c,onClose:b?void 0:_,children:Object(M.jsxs)(M.Fragment,{children:[b&&Object(M.jsxs)("div",{className:ut.a.center,children:[Object(M.jsx)("p",{className:"text text_type_main-default mb-20 ml-25 mr-25",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u043c \u0437\u0430\u043a\u0430\u0437..."}),Object(M.jsx)(Ke,{className:"mb-15"})]}),p&&Object(M.jsx)("p",{className:u()("text text_type_main-default mt-5",ut.a.error),children:p}),m&&Object(M.jsx)(Ae,{orderNumber:m})]})})]})};function dt(){return Object(M.jsxs)(m.a,{backend:"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?p.a:b.a,children:[Object(M.jsx)(Me,{}),Object(M.jsx)(lt,{})]})}r(193);var jt=function(e){var t=Object.assign({},e),r=Object(n.useState)(!0),c=Object(O.a)(r,2),a=c[0],s=c[1],i=Object(n.useRef)(null),o=Object(n.useCallback)((function(){s(!a);var e=i.current;if(e){var t=e.selectionStart;setTimeout((function(){e.focus(),e.setSelectionRange(t||e.value.length,t||e.value.length)}),0)}}),[a]);return Object(M.jsx)(v.Input,Object(w.a)(Object(w.a)({},t),{},{ref:i,type:a?"password":"text",icon:a?"ShowIcon":"HideIcon",onIconClick:o}))},mt=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,bt={required:function(e){var t=e.value,r=e.message,n=void 0===r?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435":r;return t&&t.length>0?"":n},email:function(e){var t=e.value,r=e.message,n=void 0===r?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email":r;return mt.test(String(t).toLowerCase())?"":n},minLength:function(e){var t=e.value,r=e.param,n=void 0===r?0:r,c=e.message;return c=c||"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 ".concat(n," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),t.length>=n||0===t.length?"":c}};function pt(e,t){return t&&Object.entries(t).map((function(t){var r=Object(O.a)(t,2),n=r[0],c=r[1];return c?bt[n](Object(w.a)({value:e,param:"object"===typeof c?c.param:c},"object"===typeof c?{message:c.message}:{})):""})).filter((function(e){return!!e}))[0]||""}function Ot(e,t){for(var r={},n=0,c=Object.keys(e);n<c.length;n++){var a=c[n];r[a]=pt(e[a],t[a])}return r}function ft(e){var t=e.onSubmit,r=Object(n.useState)({}),c=Object(O.a)(r,2),a=c[0],s=c[1],i=Object(n.useState)({}),o=Object(O.a)(i,2),u=o[0],l=o[1],d=Object(n.useState)(null),j=Object(O.a)(d,2),m=j[0],b=j[1],p=Object(n.useState)(""),f=Object(O.a)(p,2),x=f[0],_=f[1],h=Object(n.useState)(!1),g=Object(O.a)(h,2),v=g[0],y=g[1],N=Object(n.useRef)(null),E=Object(n.useRef)({});Object(n.useEffect)((function(){N.current=m}));var I=function(e){var t=e.target.name,r=e.target.value,n=E.current;s(Object(w.a)(Object(w.a)({},a),{},Object(S.a)({},t,r))),l(Object(w.a)(Object(w.a)({},u),{},Object(S.a)({},t,pt(r,n[t]))))};return{handleSubmit:function(){var e=Object(R.a)(C.a.mark((function e(r){var n,c,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=E.current,!v){e.next=4;break}return e.abrupt("return");case 4:if(c=Ot(a,n),l(c),!Object.values(c).some((function(e){return e}))){e.next=8;break}return e.abrupt("return");case 8:return b(null),y(!0),e.prev=10,e.next=13,t(a);case 13:s=e.sent,_(""),b(s),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),_(e.t0.message);case 21:return e.prev=21,y(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[10,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),data:m,dataChanged:m!==N.current,error:x,loading:v,values:a,setValues:s,register:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.value,n=void 0===r?"":r,c=t.validate;return e in a||s(Object(w.a)(Object(w.a)({},a),{},Object(S.a)({},e,n))),c&&!(e in E.current)&&(E.current[e]=c),{name:e,value:a[e]||"",onChange:I,error:!!u[e],errorText:u[e]}}}}var xt="GET_USER_REQUEST",_t="GET_USER_SUCCESS",ht="GET_USER_ERROR",gt="SET_USER",vt="CLEAR_USER";function yt(){var e=g((function(e){return e.user})),t=e.user,r=e.userRequest,c=e.userSuccess,a=e.userErrorMessage,s=c||!!a,i=h();Object(n.useEffect)((function(){r||s||i(function(){var e=Object(R.a)(C.a.mark((function e(t,r){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:xt}),e.prev=1,e.next=4,Ne();case 4:n=e.sent,t({type:_t,user:n.user}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:ht,message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}())}),[i,s,r]);var o=Object(n.useCallback)(function(){var e=Object(R.a)(C.a.mark((function e(t){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(t);case 2:return r=e.sent,i({type:gt,user:r.user}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),u=Object(n.useCallback)(Object(R.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:i({type:vt});case 3:case"end":return e.stop()}}),e)}))),[i]);return{user:t,userLoaded:s,signIn:o,signOut:u}}var Nt=r(89),Et=r.n(Nt);function wt(){var e,t=yt(),r=t.user,n=t.userLoaded,c=t.signIn,a=Object(j.h)(),s=ft({onSubmit:c}),o=s.data,l=s.loading,d=s.error,m=s.register,b=s.handleSubmit;return n?!l&&r?Object(M.jsx)(j.a,{to:"/"}):o?Object(M.jsx)(j.a,{to:(null===(e=a.state)||void 0===e?void 0:e.from)||"/"}):Object(M.jsxs)("form",{className:Et.a.container,onSubmit:b,children:[Object(M.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),d&&Object(M.jsx)("p",{className:u()(Et.a.error,"text text_type_main-default mb-4"),children:d}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(v.Input,Object(w.a)(Object(w.a)({type:"email",placeholder:"E-mail"},m("email",{validate:{required:!0,email:!0}})),{},{disabled:l}))}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(jt,Object(w.a)(Object(w.a)({placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"},m("password",{validate:{required:!0,minLength:6}})),{},{disabled:l}))}),Object(M.jsx)("div",{className:"mb-20",children:Object(M.jsx)(v.Button,{children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(M.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u044b \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(M.jsx)(i.b,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(M.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(M.jsx)(i.b,{to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]}):null}var St=r(58),It=r.n(St);function kt(){var e=ft({onSubmit:function(e){return function(e){return _e.apply(this,arguments)}(e)}}),t=e.data,r=e.loading,n=e.error,c=e.register,a=e.handleSubmit;return t?Object(M.jsxs)("form",{className:It.a.container,children:[Object(M.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(M.jsxs)("p",{className:"text text_type_main-default ",children:["\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0438\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b. ",Object(M.jsx)(i.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(M.jsxs)("form",{className:It.a.container,onSubmit:a,children:[Object(M.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),n&&Object(M.jsx)("p",{className:u()(It.a.error,"text text_type_main-default mb-4"),children:n}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(v.Input,Object(w.a)(Object(w.a)({type:"text",placeholder:"\u0418\u043c\u044f"},c("name",{validate:{required:!0,minLength:3}})),{},{disabled:r}))}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(v.Input,Object(w.a)(Object(w.a)({type:"email",placeholder:"E-mail"},c("email",{validate:{required:!0,email:!0}})),{},{disabled:r}))}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(jt,Object(w.a)(Object(w.a)({placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"},c("password",{validate:{required:!0,minLength:6}})),{},{disabled:r}))}),Object(M.jsx)("div",{className:"mb-20",children:Object(M.jsx)(v.Button,{children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(M.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(M.jsx)(i.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var Ct=r(90),Rt=r.n(Ct);function Tt(){var e=ft({onSubmit:he}),t=e.data,r=e.loading,n=e.error,c=e.register,a=e.values,s=e.handleSubmit;return t?Object(M.jsx)(j.a,{to:{pathname:"/reset-password",state:{email:a.email}}}):Object(M.jsxs)("form",{className:Rt.a.container,onSubmit:s,children:[Object(M.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),n&&Object(M.jsx)("p",{className:u()(Rt.a.error,"text text_type_main-default mb-4"),children:n}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(v.Input,Object(w.a)(Object(w.a)({type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail"},c("email",{validate:{required:!0,email:!0}})),{},{disabled:r}))}),Object(M.jsx)("div",{className:"mb-20",children:Object(M.jsx)(v.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(M.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(M.jsx)(i.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var Lt=r(59),Mt=r.n(Lt);function Dt(){var e,t=Object(j.h)(),r=ft({onSubmit:ve}),n=r.data,c=r.loading,a=r.error,s=r.register,o=r.handleSubmit;return(null===(e=t.state)||void 0===e?void 0:e.email)?n?Object(M.jsxs)("form",{className:Mt.a.container,children:[Object(M.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(M.jsxs)("p",{className:"text text_type_main-default ",children:["\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d. ",Object(M.jsx)(i.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(M.jsxs)("form",{className:Mt.a.container,onSubmit:o,children:[Object(M.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),a&&Object(M.jsx)("p",{className:u()(Mt.a.error,"text text_type_main-default mb-4"),children:a}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(jt,Object(w.a)(Object(w.a)({placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"},s("password",{validate:{required:!0,minLength:6}})),{},{disabled:c}))}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(v.Input,Object(w.a)(Object(w.a)({type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430"},s("token",{validate:{required:!0,minLength:10}})),{},{disabled:c}))}),Object(M.jsx)("div",{className:"mb-20",children:Object(M.jsx)(v.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(M.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(M.jsx)(i.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(M.jsx)(j.a,{to:"/forgot-password"})}r(194);var qt=function(e){var t=e.setValue,r=Object(I.a)(e,["setValue"]),c=Object(n.useState)(!1),a=Object(O.a)(c,2),s=a[0],i=a[1],o=Object(n.useRef)(null),u=!1;return Object(M.jsx)(v.Input,Object(w.a)(Object(w.a)({},r),{},{ref:o,icon:s?"CloseIcon":"EditIcon",onIconClick:function(e){var r=o.current;u=!0,s&&r?(t(""),r.focus()):r&&(i(!0),setTimeout((function(){r.focus()}),0))},onBlur:function(e){setTimeout((function(){u?u=!1:i(!1)}),200)},disabled:r.disabled||!s}))},Ft=r(60),Pt=r.n(Ft),At=function(){var e=Object(_.b)(),t=yt().user,r=ft({onSubmit:we}),n=r.data,c=r.dataChanged,a=r.loading,s=r.error,i=r.register,o=r.values,l=r.setValues,d=r.handleSubmit;if(!t)return null;var j=!A(Object(w.a)(Object(w.a)({},t),{},{password:""}),o),m=function(e){return function(t){return l(Object(w.a)(Object(w.a)({},o),{},Object(S.a)({},e,t)))}};return n&&c&&!A(o,Object(w.a)(Object(w.a)({},n.user),{},{password:""}))&&l(Object(w.a)(Object(w.a)({},n.user),{},{password:""})),n&&t!==n.user&&e({type:gt,user:n.user}),Object(M.jsxs)("form",{className:u()(Pt.a.form,"mt-20"),onSubmit:d,children:[s&&Object(M.jsx)("p",{className:u()(Pt.a.error,"text text_type_main-default mb-4"),children:s}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(qt,Object(w.a)(Object(w.a)({type:"text",placeholder:"\u0418\u043c\u044f",setValue:m("name")},i("name",{value:t.name,validate:{required:!0,minLength:3}})),{},{disabled:a}))}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(qt,Object(w.a)(Object(w.a)({type:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",setValue:m("email")},i("email",{value:t.email,validate:{required:!0,email:!0}})),{},{disabled:a}))}),Object(M.jsx)("div",{className:"mb-6",children:Object(M.jsx)(qt,Object(w.a)(Object(w.a)({placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",setValue:m("password")},i("password",{validate:{minLength:6}})),{},{disabled:a}))}),Object(M.jsxs)("footer",{style:{display:j?"":"none"},className:Pt.a.formFooter,children:[Object(M.jsx)("a",{className:"text text_type_main-default mr-7",onClick:a?void 0:function(){l(Object(w.a)(Object(w.a)({},t),{},{password:""}))},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(M.jsx)(v.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Gt=r(61),Bt=r.n(Gt),Ut=function(e){var t=e.image,r=e.count,n=void 0===r?0:r;return Object(M.jsxs)("div",{className:Bt.a.ingredient,children:[Object(M.jsx)(D,{src:t,className:Bt.a.ingredientImage,width:112,responsive:!1,alt:"ingredient"}),n>0&&Object(M.jsxs)("i",{className:u()(Bt.a.ingredientFg,"text text_type_main-default"),children:["+",n]})]})},Ht="WS_FEED_CONNECTION_START",Wt="WS_FEED_CONNECTION_CLOSE",Vt="WS_FEED_CONNECTION_SUCCESS",zt="WS_FEED_CONNECTION_CLOSED",Jt="WS_FEED_CONNECTION_ERROR",Qt="WS_FEED_GET_MESSAGE",Xt="WS_PROFILE_CONNECTION_START",Kt="WS_PROFILE_CONNECTION_CLOSE",Yt="WS_PROFILE_CONNECTION_SUCCESS",Zt="WS_PROFILE_CONNECTION_CLOSED",$t="WS_PROFILE_CONNECTION_ERROR",er="WS_PROFILE_GET_MESSAGE";function tr(e){return Object(n.useMemo)((function(){return e.reduce((function(e,t){return e[t._id]=t,e}),{})}),[e])}function rr(e,t){if(0===Object.keys(t).length)return null;var r=e.ingredients.filter((function(e){return!!e})).map((function(e){return t[e]})).reduce((function(e,t){var r=e.find((function(e){var r=e._id;return t._id===r}));return r?("bun"!==r.type&&r.count++,e):(e.push(Object(w.a)(Object(w.a)({},t),{},{count:"bun"===t.type?2:1})),e)}),[]);return Object(w.a)(Object(w.a)({},e),{},{price:r.reduce((function(e,t){return e+t.count*t.price}),0),ingredients:r})}var nr={created:"\u0421\u043e\u0437\u0434\u0430\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",canceled:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d"};function cr(e){return nr[e]||e}function ar(e){var t=tr(g((function(e){return e.ingredients})).items);return{ordersList:Object(n.useMemo)((function(){return e.map((function(e){return rr(e,t)})).filter((function(e){return null!==e}))}),[e,t])}}function sr(e){var t=h(),r=Object(n.useState)(),c=Object(O.a)(r,2),a=c[0],s=c[1],i=Object(n.useState)(null),o=Object(O.a)(i,2),u=o[0],l=o[1],d=Object(n.useState)(!0),j=Object(O.a)(d,2),m=j[0],b=j[1],p=Object(n.useState)(""),f=Object(O.a)(p,2),x=f[0],_=f[1],v=g((function(e){return e.ingredients})),y=v.items,N=v.itemsErrorMessage,E=v.itemsRequest;Object(n.useEffect)((function(){0===y.length&&t(Te())}),[t,y.length]);var w=tr(y);return y.length&&a&&!u&&l(rr(a,w)),Object(n.useEffect)((function(){b(!0),function(e){return Ie.apply(this,arguments)}(e).then((function(e){s(e)})).catch((function(e){return _(e)})).finally((function(){b(!1)}))}),[e]),{order:u,loading:E||m,error:N+x}}var ir=r(27),or=r.n(ir),ur=function(e){var t=e.ingredients,r=void 0===t?[]:t,n=r.slice(0,5),c=r.slice(5);return Object(M.jsxs)("ul",{className:or.a.ingredientList,children:[n.map((function(e,t){var r=e.image;return Object(M.jsx)("li",{className:or.a.ingredient,style:{zIndex:n.length-t},children:Object(M.jsx)(Ut,{image:r})},t)})),c.length>0&&Object(M.jsx)("li",{className:or.a.ingredient,children:Object(M.jsx)(Ut,{image:c[0].image,count:c.length-1})},n.length)]})},lr=Object(n.memo)((function(e){var t=e.order,r=Object(j.h)(),n=Object(j.j)().path;return Object(M.jsxs)(i.b,{className:u()(or.a.container),to:{pathname:"".concat(n,"/").concat(t.number),state:{background:r}},children:[Object(M.jsxs)("header",{className:or.a.header,children:[Object(M.jsxs)("h2",{className:"text text_type_digits-default mr-4",children:["#",t.number]}),Object(M.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:G(t.createdAt)})]}),Object(M.jsx)("h1",{className:u()("text text_type_main-medium",or.a.title),children:t.name}),t.status&&Object(M.jsx)("p",{className:u()("text text_type_main-default pt-2 tablet-hidden",Object(S.a)({},or.a.statusDone,"done"===t.status)),children:cr(t.status)}),Object(M.jsxs)("footer",{className:u()(or.a.footer),children:[Object(M.jsx)(ur,{ingredients:t.ingredients}),Object(M.jsxs)("div",{className:or.a.price,children:[Object(M.jsx)("p",{className:"text text_type_digits-default mr-2",children:t.price}),Object(M.jsx)("p",{className:"text",children:Object(M.jsx)(v.CurrencyIcon,{type:"primary"})})]})]})]})})),dr=r(16),jr=r.n(dr);function mr(){var e=Object(j.j)().path;return Object(M.jsxs)("nav",{className:u()(jr.a.menu,"mt-20 mr-15"),children:[Object(M.jsxs)("ul",{className:"text text_type_main-medium",children:[Object(M.jsx)("li",{children:Object(M.jsx)(i.c,{to:e,exact:!0,className:jr.a.menuItem,activeClassName:jr.a.menuItemActive,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(M.jsx)("li",{children:Object(M.jsx)(i.c,{to:"".concat(e,"/orders"),className:jr.a.menuItem,activeClassName:jr.a.menuItemActive,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(M.jsx)("li",{children:Object(M.jsx)(i.c,{to:"".concat(e,"/logout"),exact:!0,className:jr.a.menuItem,activeClassName:jr.a.menuItemActive,children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(M.jsxs)("footer",{className:u()(jr.a.menuFooter,"text text_type_main-default text_color_inactive mt-20"),children:[Object(M.jsx)(j.b,{path:e,exact:!0,children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(M.jsx)(j.b,{path:"".concat(e,"/orders"),exact:!0,children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]})}function br(){var e=yt().signOut,t=Object(n.useState)(""),r=Object(O.a)(t,2),c=r[0],a=r[1];return Object(n.useEffect)((function(){e().catch((function(e){return a(e.message)}))}),[e]),c?Object(M.jsxs)("p",{className:u()(jr.a.error,"text text_type_main-default mt-20"),children:["\u041f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435. ",c]}):Object(M.jsx)(Ke,{center:!0})}function pr(){var e=Object(n.useRef)(null);Z(e);var t=function(){var e=h(),t=g((function(e){return e.profile})),r=t.orders,c=t.wsError;Object(n.useLayoutEffect)((function(){return e({type:Xt}),function(){e({type:Kt})}}),[e]);var a=g((function(e){return e.ingredients})),s=a.items,i=a.itemsErrorMessage,o=a.itemsRequest;Object(n.useLayoutEffect)((function(){0===s.length&&e(Te())}),[e,s.length]);var u=ar(r).ordersList;u.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}));var l=c+i;return{ordersList:u,error:l,loading:!r.length&&!l||o}}(),r=t.ordersList,c=t.error,a=t.loading;return Object(M.jsxs)(M.Fragment,{children:[c&&Object(M.jsxs)("p",{className:u()(jr.a.error,"text text_type_main-default"),children:["\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. ",c]}),Object(M.jsxs)("ul",{className:jr.a.orderList,ref:e,children:[a&&Object(M.jsx)(K,{repeat:2,className:u()(jr.a.skeletonOrder,"mb-6 mr-2"),tag:"li"}),r.map((function(e){return Object(M.jsx)("li",{className:"mb-6 mr-2",children:Object(M.jsx)(lr,{order:e})},e.number)}))]})]})}function Or(){var e=Object(j.j)().path;return Object(M.jsxs)("section",{className:u()(jr.a.container,"mt-10"),children:[Object(M.jsx)(mr,{}),Object(M.jsx)(j.b,{path:e,exact:!0,children:Object(M.jsx)(At,{})}),Object(M.jsx)(j.b,{path:"".concat(e,"/orders"),exact:!0,children:Object(M.jsx)(pr,{})}),Object(M.jsx)(j.b,{path:"".concat(e,"/logout"),exact:!0,children:Object(M.jsx)(br,{})})]})}var fr=r(25),xr=r.n(fr);function _r(e){var t=e.title,r=e.orders,n=e.loading,c=e.className,a=e.complete,s=void 0!==a&&a;return Object(M.jsxs)("section",{className:u()(xr.a.statisticGridItem,c),children:[Object(M.jsx)("h2",{className:"text text_type_main-medium mb-6",children:t}),Object(M.jsxs)("ul",{className:u()(xr.a.statisticGridItemList,"text text_type_digits-default",Object(S.a)({},xr.a.success,s)),children:[n&&Object(M.jsx)(K,{repeat:3,className:"mb-2",tag:"li"}),r.map((function(e,t){return Object(M.jsx)("li",{className:"mb-2",children:e},t)}))]})]})}function hr(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null);Z(e),Z(t);var r=function(){var e=h(),t=g((function(e){return e.feed})),r=t.orders,c=t.total,a=t.totalToday,s=t.wsError;Object(n.useEffect)((function(){return e({type:Ht}),function(){e({type:Wt})}}),[e]);var i=g((function(e){return e.ingredients})),o=i.items,u=i.itemsErrorMessage,l=i.itemsRequest;Object(n.useLayoutEffect)((function(){0===o.length&&e(Te())}),[e,o.length]);var d=s+u;return{ordersList:ar(r).ordersList,total:c,totalToday:a,completeNumbers:Object(n.useMemo)((function(){return r.filter((function(e){return"done"===e.status})).slice(0,20).map((function(e){return e.number}))}),[r]),progressNumbers:Object(n.useMemo)((function(){return r.filter((function(e){return"pending"===e.status})).slice(0,20).map((function(e){return e.number}))}),[r]),error:d,loading:!r.length&&!d||l}}(),c=r.ordersList,a=r.completeNumbers,s=r.progressNumbers,i=r.total,o=r.totalToday,l=r.error,j=r.loading;return Object(M.jsxs)("section",{className:u()(xr.a.container,"mt-10"),children:[Object(M.jsx)("h1",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(M.jsxs)("section",{className:xr.a.content,children:[l&&Object(M.jsxs)("p",{className:u()(xr.a.error,"text text_type_main-default"),children:["\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. ",l]}),Object(M.jsxs)("ul",{className:u()(xr.a.orderList,"mr-15"),ref:t,children:[j&&Object(M.jsx)(K,{className:u()(xr.a.skeletonOrder,"mb-4 mr-2"),repeat:2,tag:"li"}),c.map((function(e){return Object(M.jsx)("li",{className:"mb-4 mr-2",children:Object(M.jsx)(lr,{order:e})},e.number)}))]}),Object(M.jsxs)("section",{className:xr.a.statistic,ref:e,children:[Object(M.jsxs)("section",{className:xr.a.statisticGrid,children:[Object(M.jsx)(_r,{className:"mr-9",title:"\u0413\u043e\u0442\u043e\u0432\u044b:",loading:j,orders:a,complete:!0}),Object(M.jsx)(_r,{title:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:",loading:j,orders:s})]}),i>0&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h2",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(M.jsx)("p",{className:u()(d.a.textSpaceShadow,"text text_type_digits-large"),children:i}),Object(M.jsx)("h2",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(M.jsx)("p",{className:u()(d.a.textSpaceShadow,"text text_type_digits-large"),children:o})]})]})]})]})}var gr=r(31),vr=r.n(gr),yr=function(e){var t=e.ingredients,r=void 0===t?[]:t,n=e.listRef;return Object(M.jsx)("ul",{className:vr.a.ingredientList,ref:n,children:r.map((function(e,t){var r=e.image,n=e.name,c=e.count,a=e.price;return Object(M.jsxs)("li",{className:u()(vr.a.ingredient,"mb-4 mr-6"),children:[Object(M.jsx)(Ut,{image:r}),Object(M.jsx)("p",{className:u()(vr.a.ingredientName,"text text_type_main-default ml-4"),children:n}),Object(M.jsxs)("div",{className:vr.a.price,children:[Object(M.jsxs)("p",{className:"text text_type_digits-default mr-2",children:[c," x ",a]}),Object(M.jsx)("p",{className:"text",children:Object(M.jsx)(v.CurrencyIcon,{type:"primary"})})]})]},t)}))})},Nr=Object(n.memo)((function(e){var t=e.order,r=e.isInModal,c=void 0!==r&&r,a=Object(n.useRef)(null),s=Object(n.useRef)(null);return Z(a,{exclude:s,maxHeight:312,isInModal:c}),Object(M.jsxs)("section",{className:u()(vr.a.container),children:[Object(M.jsx)("h1",{className:"text text_type_main-medium mt-5",children:t.name}),t.status&&Object(M.jsx)("p",{className:u()("text text_type_main-default pt-3",Object(S.a)({},vr.a.statusDone,"done"===t.status)),children:cr(t.status)}),Object(M.jsxs)("section",{className:u()("mt-15"),children:[Object(M.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(M.jsx)(yr,{ingredients:t.ingredients,listRef:a})]}),Object(M.jsxs)("footer",{className:u()(vr.a.footer,"mt-10"),ref:s,children:[Object(M.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:G(t.createdAt)}),Object(M.jsxs)("div",{className:vr.a.price,children:[Object(M.jsx)("p",{className:"text text_type_digits-default mr-2",children:t.price}),Object(M.jsx)("p",{className:"text",children:Object(M.jsx)(v.CurrencyIcon,{type:"primary"})})]})]})]})})),Er=r(35),wr=r.n(Er);function Sr(){var e=Object(j.i)().id,t=sr(e),r=t.order,n=t.loading,c=t.error;return c?Object(M.jsx)("section",{className:u()(wr.a.container,"mt-2 mb-2 text text_type_main-default"),children:Object(M.jsxs)("p",{className:wr.a.error,children:["\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043d\u0430\u0439\u0442\u0438 \u0437\u0430\u043a\u0430\u0437 ",e,".",Object(M.jsx)("br",{})," ",c]})}):n?Object(M.jsxs)("section",{className:u()(wr.a.container,"mt-2 mb-2"),children:[Object(M.jsx)("div",{className:wr.a.center,children:Object(M.jsx)(K,{width:200,className:"text text_type_digits-default mb-10"})}),Object(M.jsx)(K,{repeat:2,className:"text text_type_main-medium mt-5"}),Object(M.jsxs)("div",{className:"mt-15",children:[Object(M.jsx)(K,{width:64,circle:!0,className:"mr-4"}),Object(M.jsx)(K,{width:"60%",className:"text text_type_main-default mt-6"})]}),Object(M.jsxs)("div",{className:"mt-4",children:[Object(M.jsx)(K,{width:64,height:64,circle:!0,className:"mr-4"}),Object(M.jsx)(K,{width:"60%",className:"text text_type_main-default mt-6"})]})]}):r&&Object(M.jsxs)("section",{className:u()(wr.a.container,"mt-2 mb-2"),children:[Object(M.jsxs)("h2",{className:u()(wr.a.center,"text text_type_digits-default mb-10"),children:["#",r.number]}),Object(M.jsx)(Nr,{order:r})]})}var Ir=r(62),kr=r.n(Ir),Cr=Object(n.memo)((function(e){var t=e.ingredient;return Object(M.jsxs)("div",{className:u()(kr.a.container,"pl-15 pr-15 pb-5"),children:[Object(M.jsx)(D,{src:t.image_large,alt:t.name,width:480}),Object(M.jsx)("h1",{className:u()(kr.a.title,"text text_type_main-medium mt-4 mb-8"),children:t.name}),Object(M.jsxs)("dl",{className:u()(kr.a.content,"text text_type_main-default"),children:[Object(M.jsxs)("div",{children:[Object(M.jsx)("dt",{children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(M.jsx)("dd",{className:"text text_type_digits-default mt-2",children:t.calories})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("dt",{children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(M.jsx)("dd",{className:"text text_type_digits-default mt-2",children:t.proteins})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("dt",{children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(M.jsx)("dd",{className:"text text_type_digits-default mt-2",children:t.fat})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)("dt",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(M.jsx)("dd",{className:"text text_type_digits-default mt-2",children:t.carbohydrates})]})]})]})})),Rr=r(91),Tr=r.n(Rr),Lr=Object(M.jsxs)("div",{children:[Object(M.jsx)(K,{width:"80%",className:"text text_type_main-large"}),Object(M.jsx)(K,{width:480,height:240,className:"mt-4 mb-8"}),Object(M.jsx)(K,{height:30,className:"mt-4",repeat:3})]});function Mr(){var e=Object(j.i)().id,t=h(),r=g((function(e){return e.ingredients})),c=r.items,a=r.itemsErrorMessage,s=r.itemsRequest;Object(n.useLayoutEffect)((function(){0===c.length&&t(Te())}),[c.length,t]);var i=c.find((function(t){return t._id===e}));return Object(M.jsxs)("section",{className:u()(Tr.a.container),children:[s&&Lr,a&&Object(M.jsxs)("p",{className:u()(Tr.a.error,"text text_type_main-default"),children:["\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445. ",a]}),i&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h1",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(M.jsx)(Cr,{ingredient:i})]}),!a&&!s&&!i&&Object(M.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0432\u044b, \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043d\u0430\u0439\u0442\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442."})]})}function Dr(){return Object(M.jsxs)("div",{style:{textAlign:"center"},children:[Object(M.jsx)("p",{className:"text text_type_digits-large mt-20",children:"404"}),Object(M.jsx)("p",{className:"text text_type_main-medium text_color_inactive mt-5",children:"\u0423\u043f\u0441!"}),Object(M.jsx)("p",{className:"text text_type_main-medium text_color_inactive mt-5",children:"\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u043c\u044b \u0435\u0451 \u043f\u043e\u0442\u0435\u0440\u044f\u043b\u0438..."})]})}var qr=r(36),Fr=r.n(qr),Pr=r(92),Ar=r.n(Pr),Gr=function(e){var t=e.icon,r=e.children,n=e.path,c=Object(j.j)({path:n,exact:"/"===n});return Object(M.jsxs)(i.b,{className:u()(Ar.a.container,"text text_type_main-default pl-5 pr-5 pt-4 pb-4"),to:n,children:[Object(M.jsx)(t,{type:c?"primary":"secondary"}),Object(M.jsx)("span",{className:u()(Ar.a.text,{text_color_inactive:!c},"ml-2"),children:r})]})},Br=function(){return Object(M.jsx)("header",{className:u()(Fr.a.header),children:Object(M.jsxs)("ul",{className:Fr.a.content,children:[Object(M.jsx)("li",{className:Fr.a.contentItem,children:Object(M.jsx)("nav",{className:u()(Fr.a.navigation,"mt-4 mb-4"),children:Object(M.jsxs)("ul",{children:[Object(M.jsx)("li",{children:Object(M.jsx)(Gr,{icon:v.BurgerIcon,path:"/",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})}),Object(M.jsx)("li",{className:u()("ml-2"),children:Object(M.jsx)(Gr,{icon:v.ListIcon,path:"/feed",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})]})})}),Object(M.jsx)("li",{className:Fr.a.contentItemCenter,children:Object(M.jsx)(i.b,{to:"/",children:Object(M.jsx)(v.Logo,{})})}),Object(M.jsx)("li",{className:Fr.a.contentItemRight,children:Object(M.jsx)(Gr,{icon:v.ProfileIcon,path:"/profile",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})})]})})},Ur=function(e){var t=e.children,r=Object(I.a)(e,["children"]),n=yt(),c=n.user;return n.userLoaded?Object(M.jsx)(j.b,Object(w.a)(Object(w.a)({},r),{},{render:function(e){var r=e.location;return c?t:Object(M.jsx)(j.a,{to:{pathname:"/login",state:{from:r}}})}})):Object(M.jsx)(Ke,{center:!0})},Hr=function(e){var t=e.children,r=Object(I.a)(e,["children"]),n=yt(),c=n.user;return n.userLoaded?Object(M.jsx)(j.b,Object(w.a)(Object(w.a)({},r),{},{render:function(){return c?Object(M.jsx)(j.a,{to:"/"}):t}})):Object(M.jsx)(Ke,{center:!0})},Wr=Object(n.memo)((function(){var e=Object(j.i)().id,t=Object(j.g)(),r=g((function(e){return e.ingredients})).items.find((function(t){return t._id===e}))||null,c=Object(n.useCallback)((function(){t.goBack()}),[t]);return r&&Object(M.jsx)(Je,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u0430",visible:!0,onClose:c,children:Object(M.jsx)(Cr,{ingredient:r})})})),Vr=Object(n.memo)((function(){var e=Object(j.i)().id,t=Object(j.g)(),r=Object(j.h)(),c=g((function(e){return e.feed})).orders,a=g((function(e){return e.profile})).orders,s=ar(r.pathname.startsWith("/feed")?c:a).ordersList.find((function(t){return t.number===Number(e)}))||null,i=Object(n.useCallback)((function(){t.goBack()}),[t]),o=s&&Object(M.jsxs)("div",{className:"text text_type_digits-default",children:["#",s.number]});return s&&Object(M.jsx)(Je,{header:o,visible:!0,onClose:i,children:Object(M.jsx)(Nr,{order:s,isInModal:!0})})})),zr=function(){var e,t=Object(j.h)(),r="PUSH"===Object(j.g)().action&&(null===(e=t.state)||void 0===e?void 0:e.background);return Object(M.jsxs)("div",{className:d.a.app,children:[Object(M.jsx)(Br,{}),Object(M.jsx)("main",{className:u()(d.a.main),children:Object(M.jsxs)(j.d,{location:r||t,children:[Object(M.jsx)(j.b,{path:"/",exact:!0,children:Object(M.jsx)(dt,{})}),Object(M.jsx)(j.b,{path:"/login",exact:!0,children:Object(M.jsx)(wt,{})}),Object(M.jsx)(Hr,{path:"/register",exact:!0,children:Object(M.jsx)(kt,{})}),Object(M.jsx)(Hr,{path:"/forgot-password",exact:!0,children:Object(M.jsx)(Tt,{})}),Object(M.jsx)(Hr,{path:"/reset-password",exact:!0,children:Object(M.jsx)(Dt,{})}),Object(M.jsx)(Ur,{path:"/profile/orders/:id",exact:!0,children:Object(M.jsx)(Sr,{})}),Object(M.jsx)(Ur,{path:"/profile",children:Object(M.jsx)(Or,{})}),Object(M.jsx)(j.b,{path:"/feed/:id",exact:!0,children:Object(M.jsx)(Sr,{})}),Object(M.jsx)(j.b,{path:"/feed",exact:!0,children:Object(M.jsx)(hr,{})}),Object(M.jsx)(j.b,{path:"/ingredients/:id",exact:!0,children:Object(M.jsx)(Mr,{})}),Object(M.jsx)(j.b,{children:Object(M.jsx)(Dr,{})})]})}),r&&Object(M.jsx)(j.b,{path:"/ingredients/:id",children:Object(M.jsx)(Wr,{})}),r&&Object(M.jsx)(j.b,{path:"/profile/orders/:id",children:Object(M.jsx)(Vr,{})}),r&&Object(M.jsx)(j.b,{path:"/feed/:id",children:Object(M.jsx)(Vr,{})})]})},Jr=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,203)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},Qr=r(33),Xr=r(111),Kr={items:[],itemsRequest:!1,itemsSuccess:!1,itemsErrorMessage:""};function Yr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((function(e,t){return e+t.price}),0)+2*((null===t||void 0===t?void 0:t.price)||0)}var Zr={items:[],bunItem:null,totalPrice:0},$r={number:null,checkoutRequest:!1,checkoutSuccess:!1,checkoutErrorMessage:""},en={user:null,userRequest:!1,userSuccess:!1,userErrorMessage:""},tn={wsConnected:!1,wsError:"",orders:[],total:0,totalToday:0},rn={wsConnected:!1,wsError:"",orders:[]},nn=Object(Qr.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:return Object(w.a)(Object(w.a)({},e),{},{itemsRequest:!0,itemsSuccess:!1,itemsErrorMessage:""});case Ce:return Object(w.a)(Object(w.a)({},e),{},{itemsRequest:!1,itemsSuccess:!0,itemsErrorMessage:"",items:t.items});case Re:return Object(w.a)(Object(w.a)({},e),{},{itemsRequest:!1,itemsSuccess:!1,itemsErrorMessage:t.message,items:[]});default:return e}},construct:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ye:var r=t.item;if("bun"===r.type)return Object(w.a)(Object(w.a)({},e),{},{bunItem:r,totalPrice:Yr(e.items,r)});var n=[].concat(Object(Y.a)(e.items),[Object(w.a)(Object(w.a)({},r),{},{key:r._id+(new Date).getTime()})]);return Object(w.a)(Object(w.a)({},e),{},{items:n,totalPrice:Yr(n,e.bunItem)});case Ze:var c=e.items.filter((function(e){return e.key!==t.item.key}));return Object(w.a)(Object(w.a)({},e),{},{items:c,totalPrice:Yr(c,e.bunItem)});case $e:var a=e.items,s=a[t.dropIndex];return Object(w.a)(Object(w.a)({},e),{},{items:[].concat(Object(Y.a)(a.slice(0,t.hoverIndex+1).filter((function(e){return e.key!==s.key}))),[s],Object(Y.a)(a.slice(t.hoverIndex+1).filter((function(e){return e.key!==s.key}))))});case et:return Zr;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ct:return Object(w.a)(Object(w.a)({},e),{},{checkoutRequest:!0,checkoutSuccess:!1,checkoutErrorMessage:"",number:null});case at:return Object(w.a)(Object(w.a)({},e),{},{checkoutRequest:!1,checkoutSuccess:!0,number:t.number});case st:return Object(w.a)(Object(w.a)({},e),{},{checkoutRequest:!1,checkoutSuccess:!1,checkoutErrorMessage:t.message});case it:return $r;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:en,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case xt:return Object(w.a)(Object(w.a)({},e),{},{userRequest:!0,userSuccess:!1,userErrorMessage:"",user:null});case _t:return Object(w.a)(Object(w.a)({},e),{},{userRequest:!1,userSuccess:!0,userErrorMessage:"",user:t.user});case ht:return Object(w.a)(Object(w.a)({},e),{},{userRequest:!1,userSuccess:!1,userErrorMessage:t.message,user:null});case gt:return Object(w.a)(Object(w.a)({},e),{},{user:t.user});case vt:return Object(w.a)(Object(w.a)({},e),{},{user:null});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Vt:return Object(w.a)(Object(w.a)({},e),{},{wsError:"",wsConnected:!0});case Jt:return Object(w.a)(Object(w.a)({},e),{},{wsError:t.payload.message,wsConnected:!1});case zt:return Object(w.a)(Object(w.a)({},e),{},{wsError:"",wsConnected:!1});case Qt:return t.payload.message?Object(w.a)(Object(w.a)({},e),{},{wsError:t.payload.message,orders:[],total:0,totalToday:0}):Object(w.a)(Object(w.a)({},e),{},{wsError:"",orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Yt:return Object(w.a)(Object(w.a)({},e),{},{wsError:"",wsConnected:!0});case $t:return Object(w.a)(Object(w.a)({},e),{},{wsError:t.payload.message,wsConnected:!1});case Zt:return Object(w.a)(Object(w.a)({},e),{},{wsError:"",wsConnected:!1});case er:return t.payload.message?Object(w.a)(Object(w.a)({},e),{},{wsError:t.payload.message,orders:[]}):Object(w.a)(Object(w.a)({},e),{},{wsError:"",orders:t.payload.orders});default:return e}}}),cn=function(e,t,r){return function(n){var c=null;return function(a){return function(s){var i=n.dispatch,o=s.type,u=s.payload,l=t.wsInit,d=t.wsClose,j=t.wsSendMessage,m=t.onOpen,b=t.onClose,p=t.onError,O=t.onMessage;if(o===l){var f=e;if(r){var x=q("accessToken");f+="?token=".concat(x)}c=new WebSocket(f)}if(c){if(c.onopen=function(e){i({type:m,payload:e})},c.onerror=function(e){i({type:p,payload:{message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f"}})},c.onmessage=function(e){var t=e.data,r=JSON.parse(t),n=(r.success,Object(I.a)(r,["success"]));n.message&&"Invalid or missing token"===n.message&&c?(c.close(),ie().then((function(){i({type:l})}))):i({type:O,payload:n})},c.onclose=function(e){i({type:b})},o===j){var _=Object(w.a)({},u);c.send(JSON.stringify(_))}o===d&&(c.close(),c=null)}a(s)}}}},an={url:"wss://norma.nomoreparties.space/orders/all",actions:{wsInit:Ht,wsClose:Wt,wsSendMessage:"WS_FEED_SEND_MESSAGE",onOpen:Vt,onClose:zt,onError:Jt,onMessage:Qt}},sn={url:"wss://norma.nomoreparties.space/orders",actions:{wsInit:Xt,wsClose:Kt,wsSendMessage:"WS_PROFILE_SEND_MESSAGE",onOpen:Yt,onClose:Zt,onError:$t,onMessage:er}},on=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Qr.c)(Object(Qr.a)(Xr.a,cn(an.url,an.actions),cn(sn.url,sn.actions,!0))),un=Object(Qr.d)(nn,on);s.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(_.a,{store:un,children:Object(M.jsx)(i.a,{children:Object(M.jsx)(zr,{})})})}),document.getElementById("root")),Jr()},23:function(e,t,r){e.exports={container:"burger-ingredients_container__g3Y-c",title:"burger-ingredients_title__3-eSY",tabs:"burger-ingredients_tabs__11tAC",ingredientList:"burger-ingredients_ingredientList__1udKK",ingredients:"burger-ingredients_ingredients__3JkVS",ingredient:"burger-ingredients_ingredient__2d4AW",enter:"burger-ingredients_enter___35Li",enterActive:"burger-ingredients_enterActive__1L7vt",exit:"burger-ingredients_exit__2Ngrf",exitActive:"burger-ingredients_exitActive__1JkWc",hidden:"burger-ingredients_hidden__aAB8A",error:"burger-ingredients_error__28FCP"}},24:function(e,t,r){e.exports={container:"burger-constructor_container__6B1um",elements:"burger-constructor_elements__3rOpg",bunElementTop:"burger-constructor_bunElementTop__ASSYO",bunElementBottom:"burger-constructor_bunElementBottom__3M4Qy",dragMessage:"burger-constructor_dragMessage__1qReQ",dragMessageOver:"burger-constructor_dragMessageOver__2sNJV",elementsScroll:"burger-constructor_elementsScroll__6hMO9 burger-constructor_elements__3rOpg",footer:"burger-constructor_footer__bba9V",error:"burger-constructor_error__3PhHj",center:"burger-constructor_center__rnF9g"}},25:function(e,t,r){e.exports={container:"feed_container__1womP",content:"feed_content__3ZfI4",orderList:"feed_orderList__1PpT4",statistic:"feed_statistic__3GNTH",statisticGrid:"feed_statisticGrid__1ZOHC",statisticGridItem:"feed_statisticGridItem__1NvIS",statisticGridItemList:"feed_statisticGridItemList__3K1R6",success:"feed_success__3Grio",error:"feed_error__3ukov",skeletonOrder:"feed_skeletonOrder__lmqkO"}},27:function(e,t,r){e.exports={container:"order-item_container__21HZr",header:"order-item_header__2eoTj",title:"order-item_title__2suKe",statusDone:"order-item_statusDone__eoToN",footer:"order-item_footer__4G-RR",ingredientList:"order-item_ingredientList__1eMQg",ingredient:"order-item_ingredient__aB_BS",price:"order-item_price__2ByDf"}},29:function(e,t,r){e.exports={app:"app_app__1iO2A",main:"app_main__2xlwg",customScrollbar:"app_customScrollbar__9oUGE",textSpaceShadow:"app_textSpaceShadow__oE2Xy"}},31:function(e,t,r){e.exports={container:"order-info_container__3Z36n",statusDone:"order-info_statusDone__2YHWI",footer:"order-info_footer__xrBia",ingredientList:"order-info_ingredientList__2JmUv",ingredient:"order-info_ingredient__11Y2M",ingredientName:"order-info_ingredientName__2XXpq",price:"order-info_price__29-XW"}},35:function(e,t,r){e.exports={container:"order_container__109Bl",center:"order_center__v0cy4",error:"order_error__21SUu"}},36:function(e,t,r){e.exports={header:"app-header_header__2gokJ",content:"app-header_content__t8UHX",contentItem:"app-header_contentItem__EEQMV",contentItemCenter:"app-header_contentItemCenter__-07yp app-header_contentItem__EEQMV",contentItemRight:"app-header_contentItemRight__3YCaq app-header_contentItem__EEQMV",navigation:"app-header_navigation__1JSpu"}},40:function(e,t,r){e.exports={container:"modal_container__3-3mw",title:"modal_title__IJjDb",content:"modal_content__2OuMO app_customScrollbar__9oUGE",closeButton:"modal_closeButton__3REEC",hidden:"modal_hidden__1bEaB"}},55:function(e,t,r){e.exports={container:"ingredient_container__31Igb",price:"ingredient_price__1pVsY",title:"ingredient_title__1ll2v"}},56:function(e,t,r){e.exports={imageResponsive:"lazy-image_imageResponsive__1F645",imagePreloader:"lazy-image_imagePreloader__1uXjc",imagePreloaderResponsive:"lazy-image_imagePreloaderResponsive__5s5Sx"}},57:function(e,t,r){e.exports={spinner:"spinner_spinner__10eHT",rotate:"spinner_rotate__37IgN",spinnerCenter:"spinner_spinnerCenter__QRXSM",circle:"spinner_circle__38GPX",dash:"spinner_dash__1yuey"}},58:function(e,t,r){e.exports={container:"register_container__3Jyyi",error:"register_error__1WF_2"}},59:function(e,t,r){e.exports={container:"reset-password_container__3QctV",error:"reset-password_error__3D5Q8"}},60:function(e,t,r){e.exports={form:"profile-form_form__2dmNA",formFooter:"profile-form_formFooter__1Ed5L",error:"profile-form_error__2I4gz"}},61:function(e,t,r){e.exports={ingredient:"ingredient-avatar_ingredient__15Zld",ingredientImage:"ingredient-avatar_ingredientImage__2sdra",ingredientFg:"ingredient-avatar_ingredientFg__-tQzF"}},62:function(e,t,r){e.exports={container:"ingredient-details_container__3MYGD",title:"ingredient-details_title__1mCpc",image:"ingredient-details_image__3PqS_",imagePreloader:"ingredient-details_imagePreloader__1QTSj ingredient-details_image__3PqS_",content:"ingredient-details_content__1ahpI"}},82:function(e,t,r){e.exports={skeleton:"skeleton_skeleton__2j3X9",circle:"skeleton_circle__1J7KM"}},85:function(e,t,r){e.exports={container:"order-details_container__21u_h",title:"order-details_title__3cmiO app_textSpaceShadow__oE2Xy"}},86:function(e,t,r){e.exports={container:"modal-overlay_container__1n_Ma",hidden:"modal-overlay_hidden__17Rf-"}},87:function(e,t,r){e.exports={container:"drag-element_container__3V56I",dragItem:"drag-element_dragItem__7xK8c"}},89:function(e,t,r){e.exports={container:"login_container__1FLBr",error:"login_error__1rcy-"}},90:function(e,t,r){e.exports={container:"forgot-password_container__7kREh",error:"forgot-password_error__3ID3w"}},91:function(e,t,r){e.exports={container:"ingredient_container__3LfsL",error:"ingredient_error__1v44w"}},92:function(e,t,r){e.exports={container:"header-item_container__rqenJ",text:"header-item_text__2cjCi"}}},[[195,1,2]]]);
//# sourceMappingURL=main.f6530d94.chunk.js.map