{"version":3,"sources":["components/app-header/header-item/header-item.module.css","pages/profile.module.css","services/hooks.ts","components/burger-ingredients/ingredient/ingredient.tsx","components/skeleton/skeleton.tsx","services/utils.ts","services/scrollbar.ts","services/api.ts","services/actions/ingredients.ts","components/burger-ingredients/burger-ingredients.tsx","images/done.svg","components/order-details/order-details.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/spinner/spinner.tsx","services/actions/constructor.ts","components/burger-constructor/drag-element/drag-element.tsx","services/actions/order.ts","components/burger-constructor/burger-constructor.tsx","pages/home.tsx","components/password-input/password-input.tsx","services/form.ts","services/actions/user.ts","services/auth.ts","pages/login.tsx","pages/register.tsx","pages/forgot-password.tsx","pages/reset-password.tsx","components/view-input/view-input.tsx","components/profile-form/profile-form.tsx","components/ingredient-avatar/ingredient-avatar.tsx","services/actions/ws-feed.ts","services/actions/ws-profile.ts","services/orders.ts","components/order-item/order-item.tsx","pages/profile.tsx","pages/feed.tsx","components/order-info/order-info.tsx","pages/order.tsx","components/ingredient-details/ingredient-details.tsx","pages/ingredient.tsx","pages/not-found.tsx","components/app-header/header-item/header-item.tsx","components/app-header/app-header.tsx","components/protected-route.tsx","components/unauthorized-route.tsx","components/ingredient-details-modal/ingredient-details-modal.tsx","components/order-info-modal/order-info-modal.tsx","components/app/app.tsx","reportWebVitals.ts","services/reducers/ingredients.ts","services/reducers/constructor.ts","services/reducers/order.ts","services/reducers/user.ts","services/reducers/ws-feed.ts","services/reducers/ws-profile.ts","services/reducers/index.ts","services/socket-middleware.ts","services/store.ts","index.tsx","pages/feed.module.css","components/burger-ingredients/burger-ingredients.module.css","components/app/app.module.css","components/burger-constructor/burger-constructor.module.css","components/order-item/order-item.module.css","components/order-info/order-info.module.css","pages/order.module.css","components/app-header/app-header.module.css","components/modal/modal.module.css","components/ingredient-details/ingredient-details.module.css","components/burger-ingredients/ingredient/ingredient.module.css","components/spinner/spinner.module.css","pages/register.module.css","pages/reset-password.module.css","components/profile-form/profile-form.module.css","components/ingredient-avatar/ingredient-avatar.module.css","components/skeleton/skeleton.module.css","components/order-details/order-details.module.css","components/modal-overlay/modal-overlay.module.css","components/burger-constructor/drag-element/drag-element.module.css","pages/login.module.css","pages/forgot-password.module.css","pages/ingredient.module.css"],"names":["module","exports","useDispatch","dispatchHook","useSelector","selectorHook","Ingredient","memo","className","item","count","onClick","name","price","image","useDrag","type","dragRef","cn","styles","container","e","ref","data-test-id","_id","size","src","width","height","alt","title","Skeleton","circle","repeat","tag","Tag","style","classNameTotal","skeleton","Array","fill","map","index","getCookie","matches","document","cookie","match","RegExp","replace","decodeURIComponent","undefined","setCookie","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","path","updatedCookie","encodeURIComponent","propName","propValue","deleteCookie","isEqual","obj1","obj2","p","hasOwnProperty","toString","formatPastDate","dateStr","today","setHours","setMinutes","setSeconds","date","timezone","getHours","getUTCHours","hours","padStart","minutes","getMinutes","past","toLocaleDateString","days","Math","ceil","n","text_forms","n1","abs","declensionOfNum","timingFunctions","linear","k","easeIn","pow","easeOut","easeInOut","sin","PI","animate","timing","draw","duration","start","performance","now","timingFunc","Promise","resolve","requestAnimationFrame","time","timeFraction","progress","usePrevious","useRef","useEffect","current","useScrollbar","arrExclude","exclude","maxHeight","isInModal","useLayoutEffect","el","bottom","reduce","acc","getComputedStyle","offsetHeight","parseInt","marginTop","marginBottom","modalFix","top","getBoundingClientRect","aroundSpace","classList","add","appStyles","customScrollbar","remove","API_URL","routes","ingredients","orders","auth","login","register","logout","token","user","password","resetCheck","reset","translate","msg","checkResponse","res","a","json","success","message","ok","Error","status","fetchPost","url","params","fetch","method","headers","body","JSON","stringify","setTokens","accessToken","refreshToken","split","localStorage","setItem","getItem","data","fetchWithRefresh","options","Authorization","loadIngredients","checkoutOrder","items","removeItem","checkResetPassword","resetPassword","loadUser","updateUser","id","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENTS_ERROR","getIngredients","dispatch","GROUP_NAME","bun","sauce","main","BurgerIngredients","useState","currentTab","setCurrentTab","location","useLocation","store","error","itemsErrorMessage","loading","itemsRequest","construct","constructorItems","bunItem","ingredientsRef","counterMap","useMemo","filter","length","root","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","section","target","dataset","group","rootMargin","sections","querySelectorAll","observe","unobserve","ingredientList","ingredient","tabs","Object","key","active","tab","querySelector","startScroll","scrollTop","endScroll","offsetTop","scrollToTabSection","data-group","to","pathname","state","background","OrderDetails","orderNumber","statusIcon","ModalOverlay","visible","onClose","hidden","modalRoot","getElementById","visibleModals","Modal","children","header","modal","closeVisible","push","indexOf","splice","keyDownHandler","addEventListener","removeEventListener","createPortal","closeButton","content","Spinner","stroke","center","radius","spinner","spinnerCenter","viewBox","cx","cy","r","strokeWidth","ADD_CONSTRUCTOR_INGREDIENT","REMOVE_CONSTRUCTOR_INGREDIENT","REORDER_CONSTRUCTOR_INGREDIENTS","CLEAR_CONSTRUCTOR","DragElement","onDelete","isHoverTop","setHoverTop","isTransition","setTransition","element","opacity","collect","monitor","isDrag","isDragging","dragTargetRef","useDrop","accept","drop","hoverIndex","dropIndex","hover","clientRect","offset","getSourceClientOffset","y","isOver","didDrop","dropTargetRef","prevIsDrag","overLeave","dragLeave","display","paddingBottom","paddingTop","transitionDuration","dragItem","text","thumbnail","handleClose","CHECKOUT_ORDER_REQUEST","CHECKOUT_ORDER_SUCCESS","CHECKOUT_ORDER_ERROR","CLEAR_ORDER","BurgerConstructor","isOrderShown","setOrderShown","totalPrice","order","number","orderLoading","checkoutRequest","orderError","checkoutErrorMessage","elementOnDelete","useCallback","zIndex","then","orderModalOnClose","canDrop","dropIngredientsRef","listRef","bottomBunRef","footerRef","history","useHistory","elements","dragMessage","dragMessageOver","isLocked","elementsScroll","footer","getState","ids","HomePage","DndProvider","backend","HTML5Backend","PasswordInput","isValueHidden","setValueHidden","inputRef","handleIconClick","pos","selectionStart","setTimeout","focus","setSelectionRange","icon","onIconClick","emailRegExp","validationRules","required","email","test","String","toLowerCase","minLength","param","validate","rules","ruleName","ruleParam","validateAll","values","errors","keys","useFormSubmit","onSubmit","setValues","validation","setValidation","setData","setError","setLoading","prevDataRef","rulesRef","handleChange","handleSubmit","preventDefault","some","dataChanged","onChange","errorText","GET_USER_REQUEST","GET_USER_SUCCESS","GET_USER_ERROR","SET_USER","CLEAR_USER","useAuth","userRequest","userSuccess","userErrorMessage","userLoaded","signIn","signOut","LoginPage","from","placeholder","disabled","RegisterPage","callRegister","ForgotPasswordPage","ResetPasswordPage","ViewInput","setValue","isEditMode","setEditMode","iconClick","onBlur","ProfileForm","footerVisible","createSetValue","form","formFooter","IngredientAvatar","ingredientImage","ingredientFg","WS_FEED_CONNECTION_START","WS_FEED_CONNECTION_CLOSE","WS_FEED_CONNECTION_SUCCESS","WS_FEED_CONNECTION_CLOSED","WS_FEED_CONNECTION_ERROR","WS_FEED_GET_MESSAGE","WS_PROFILE_CONNECTION_START","WS_PROFILE_CONNECTION_CLOSE","WS_PROFILE_CONNECTION_SUCCESS","WS_PROFILE_CONNECTION_CLOSED","WS_PROFILE_CONNECTION_ERROR","WS_PROFILE_GET_MESSAGE","useIngredientsMap","getFullOrder","ingredientsMap","result","found","find","total","statusMap","created","pending","done","canceled","translateStatus","useOrders","ordersList","useOrderLoad","serverOrder","setServerOrder","setOrder","setOrderLoading","setOrderError","ingredientsError","ingredientsLoading","loadOrderById","catch","err","finally","Ingredients","list","slice","rest","OrderItem","useRouteMatch","createdAt","statusDone","Menu","menu","exact","menuItem","activeClassName","menuItemActive","menuFooter","Logout","logoutError","setLogoutError","OrderList","orderListRef","profile","ordersError","wsError","sort","b","useProfileOrders","orderList","skeletonOrder","ProfilePage","StatisticGridItem","complete","statisticGridItem","statisticGridItemList","FeedPage","statisticRef","feed","totalToday","completeNumbers","progressNumbers","useFeedOrders","statistic","statisticGrid","textSpaceShadow","ingredientName","OrderInfo","OrderPage","useParams","IngredientDetails","imageLoading","isLoading","loadImage","img","Image","reject","onload","onerror","useImageLoading","image_large","imagePreloader","calories","proteins","fat","carbohydrates","IngredientPage","NotFound404","textAlign","HeaderItem","Icon","text_color_inactive","AppHeader","contentItem","navigation","BurgerIcon","ListIcon","contentItemCenter","contentItemRight","ProfileIcon","ProtectedRoute","render","UnauthorizedRoute","IngredientDetailsModal","modalOnClose","goBack","OrderInfoModal","feedOrders","profileOrders","startsWith","Number","App","customPath","URLSearchParams","search","get","customLocation","action","app","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ingredientsState","itemsSuccess","countTotalPrice","prev","constructorState","orderState","checkoutSuccess","userState","initialState","wsConnected","rootReducer","combineReducers","dropItem","payload","socketMiddleware","wsUrl","wsActions","useToken","socket","next","wsInit","wsClose","wsSendMessage","onOpen","onError","onMessage","WebSocket","onopen","event","onmessage","parsedData","parse","restParsedData","close","onclose","send","wsFeedOrders","actions","wsProfileOrders","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","applyMiddleware","thunk","createStore","ReactDOM","StrictMode","basename"],"mappings":"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","file":"static/js/main.c7612889.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"header-item_container__30Hxa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"profile_container__1xtr-\",\"menu\":\"profile_menu__2oLpp\",\"menuItem\":\"profile_menuItem__dREgH\",\"menuItemActive\":\"profile_menuItemActive__3siZt\",\"menuFooter\":\"profile_menuFooter__2TKWt\",\"orderList\":\"profile_orderList__1g7Li\",\"error\":\"profile_error__Gh-Jf\",\"skeletonOrder\":\"profile_skeletonOrder__2FHGE\"};","import {\r\n  TypedUseSelectorHook,\r\n  useDispatch as dispatchHook,\r\n  useSelector as selectorHook,\r\n} from \"react-redux\";\r\nimport { AppDispatch, RootState, AppThunk } from \"./types\";\r\n\r\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\r\nexport const useSelector: TypedUseSelectorHook<RootState> = selectorHook;\r\n","import styles from \"./ingredient.module.css\";\r\n\r\nimport { memo } from \"react\";\r\nimport cn from \"classnames\";\r\nimport {\r\n  Counter,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDrag } from \"react-dnd\";\r\nimport { IIngredient } from \"../../../services/types/data\";\r\n\r\ninterface IIngredientProps {\r\n  className?: string;\r\n  onClick?: (e: React.MouseEvent, item: IIngredient) => void;\r\n  item: IIngredient;\r\n  count?: number;\r\n}\r\n\r\nconst Ingredient: React.FC<IIngredientProps> = memo(\r\n  ({ className, item, count = 0, onClick = () => {} }) => {\r\n    const { name, price, image } = item;\r\n    const handleClick = (e: React.MouseEvent) => onClick(e, item);\r\n    const [, dragRef] = useDrag({\r\n      type: \"ingredient\",\r\n      item,\r\n    });\r\n    return (\r\n      <section\r\n        className={cn(styles.container, className)}\r\n        onClick={handleClick}\r\n        ref={dragRef}\r\n        data-test-id={`ingredient-${item._id}`}\r\n      >\r\n        {count > 0 && <Counter count={count} size=\"default\" />}\r\n        <img src={image} width={240} height={120} className=\"mb-1\" alt={name} />\r\n        <p className={cn(styles.price, \"text text_type_digits-default mb-1\")}>\r\n          <span className=\"mr-2\">{price}</span>\r\n          <CurrencyIcon type=\"primary\" />\r\n        </p>\r\n        <p className={cn(styles.title, \"text text_type_main-default\")}>\r\n          {name}\r\n        </p>\r\n      </section>\r\n    );\r\n  }\r\n);\r\n\r\nexport default Ingredient;\r\n","import cn from \"classnames\";\r\n\r\nimport styles from \"./skeleton.module.css\";\r\n\r\ninterface ISkeletonProps {\r\n  width?: number | string;\r\n  height?: number | string;\r\n  className?: string;\r\n  circle?: boolean;\r\n  repeat?: number;\r\n  tag?: keyof JSX.IntrinsicElements;\r\n}\r\n\r\nconst Skeleton: React.FC<ISkeletonProps> = ({\r\n  width,\r\n  height,\r\n  className,\r\n  circle = false,\r\n  repeat = 1,\r\n  tag: Tag = \"div\",\r\n}) => {\r\n  const style = {\r\n    ...(width ? { width } : {}),\r\n    ...(circle ? { height: width } : {}),\r\n    ...(height ? { height } : {}),\r\n  };\r\n\r\n  const classNameTotal = cn(styles.skeleton, className, {\r\n    [styles.circle]: circle,\r\n  });\r\n\r\n  if (repeat > 1) {\r\n    return (\r\n      <>\r\n        {Array(repeat)\r\n          .fill(null)\r\n          .map((item, index) => (\r\n            <Tag key={index} className={classNameTotal} style={{ ...style }}>\r\n              &nbsp;\r\n            </Tag>\r\n          ))}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Tag className={classNameTotal} style={{ ...style }}>\r\n      &nbsp;\r\n    </Tag>\r\n  );\r\n};\r\n\r\nexport default Skeleton;\r\n","import { useEffect, useRef } from \"react\";\r\n\r\nexport function getCookie(name: string) {\r\n  const matches = document.cookie.match(\r\n    new RegExp(\r\n      \"(?:^|; )\" + name.replace(/([.$?*|{}()[]\\\\\\/+^])/g, \"\\\\$1\") + \"=([^;]*)\"\r\n    )\r\n  );\r\n  return matches ? decodeURIComponent(matches[1]) : undefined;\r\n}\r\n\r\nexport function setCookie(\r\n  name: string,\r\n  value: string,\r\n  props: {\r\n    expires?: number | Date | string;\r\n    path?: string;\r\n  } = {}\r\n) {\r\n  let exp = props.expires;\r\n  if (typeof exp == \"number\" && exp) {\r\n    const d = new Date();\r\n    d.setTime(d.getTime() + exp * 1000);\r\n    exp = props.expires = d;\r\n  }\r\n  if (exp && exp instanceof Date) {\r\n    props.expires = exp.toUTCString();\r\n  }\r\n  props.path = \"/\";\r\n  value = encodeURIComponent(value);\r\n  let updatedCookie = name + \"=\" + value;\r\n  for (const propName in props) {\r\n    updatedCookie += \"; \" + propName;\r\n    const propValue = (props as { [key: string]: string | boolean })[propName];\r\n    if (propValue !== true) {\r\n      updatedCookie += \"=\" + propValue;\r\n    }\r\n  }\r\n  document.cookie = updatedCookie;\r\n}\r\n\r\nexport function deleteCookie(name: string) {\r\n  setCookie(name, \"\", { expires: -1 });\r\n}\r\n\r\nexport function isEqual(obj1: any, obj2: any) {\r\n  // Цикл через свойства объекта obj1\r\n  for (const p in obj1) {\r\n    //Проверка на то, что оба объекта существуют\r\n    if (obj1.hasOwnProperty(p) !== obj2.hasOwnProperty(p)) return false;\r\n\r\n    switch (typeof obj1[p]) {\r\n      // Глубокое сравнение объектов по ключам и значения:\r\n      case \"object\":\r\n        if (!isEqual(obj1[p], obj2[p])) return false;\r\n        break;\r\n      // Сравнение данных типа function:\r\n      case \"function\":\r\n        if (\r\n          typeof obj2[p] == \"undefined\" ||\r\n          (p !== \"compare\" && obj1[p].toString() !== obj2[p].toString())\r\n        )\r\n          return false;\r\n        break;\r\n      // Сравнение значений:\r\n      default:\r\n        if (obj1[p] !== obj2[p]) return false;\r\n    }\r\n  }\r\n\r\n  // Проверка объекта obj2 на дополнительные свойства:\r\n  for (const p in obj2) {\r\n    if (typeof obj1[p] == \"undefined\") return false;\r\n  }\r\n  return true;\r\n}\r\n\r\n/**\r\n * Склонение существительного с числом\r\n * @param {*} n число\r\n * @param {Array} text_forms существительной в формате [один, два, пять]\r\n * @returns\r\n */\r\nfunction declensionOfNum(n: number, text_forms: [string, string, string]) {\r\n  n = Math.abs(n) % 100;\r\n  var n1 = n % 10;\r\n  if (n > 10 && n < 20) {\r\n    return text_forms[2];\r\n  }\r\n  if (n1 > 1 && n1 < 5) {\r\n    return text_forms[1];\r\n  }\r\n  if (n1 === 1) {\r\n    return text_forms[0];\r\n  }\r\n  return text_forms[2];\r\n}\r\n\r\nexport function formatPastDate(dateStr: string) {\r\n  const today = new Date();\r\n  today.setHours(0);\r\n  today.setMinutes(0);\r\n  today.setSeconds(0);\r\n\r\n  const date = new Date(dateStr);\r\n  const timezone = date.getHours() - date.getUTCHours();\r\n  const hours = date.getHours().toString().padStart(2, \"0\");\r\n  const minutes = date.getMinutes().toString().padStart(2, \"0\");\r\n\r\n  let past = \"\";\r\n\r\n  if (date.getTime() > today.getTime() + 24 * 3600 * 1000) {\r\n    past = date.toLocaleDateString();\r\n  } else if (date > today) {\r\n    past = \"Сегодня\";\r\n  } else if (date.getTime() > today.getTime() - 24 * 3600 * 1000) {\r\n    past = \"Вчера\";\r\n  } else {\r\n    const days = Math.ceil(\r\n      (today.getTime() - date.getTime()) / (24 * 3600 * 1000)\r\n    );\r\n    past = `${days} ${declensionOfNum(days, [\"день\", \"дня\", \"дней\"])} назад`;\r\n  }\r\n\r\n  return `${past}, ${hours}:${minutes} i-GMT${\r\n    timezone > 0 ? \"+\" : \"\"\r\n  }${timezone}`;\r\n}\r\n\r\nexport const timingFunctions = {\r\n  linear(k: number) {\r\n    return k;\r\n  },\r\n  easeIn(k: number) {\r\n    return Math.pow(k, 1.675);\r\n  },\r\n  easeOut(k: number) {\r\n    return 1 - Math.pow(1 - k, 1.675);\r\n  },\r\n  easeInOut(k: number) {\r\n    return 0.5 * (Math.sin((k - 0.5) * Math.PI) + 1);\r\n  },\r\n};\r\n\r\ninterface IAnimateProps {\r\n  timing?: keyof typeof timingFunctions;\r\n  draw: (step: number) => void;\r\n  duration: number;\r\n}\r\n\r\nexport function animate({\r\n  timing = \"easeInOut\",\r\n  draw,\r\n  duration,\r\n}: IAnimateProps) {\r\n  const start = performance.now();\r\n  const timingFunc = timingFunctions[timing];\r\n\r\n  return new Promise((resolve) => {\r\n    requestAnimationFrame(function animate(time) {\r\n      // timeFraction изменяется от 0 до 1\r\n      let timeFraction = (time - start) / duration;\r\n      if (timeFraction > 1) timeFraction = 1;\r\n      if (timeFraction < 0) timeFraction = 0;\r\n\r\n      // вычисление текущего состояния анимации\r\n      const progress = timingFunc(timeFraction);\r\n\r\n      draw(progress); // отрисовать её\r\n\r\n      if (timeFraction < 1) {\r\n        requestAnimationFrame(animate);\r\n      } else {\r\n        resolve(true);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n// Хук: получаем предыдущее значение пропса или состояния\r\nexport function usePrevious(value: any) {\r\n  const ref = useRef();\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]);\r\n  return ref.current;\r\n}\r\n","import { RefObject, useLayoutEffect } from \"react\";\r\nimport appStyles from \"../components/app/app.module.css\";\r\n\r\ninterface IUseScrollbarExtraParams {\r\n  exclude?: RefObject<HTMLElement> | RefObject<HTMLElement>[];\r\n  props?: any[];\r\n  maxHeight?: number;\r\n  isInModal?: boolean;\r\n}\r\n\r\nexport function useScrollbar(\r\n  ref: RefObject<HTMLElement>,\r\n  {\r\n    exclude = [],\r\n    props = [],\r\n    maxHeight,\r\n    isInModal,\r\n  }: IUseScrollbarExtraParams = {}\r\n) {\r\n  let arrExclude: RefObject<HTMLElement>[];\r\n\r\n  if (exclude instanceof Array) {\r\n    arrExclude = exclude;\r\n  } else {\r\n    arrExclude = [exclude];\r\n  }\r\n\r\n  useLayoutEffect(() => {\r\n    const el = ref.current;\r\n\r\n    if (!el) return;\r\n\r\n    const bottom = arrExclude.reduce((acc, ref) => {\r\n      const el = ref.current;\r\n      if (!el) return acc;\r\n      const style = getComputedStyle(el);\r\n\r\n      return (\r\n        acc +\r\n        el.offsetHeight +\r\n        parseInt(style.marginTop) +\r\n        parseInt(style.marginBottom)\r\n      );\r\n    }, 0);\r\n    const modalFix = isInModal ? \"(5vh + 41px)\" : \"0px\";\r\n    const { top } = el.getBoundingClientRect();\r\n    const aroundSpace = `(${modalFix} + ${Math.ceil(top + bottom)}px)`;\r\n    if (maxHeight) {\r\n      el.style.maxHeight = `calc(min(100vh - ${aroundSpace}, \r\n      ${maxHeight}px))`;\r\n    } else {\r\n      el.style.maxHeight = `calc(100vh - ${aroundSpace})`;\r\n    }\r\n    el.classList.add(appStyles.customScrollbar);\r\n\r\n    return () => {\r\n      el.classList.remove(appStyles.customScrollbar);\r\n      el.style.maxHeight = \"\";\r\n    };\r\n  }, [ref, maxHeight, isInModal, arrExclude, ...props]);\r\n}\r\n","import { IIngredient, IOrder, IUser } from \"./types/data\";\r\nimport { getCookie, setCookie, deleteCookie } from \"./utils\";\r\n\r\ninterface IDataResponse {\r\n  success: boolean;\r\n  message?: string;\r\n}\r\n\r\nconst API_URL = \"https://norma.nomoreparties.space/api\";\r\nexport const routes = {\r\n  ingredients: `${API_URL}/ingredients`,\r\n  orders: `${API_URL}/orders`,\r\n  auth: {\r\n    login: `${API_URL}/auth/login`,\r\n    register: `${API_URL}/auth/register`,\r\n    logout: `${API_URL}/auth/logout`,\r\n    token: `${API_URL}/auth/token`,\r\n    user: `${API_URL}/auth/user`,\r\n  },\r\n  password: {\r\n    resetCheck: `${API_URL}/password-reset`,\r\n    reset: `${API_URL}/password-reset/reset`,\r\n  },\r\n};\r\n\r\nfunction translate(msg?: string) {\r\n  switch (msg) {\r\n    case \"email or password are incorrect\":\r\n      return \"Введены неверные Email или пароль\";\r\n    case \"Incorrect reset token\":\r\n      return \"Неверный токен для сброса пароля\";\r\n    default:\r\n      return msg;\r\n  }\r\n}\r\n\r\nasync function checkResponse<IData = object>(res: Response) {\r\n  let json: (IDataResponse & IData) | null = null;\r\n  try {\r\n    json = await res.json();\r\n  } catch (ex) {}\r\n\r\n  if (json && !json.success) {\r\n    json.message = translate(json.message);\r\n    throw json;\r\n  }\r\n\r\n  if (!res.ok) {\r\n    throw new Error(`Статус: ${res.status}`);\r\n  }\r\n\r\n  if (!json) {\r\n    throw new Error(`Ошибка парсинга ответа`);\r\n  }\r\n\r\n  return json;\r\n}\r\n\r\nasync function fetchPost<IData>(url: string, params: object) {\r\n  const res = await fetch(url, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(params),\r\n  });\r\n\r\n  return checkResponse<IData>(res);\r\n}\r\n\r\nfunction setTokens({\r\n  accessToken,\r\n  refreshToken,\r\n}: {\r\n  accessToken: string;\r\n  refreshToken: string;\r\n}) {\r\n  if (accessToken) {\r\n    accessToken = accessToken.split(\"Bearer \")[1];\r\n    setCookie(\"accessToken\", accessToken);\r\n  }\r\n  localStorage.setItem(\"refreshToken\", refreshToken);\r\n}\r\n\r\nexport async function refreshToken() {\r\n  const data = await fetchPost<{\r\n    accessToken: string;\r\n    refreshToken: string;\r\n  }>(routes.auth.token, {\r\n    token: localStorage.getItem(\"refreshToken\"),\r\n  });\r\n  setTokens(data);\r\n  return data;\r\n}\r\n\r\nasync function fetchWithRefresh<IData>(\r\n  url: string,\r\n  { params = {}, method = \"GET\" } = {}\r\n): Promise<IData> {\r\n  try {\r\n    const options: RequestInit = {\r\n      method,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + getCookie(\"accessToken\"),\r\n      },\r\n    };\r\n    if (method !== \"GET\") {\r\n      options.body = JSON.stringify(params);\r\n    }\r\n\r\n    const res = await fetch(url, options);\r\n    return await checkResponse<IData>(res);\r\n  } catch (err) {\r\n    if (err.message === \"jwt expired\") {\r\n      await refreshToken();\r\n      return fetchWithRefresh<IData>(url, { params, method });\r\n    } else {\r\n      throw err;\r\n    }\r\n  }\r\n}\r\n\r\nexport async function loadIngredients() {\r\n  const res = await fetch(routes.ingredients);\r\n  const json = await checkResponse<{ data: IIngredient[] }>(res);\r\n  return json.data;\r\n}\r\n\r\nexport async function checkoutOrder(items: string[] = []) {\r\n  return await fetchWithRefresh<{ order: IOrder }>(routes.orders, {\r\n    method: \"POST\",\r\n    params: { ingredients: items },\r\n  });\r\n}\r\n\r\nexport async function login(params: { email: string; password: string }) {\r\n  const data = await fetchPost<{\r\n    refreshToken: string;\r\n    accessToken: string;\r\n    user: IUser;\r\n  }>(routes.auth.login, params);\r\n  setTokens(data);\r\n  return data;\r\n}\r\n\r\nexport async function logout() {\r\n  const data = await fetchPost(routes.auth.logout, {\r\n    token: localStorage.getItem(\"refreshToken\"),\r\n  });\r\n  deleteCookie(\"accessToken\");\r\n  localStorage.removeItem(\"refreshToken\");\r\n  return data;\r\n}\r\n\r\nexport async function register(params: {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n}) {\r\n  return await fetchPost(routes.auth.register, params);\r\n}\r\n\r\nexport async function checkResetPassword(params: { email: string }) {\r\n  return await fetchPost(routes.password.resetCheck, params);\r\n}\r\n\r\nexport async function resetPassword(params: {\r\n  password: string;\r\n  token: string;\r\n}) {\r\n  return await fetchPost(routes.password.reset, params);\r\n}\r\n\r\nexport async function loadUser() {\r\n  return await fetchWithRefresh<{ user: IUser }>(routes.auth.user);\r\n}\r\n\r\nexport async function updateUser(params: {\r\n  email: string;\r\n  password: string;\r\n  name: string;\r\n}) {\r\n  return await fetchWithRefresh<{ user: IUser }>(routes.auth.user, {\r\n    method: \"PATCH\",\r\n    params,\r\n  });\r\n}\r\n\r\nexport async function loadOrderById(id: string) {\r\n  const res = await fetch(`${routes.orders}/${id}`);\r\n  const json = await checkResponse<{ orders: IOrder[] }>(res);\r\n  return json.orders[0];\r\n}\r\n","import { loadIngredients } from \"../api\";\r\nimport { AppDispatch, AppThunk } from \"../types\";\r\nimport { IIngredient } from \"../types/data\";\r\n\r\nexport const GET_INGREDIENTS_REQUEST: \"GET_INGREDIENTS_REQUEST\" =\r\n  \"GET_INGREDIENTS_REQUEST\";\r\nexport const GET_INGREDIENTS_SUCCESS: \"GET_INGREDIENTS_SUCCESS\" =\r\n  \"GET_INGREDIENTS_SUCCESS\";\r\nexport const GET_INGREDIENTS_ERROR: \"GET_INGREDIENTS_ERROR\" =\r\n  \"GET_INGREDIENTS_ERROR\";\r\n\r\nexport type IGetIngredientsRequestAction = {\r\n  readonly type: typeof GET_INGREDIENTS_REQUEST;\r\n};\r\n\r\nexport interface IGetIngredientsSuccessAction {\r\n  readonly type: typeof GET_INGREDIENTS_SUCCESS;\r\n  readonly items: IIngredient[];\r\n}\r\n\r\nexport interface IGetIngredientsErrorAction {\r\n  readonly type: typeof GET_INGREDIENTS_ERROR;\r\n  readonly message: string;\r\n}\r\n\r\nexport type TIngredientsActions =\r\n  | IGetIngredientsRequestAction\r\n  | IGetIngredientsSuccessAction\r\n  | IGetIngredientsErrorAction;\r\n\r\nexport const getIngredients: AppThunk = () => async (dispatch: AppDispatch) => {\r\n  dispatch({\r\n    type: GET_INGREDIENTS_REQUEST,\r\n  });\r\n  try {\r\n    const items = await loadIngredients();\r\n    dispatch({\r\n      type: GET_INGREDIENTS_SUCCESS,\r\n      items,\r\n    });\r\n  } catch (err) {\r\n    dispatch({\r\n      type: GET_INGREDIENTS_ERROR,\r\n      message: err.message,\r\n    });\r\n  }\r\n};\r\n","import styles from \"./burger-ingredients.module.css\";\r\n\r\nimport { useState, useRef, useEffect, useLayoutEffect, useMemo } from \"react\";\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport { useLocation, Link } from \"react-router-dom\";\r\nimport cn from \"classnames\";\r\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport Ingredient from \"./ingredient/ingredient\";\r\nimport Skeleton from \"../skeleton/skeleton\";\r\nimport { animate } from \"../../services/utils\";\r\nimport { useScrollbar } from \"../../services/scrollbar\";\r\n\r\nimport { getIngredients } from \"../../services/actions/ingredients\";\r\n\r\nconst GROUP_NAME = {\r\n  bun: \"Булки\",\r\n  sauce: \"Соусы\",\r\n  main: \"Начинки\",\r\n};\r\n\r\nconst BurgerIngredients: React.FC = () => {\r\n  const [currentTab, setCurrentTab] = useState(\"bun\");\r\n\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  const {\r\n    items: ingredients,\r\n    itemsErrorMessage: error,\r\n    itemsRequest: loading,\r\n  } = useSelector((store) => store.ingredients);\r\n\r\n  const { items: constructorItems, bunItem } = useSelector(\r\n    (store) => store.construct\r\n  );\r\n\r\n  const ingredientsRef = useRef<HTMLUListElement>(null);\r\n  useScrollbar(ingredientsRef);\r\n\r\n  const counterMap = useMemo(\r\n    () =>\r\n      ingredients.reduce((map: { [key: string]: number }, item) => {\r\n        if (bunItem && item._id === bunItem._id) {\r\n          map[item._id] = 2;\r\n          return map;\r\n        }\r\n\r\n        map[item._id] = constructorItems.filter(\r\n          ({ _id }) => _id === item._id\r\n        ).length;\r\n        return map;\r\n      }, {}),\r\n    [ingredients, constructorItems, bunItem]\r\n  );\r\n\r\n  useLayoutEffect(() => {\r\n    if (ingredients.length === 0) {\r\n      dispatch(getIngredients());\r\n    }\r\n  }, [dispatch, ingredients.length]);\r\n\r\n  const scrollToTabSection = (tab: string) => {\r\n    const el = ingredientsRef.current;\r\n\r\n    if (!el) {\r\n      return;\r\n    }\r\n\r\n    const section: HTMLElement | null = el.querySelector(\r\n      `[data-group=\"${tab}\"]`\r\n    );\r\n    const startScroll = el.scrollTop;\r\n    const endScroll = section?.offsetTop || 0;\r\n\r\n    animate({\r\n      draw(progress) {\r\n        el.scrollTop = startScroll + (endScroll - startScroll) * progress;\r\n      },\r\n      duration: 400,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const root = ingredientsRef.current;\r\n    if (!root) {\r\n      return;\r\n    }\r\n    const height = root.offsetHeight;\r\n    const observer = new IntersectionObserver(\r\n      (entries, observer) => {\r\n        entries.forEach((entry) => {\r\n          // если элемент является наблюдаемым\r\n          if (entry.isIntersecting) {\r\n            const section = entry.target as HTMLElement;\r\n            setCurrentTab(section.dataset.group || \"bun\");\r\n          }\r\n        });\r\n      },\r\n      {\r\n        root,\r\n        rootMargin: `-130px 0px ${130 - height}px 0px`,\r\n      }\r\n    );\r\n\r\n    const sections = root.querySelectorAll(\"[data-group]\");\r\n    sections.forEach((section) => observer.observe(section));\r\n\r\n    return () => sections.forEach((section) => observer.unobserve(section));\r\n  }, [ingredients]);\r\n\r\n  const skeleton = useMemo(\r\n    () => (\r\n      <ul\r\n        className={cn(styles.ingredients, \"mt-10\")}\r\n        data-test-id=\"ingredients-skeleton\"\r\n      >\r\n        <li>\r\n          <Skeleton width={100} className=\"text text_type_main-medium\" />\r\n          <div className={cn(styles.ingredientList, \"pl-4 pr-4 pt-6 pb-2\")}>\r\n            <Skeleton\r\n              height={200}\r\n              repeat={2}\r\n              className={cn(styles.ingredient, \"mb-8 mt-4\")}\r\n            />\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    ),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <section className={cn(styles.container, \"mr-10\")}>\r\n      <h1 className=\"text text_type_main-large text mt-10 mb-5\">\r\n        Соберите бургер\r\n      </h1>\r\n      <section className={styles.tabs}>\r\n        {Object.entries(GROUP_NAME).map(([key, value]) => {\r\n          return (\r\n            <Tab\r\n              key={key}\r\n              value={key}\r\n              active={key === currentTab}\r\n              onClick={() => scrollToTabSection(key)}\r\n            >\r\n              {value}\r\n            </Tab>\r\n          );\r\n        })}\r\n      </section>\r\n      {error && (\r\n        <p className={cn(styles.error, \"text text_type_main-default mt-15\")}>\r\n          Что-то пошло не так. Попробуйте зайти еще раз позже. {error}\r\n        </p>\r\n      )}\r\n      {loading && skeleton}\r\n      <ul className={cn(styles.ingredients, \"mt-10\")} ref={ingredientsRef}>\r\n        {useMemo(\r\n          () =>\r\n            ingredients.length > 0 &&\r\n            Object.entries(GROUP_NAME).map(([key, value]) => {\r\n              return (\r\n                <li key={key} data-group={key}>\r\n                  <h2 className=\"text text_type_main-medium\">{value}</h2>\r\n                  <ul\r\n                    className={cn(styles.ingredientList, \"pl-4 pr-4 pt-6 pb-2\")}\r\n                  >\r\n                    {ingredients\r\n                      .filter(({ type }) => type === key)\r\n                      .map((item, index) => {\r\n                        return (\r\n                          <li\r\n                            className={cn(styles.ingredient, \"mb-8\")}\r\n                            key={item._id}\r\n                          >\r\n                            <Link\r\n                              to={{\r\n                                pathname: `/ingredients/${item._id}`,\r\n                                state: { background: location },\r\n                              }}\r\n                            >\r\n                              <Ingredient\r\n                                count={counterMap[item._id]}\r\n                                item={item}\r\n                              />\r\n                            </Link>\r\n                          </li>\r\n                        );\r\n                      })}\r\n                  </ul>\r\n                </li>\r\n              );\r\n            }),\r\n          [location, ingredients, counterMap]\r\n        )}\r\n      </ul>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerIngredients;\r\n","export default __webpack_public_path__ + \"static/media/done.fb9f8534.svg\";","import cn from \"classnames\";\r\nimport statusIcon from \"../../images/done.svg\";\r\n\r\nimport styles from \"./order-details.module.css\";\r\n\r\ninterface IOrderDetailsProps {\r\n  orderNumber: number;\r\n}\r\n\r\nconst OrderDetails: React.FC<IOrderDetailsProps> = ({ orderNumber }) => {\r\n  return (\r\n    <div className={cn(styles.container, \"pl-15 pr-15 pb-20\")}>\r\n      <h1 className={cn(styles.title, \"text text_type_digits-large mt-4 mb-8\")}>\r\n        {orderNumber}\r\n      </h1>\r\n      <p className=\"text text_type_main-medium mb-15\">Идентификатор заказа</p>\r\n      <img\r\n        width=\"120\"\r\n        height=\"120\"\r\n        src={statusIcon}\r\n        alt=\"Заказ зарегистрирован\"\r\n      />\r\n      <p className=\"text text_type_main-default mt-15 mb-2\">\r\n        Ваш заказ начали готовить\r\n      </p>\r\n      <p className=\"text text_type_main-default text_color_inactive\">\r\n        Дождитесь готовности на орбитальной станции\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderDetails;\r\n","import cn from \"classnames\";\r\nimport styles from \"./modal-overlay.module.css\";\r\n\r\ninterface IModalOverlayProps {\r\n  visible?: boolean;\r\n  onClose?: () => void;\r\n}\r\n\r\nconst ModalOverlay: React.FC<IModalOverlayProps> = ({\r\n  visible = false,\r\n  onClose = () => {},\r\n}) => {\r\n  return (\r\n    <div\r\n      className={cn(styles.container, { [styles.hidden]: !visible })}\r\n      onClick={onClose}\r\n    ></div>\r\n  );\r\n};\r\n\r\nexport default ModalOverlay;\r\n","import { useEffect, useRef, memo, ReactNode } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport cn from \"classnames\";\r\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport styles from \"./modal.module.css\";\r\n\r\nimport ModalOverlay from \"../modal-overlay/modal-overlay\";\r\n\r\nconst modalRoot = document.getElementById(\"react-modals\") as HTMLElement;\r\nconst ESC_KEY = \"Escape\";\r\n\r\nconst visibleModals: React.MutableRefObject<undefined>[] = [];\r\n\r\ninterface IModalProps {\r\n  children: ReactNode;\r\n  header?: ReactNode;\r\n  visible?: boolean;\r\n  onClose?: () => void;\r\n}\r\nconst Modal: React.FC<IModalProps> = memo(\r\n  ({ children, header = \"\", visible = false, onClose }) => {\r\n    const modal = useRef();\r\n    const closeVisible = !!onClose;\r\n\r\n    useEffect(() => {\r\n      if (visible) {\r\n        visibleModals.push(modal);\r\n      } else {\r\n        const index = visibleModals.indexOf(modal);\r\n        visibleModals.splice(index, 1);\r\n      }\r\n    }, [visible]);\r\n\r\n    // Если открыто несколько модальных окон, закрываем по ESC только самое верхнее\r\n    useEffect(() => {\r\n      const keyDownHandler = (e: KeyboardEvent) => {\r\n        if (\r\n          e.key === ESC_KEY &&\r\n          visibleModals[visibleModals.length - 1] === modal &&\r\n          onClose\r\n        ) {\r\n          onClose();\r\n        }\r\n      };\r\n\r\n      if (visible) {\r\n        document.addEventListener(\"keydown\", keyDownHandler);\r\n      }\r\n\r\n      return () => {\r\n        document.removeEventListener(\"keydown\", keyDownHandler);\r\n      };\r\n    }, [onClose, visible]);\r\n\r\n    return createPortal(\r\n      <>\r\n        <ModalOverlay visible={visible} onClose={onClose} />\r\n        <div\r\n          className={cn(styles.container, \"pt-10 pl-10 pr-10 pb-10\", {\r\n            [styles.hidden]: !visible,\r\n          })}\r\n        >\r\n          <h1 className={cn(styles.title, \"text text_type_main-large pr-7\")}>\r\n            {header}\r\n          </h1>\r\n          {closeVisible && (\r\n            <div className={styles.closeButton}>\r\n              <CloseIcon type=\"primary\" onClick={onClose} />\r\n            </div>\r\n          )}\r\n          <section className={cn(styles.content)}>{children}</section>\r\n        </div>\r\n      </>,\r\n      modalRoot\r\n    );\r\n  }\r\n);\r\n\r\nexport default Modal;\r\n","import cn from \"classnames\";\r\n\r\nimport styles from \"./spinner.module.css\";\r\n\r\ninterface ISpinnerProps {\r\n  size?: number;\r\n  stroke?: number;\r\n  className?: string;\r\n  center?: boolean;\r\n}\r\n\r\nconst Spinner: React.FC<ISpinnerProps> = ({\r\n  size = 50,\r\n  stroke = 3,\r\n  className,\r\n  center = false,\r\n}) => {\r\n  const radius = 0.4 * size;\r\n\r\n  return (\r\n    <svg\r\n      className={cn(\r\n        styles.spinner,\r\n        { [styles.spinnerCenter]: center },\r\n        className\r\n      )}\r\n      style={{ width: size, height: size }}\r\n      viewBox={`0 0 ${size} ${size}`}\r\n    >\r\n      <circle\r\n        className={styles.circle}\r\n        cx={size / 2}\r\n        cy={size / 2}\r\n        r={radius}\r\n        fill=\"none\"\r\n        strokeWidth={stroke}\r\n      ></circle>\r\n    </svg>\r\n  );\r\n};\r\n\r\nexport default Spinner;\r\n","import { IIngredient, IConstructorIngredient } from \"../types/data\";\r\n\r\nexport const ADD_CONSTRUCTOR_INGREDIENT: \"ADD_CONSTRUCTOR_INGREDIENT\" =\r\n  \"ADD_CONSTRUCTOR_INGREDIENT\";\r\nexport const REMOVE_CONSTRUCTOR_INGREDIENT: \"REMOVE_CONSTRUCTOR_INGREDIENT\" =\r\n  \"REMOVE_CONSTRUCTOR_INGREDIENT\";\r\nexport const REORDER_CONSTRUCTOR_INGREDIENTS: \"REORDER_CONSTRUCTOR_INGREDIENTS\" =\r\n  \"REORDER_CONSTRUCTOR_INGREDIENTS\";\r\nexport const CLEAR_CONSTRUCTOR: \"CLEAR_CONSTRUCTOR\" = \"CLEAR_CONSTRUCTOR\";\r\n\r\nexport interface IAddConstructorIngredientAction {\r\n  readonly type: typeof ADD_CONSTRUCTOR_INGREDIENT;\r\n  readonly item: IIngredient;\r\n}\r\n\r\nexport interface IRemoveConstructorIngredientAction {\r\n  readonly type: typeof REMOVE_CONSTRUCTOR_INGREDIENT;\r\n  readonly item: IConstructorIngredient;\r\n}\r\n\r\nexport interface IReorderConstructorIngredientsAction {\r\n  readonly type: typeof REORDER_CONSTRUCTOR_INGREDIENTS;\r\n  readonly dropIndex: number;\r\n  readonly hoverIndex: number;\r\n}\r\n\r\nexport interface IClearConstructorAction {\r\n  readonly type: typeof CLEAR_CONSTRUCTOR;\r\n}\r\n\r\nexport type TConstructorActions =\r\n  | IAddConstructorIngredientAction\r\n  | IRemoveConstructorIngredientAction\r\n  | IReorderConstructorIngredientsAction\r\n  | IClearConstructorAction;\r\n","import { RefObject, useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport cn from \"classnames\";\r\nimport {\r\n  ConstructorElement,\r\n  DragIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDrag, useDrop } from \"react-dnd\";\r\n\r\nimport { REORDER_CONSTRUCTOR_INGREDIENTS } from \"../../../services/actions/constructor\";\r\nimport { animate, usePrevious } from \"../../../services/utils\";\r\nimport { IConstructorIngredient } from \"../../../services/types/data\";\r\n\r\nimport styles from \"./drag-element.module.css\";\r\n\r\ninterface IDragElementProps {\r\n  item: IConstructorIngredient;\r\n  index: number;\r\n  onDelete: (\r\n    item: IConstructorIngredient,\r\n    ref: RefObject<HTMLLIElement>\r\n  ) => void;\r\n}\r\n\r\nconst DragElement: React.FC<IDragElementProps> = ({\r\n  item,\r\n  index,\r\n  onDelete = () => {},\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const ref = useRef<HTMLLIElement>(null);\r\n  const [isHoverTop, setHoverTop] = useState(false);\r\n  const [isTransition, setTransition] = useState(false);\r\n\r\n  const element = ref.current?.querySelector(\".constructor-element\");\r\n\r\n  useEffect(() => {\r\n    const el = ref.current;\r\n    if (!el) {\r\n      return;\r\n    }\r\n    el.style.opacity = \"0\";\r\n    animate({\r\n      draw(progress) {\r\n        el.style.opacity = `${progress}`;\r\n      },\r\n      duration: 500,\r\n      timing: \"easeOut\",\r\n    });\r\n  }, []);\r\n\r\n  const [{ isDrag }, dragTargetRef] = useDrag({\r\n    type: \"constructorItem\",\r\n    item: () => {\r\n      return { id: item._id, index };\r\n    },\r\n    collect: (monitor) => ({\r\n      isDrag: monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  const [{ isOver, didDrop }, dropTargetRef] = useDrop({\r\n    accept: \"constructorItem\",\r\n    drop(item: { id: string; index: number }) {\r\n      const hoverIndex = index - (isHoverTop ? 1 : 0);\r\n      const dropIndex = item.index;\r\n      setTransition(false);\r\n\r\n      if (dropIndex === hoverIndex) {\r\n        return;\r\n      }\r\n\r\n      dispatch({\r\n        type: REORDER_CONSTRUCTOR_INGREDIENTS,\r\n        dropIndex,\r\n        hoverIndex,\r\n      });\r\n      item.index = hoverIndex;\r\n    },\r\n    hover(item, monitor) {\r\n      if (!element) return;\r\n      setTransition(true);\r\n      const clientRect = element.getBoundingClientRect();\r\n      const offset = monitor.getSourceClientOffset() || { y: 0 };\r\n      setHoverTop(offset.y <= clientRect.y);\r\n    },\r\n    collect: (monitor) => ({\r\n      isOver: monitor.isOver(),\r\n      didDrop: monitor.didDrop(),\r\n    }),\r\n  });\r\n\r\n  const prevIsDrag = usePrevious(isDrag);\r\n  const prevIsOver = usePrevious(isOver);\r\n\r\n  const overLeave = prevIsOver && !isOver;\r\n  const dragLeave = prevIsDrag && !isDrag;\r\n\r\n  const height = ref.current?.getBoundingClientRect().height || 0;\r\n\r\n  dragTargetRef(dropTargetRef(ref));\r\n\r\n  return (\r\n    <li\r\n      className={cn(styles.container, \"pb-4\")}\r\n      ref={ref}\r\n      style={{\r\n        opacity: isDrag ? 0 : 1,\r\n        display: dragLeave && didDrop ? \"none\" : \"\",\r\n        marginTop: isDrag && overLeave ? -height : 0,\r\n        paddingBottom: !isDrag && isOver && !isHoverTop ? 80 + 16 * 2 : 16,\r\n        paddingTop: !isDrag && isOver && isHoverTop ? 80 + 16 : 0,\r\n        transitionDuration: isTransition ? \"0.3s\" : \"0s\",\r\n      }}\r\n      data-test-id={`ctr-item-${item._id}`}\r\n    >\r\n      <i className={cn(styles.dragItem, \"mr-2\")}>\r\n        <DragIcon type=\"primary\" />\r\n      </i>\r\n      <ConstructorElement\r\n        text={item.name}\r\n        price={item.price}\r\n        thumbnail={item.image}\r\n        handleClose={() => onDelete(item, ref)}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nexport default DragElement;\r\n","import { checkoutOrder } from \"../api\";\r\nimport { AppDispatch, AppThunk } from \"../types\";\r\n\r\nexport const CHECKOUT_ORDER_REQUEST: \"CHECKOUT_ORDER_REQUEST\" =\r\n  \"CHECKOUT_ORDER_REQUEST\";\r\nexport const CHECKOUT_ORDER_SUCCESS: \"CHECKOUT_ORDER_SUCCESS\" =\r\n  \"CHECKOUT_ORDER_SUCCESS\";\r\nexport const CHECKOUT_ORDER_ERROR: \"CHECKOUT_ORDER_ERROR\" =\r\n  \"CHECKOUT_ORDER_ERROR\";\r\nexport const CLEAR_ORDER: \"CLEAR_ORDER\" = \"CLEAR_ORDER\";\r\n\r\nexport interface ICheckoutOrderRequestAction {\r\n  readonly type: typeof CHECKOUT_ORDER_REQUEST;\r\n}\r\n\r\nexport interface ICheckoutOrderSuccessAction {\r\n  readonly type: typeof CHECKOUT_ORDER_SUCCESS;\r\n  readonly number: number;\r\n}\r\n\r\nexport interface ICheckoutOrderErrorAction {\r\n  readonly type: typeof CHECKOUT_ORDER_ERROR;\r\n  readonly message: string;\r\n}\r\n\r\nexport interface IClearOrderAction {\r\n  readonly type: typeof CLEAR_ORDER;\r\n}\r\n\r\nexport type TOrderActions =\r\n  | ICheckoutOrderRequestAction\r\n  | ICheckoutOrderSuccessAction\r\n  | ICheckoutOrderErrorAction\r\n  | IClearOrderAction;\r\n\r\nexport const doCheckoutOrder: AppThunk =\r\n  () => async (dispatch: AppDispatch, getState) => {\r\n    const { bunItem, items } = getState().construct;\r\n\r\n    if (!bunItem) {\r\n      return dispatch({\r\n        type: CHECKOUT_ORDER_ERROR,\r\n        message: \"Для оформления заказа добавьте булку!\",\r\n      });\r\n    }\r\n\r\n    const ids = [bunItem._id, ...items.map((el) => el._id)];\r\n\r\n    dispatch({\r\n      type: CHECKOUT_ORDER_REQUEST,\r\n    });\r\n    try {\r\n      const data = await checkoutOrder(ids);\r\n      dispatch({\r\n        type: CHECKOUT_ORDER_SUCCESS,\r\n        number: data.order.number,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: CHECKOUT_ORDER_ERROR,\r\n        message: err.message,\r\n      });\r\n    }\r\n  };\r\n","import { useState, useCallback, useRef, RefObject } from \"react\";\r\nimport { useSelector, useDispatch } from \"../../services/hooks\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport cn from \"classnames\";\r\nimport {\r\n  ConstructorElement,\r\n  Button,\r\n  CurrencyIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDrop } from \"react-dnd\";\r\n\r\nimport OrderDetails from \"../order-details/order-details\";\r\nimport Modal from \"../modal/modal\";\r\nimport Spinner from \"../spinner/spinner\";\r\nimport DragElement from \"./drag-element/drag-element\";\r\n\r\nimport { CHECKOUT_ORDER_ERROR } from \"../../services/actions/order\";\r\n\r\nimport { animate } from \"../../services/utils\";\r\nimport { useScrollbar } from \"../../services/scrollbar\";\r\nimport { IConstructorIngredient } from \"../../services/types/data\";\r\n\r\nimport {\r\n  ADD_CONSTRUCTOR_INGREDIENT,\r\n  REMOVE_CONSTRUCTOR_INGREDIENT,\r\n  CLEAR_CONSTRUCTOR,\r\n} from \"../../services/actions/constructor\";\r\nimport { doCheckoutOrder, CLEAR_ORDER } from \"../../services/actions/order\";\r\nimport styles from \"./burger-constructor.module.css\";\r\n\r\nconst BurgerConstructor: React.FC = () => {\r\n  const [isOrderShown, setOrderShown] = useState(false);\r\n\r\n  const { bunItem, items, totalPrice } = useSelector(\r\n    (store) => store.construct\r\n  );\r\n\r\n  const {\r\n    number: orderNumber,\r\n    checkoutRequest: orderLoading,\r\n    checkoutErrorMessage: orderError,\r\n  } = useSelector((store) => store.order);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const elementOnDelete = useCallback(\r\n    (item: IConstructorIngredient, ref: RefObject<HTMLLIElement>) => {\r\n      const el = ref.current;\r\n      if (!el) {\r\n        return;\r\n      }\r\n      const height = el.offsetHeight;\r\n      el.style.zIndex = \"-1\";\r\n      animate({\r\n        draw(progress) {\r\n          el.style.opacity = `${1 - progress}`;\r\n          el.style.marginTop = `-${height * progress}px`;\r\n        },\r\n        duration: 500,\r\n        timing: \"easeOut\",\r\n      }).then(() => dispatch({ type: REMOVE_CONSTRUCTOR_INGREDIENT, item }));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const orderModalOnClose = useCallback(() => {\r\n    setOrderShown(false);\r\n    if (orderNumber) {\r\n      dispatch({ type: CLEAR_CONSTRUCTOR });\r\n      dispatch({ type: CLEAR_ORDER });\r\n    }\r\n  }, [dispatch, orderNumber]);\r\n\r\n  function handleCheckoutOrder() {\r\n    setOrderShown(true);\r\n    dispatch(doCheckoutOrder());\r\n  }\r\n\r\n  const [{ isOver, canDrop }, dropIngredientsRef] = useDrop({\r\n    accept: \"ingredient\",\r\n    drop(item, monitor) {\r\n      dispatch({ type: ADD_CONSTRUCTOR_INGREDIENT, item });\r\n    },\r\n    collect: (monitor) => ({\r\n      isOver: monitor.isOver(),\r\n      canDrop: monitor.canDrop(),\r\n    }),\r\n  });\r\n\r\n  const listRef = useRef<HTMLUListElement>(null);\r\n  const bottomBunRef = useRef<HTMLLIElement>(null);\r\n  const footerRef = useRef<HTMLElement>(null);\r\n  useScrollbar(listRef, {\r\n    exclude: [bottomBunRef, footerRef],\r\n    props: [bunItem, items.length === 0],\r\n  });\r\n\r\n  const history = useHistory();\r\n  if (orderError === \"jwt malformed\") {\r\n    dispatch({\r\n      type: CHECKOUT_ORDER_ERROR,\r\n      message: \"\",\r\n    });\r\n    history.replace(\"/login\");\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <section\r\n      className={cn(styles.container, \"pt-25 pl-4\")}\r\n      ref={dropIngredientsRef}\r\n      data-test-id=\"constructor-container\"\r\n    >\r\n      <ul className={styles.elements}>\r\n        {!bunItem && !items.length && (\r\n          <li\r\n            className={cn(\r\n              styles.dragMessage,\r\n              \"text text_type_main-medium pt-25 pb-25\",\r\n              {\r\n                [styles.dragMessageOver]: isOver,\r\n                text_color_inactive: !canDrop,\r\n              }\r\n            )}\r\n          >\r\n            Перетащите ингридиенты сюда\r\n          </li>\r\n        )}\r\n        {bunItem && (\r\n          <li className=\"ml-8 mr-4 mb-4\" data-test-id=\"ctr-bun-top\">\r\n            <ConstructorElement\r\n              type=\"top\"\r\n              isLocked={true}\r\n              text={`${bunItem.name} (верх)`}\r\n              price={bunItem.price}\r\n              thumbnail={bunItem.image}\r\n            />\r\n          </li>\r\n        )}\r\n        <li>\r\n          <ul\r\n            className={cn(styles.elementsScroll, \"noselect pr-2\")}\r\n            ref={listRef}\r\n          >\r\n            {items.map((el, index) => {\r\n              return (\r\n                <DragElement\r\n                  key={el.key}\r\n                  item={el}\r\n                  index={index}\r\n                  onDelete={elementOnDelete}\r\n                />\r\n              );\r\n            })}\r\n          </ul>\r\n        </li>\r\n        {bunItem && (\r\n          <li\r\n            className=\"ml-8 mr-4\"\r\n            ref={bottomBunRef}\r\n            data-test-id=\"ctr-bun-bottom\"\r\n          >\r\n            <ConstructorElement\r\n              type=\"bottom\"\r\n              isLocked={true}\r\n              text={`${bunItem.name} (низ)`}\r\n              price={bunItem.price}\r\n              thumbnail={bunItem.image}\r\n            />\r\n          </li>\r\n        )}\r\n      </ul>\r\n      <footer className={cn(styles.footer, \"mt-10 mb-2\")} ref={footerRef}>\r\n        <p className=\"text text_type_digits-medium mr-2\">{totalPrice}</p>\r\n        <p className=\"text mr-10\">\r\n          <CurrencyIcon type=\"primary\" />\r\n        </p>\r\n        <Button type=\"primary\" size=\"large\" onClick={handleCheckoutOrder}>\r\n          Оформить заказ\r\n        </Button>\r\n      </footer>\r\n      <Modal\r\n        header={orderError && \"Ошибка\"}\r\n        visible={isOrderShown}\r\n        onClose={orderLoading ? undefined : orderModalOnClose}\r\n      >\r\n        <>\r\n          {orderLoading && (\r\n            <div className={styles.center}>\r\n              <p className=\"text text_type_main-default mb-20 ml-25 mr-25\">\r\n                Оформляем заказ...\r\n              </p>\r\n              <Spinner className=\"mb-15\" />\r\n            </div>\r\n          )}\r\n          {orderError && (\r\n            <p className={cn(\"text text_type_main-default mt-5\", styles.error)}>\r\n              {orderError}\r\n            </p>\r\n          )}\r\n          {orderNumber && <OrderDetails orderNumber={orderNumber} />}\r\n        </>\r\n      </Modal>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default BurgerConstructor;\r\n","import { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\n\r\nimport BurgerIngredients from \"../components/burger-ingredients/burger-ingredients\";\r\nimport BurgerConstructor from \"../components/burger-constructor/burger-constructor\";\r\n\r\nexport function HomePage() {\r\n  return (\r\n    <DndProvider backend={HTML5Backend}>\r\n      <BurgerIngredients />\r\n      <BurgerConstructor />\r\n    </DndProvider>\r\n  );\r\n}","import { useState, useCallback, useRef } from \"react\";\r\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport \"./password-input.module.css\";\r\n\r\ntype TPasswordInputProps = {\r\n  value: string;\r\n  onChange(e: React.ChangeEvent<HTMLInputElement>): void;\r\n} & typeof Input[\"defaultProps\"];\r\n\r\nconst PasswordInput: React.FC<TPasswordInputProps> = ({ ...props }) => {\r\n  const [isValueHidden, setValueHidden] = useState(true);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleIconClick = useCallback(() => {\r\n    setValueHidden(!isValueHidden);\r\n    const el = inputRef.current;\r\n    if (!el) {\r\n      return;\r\n    }\r\n    const pos = el.selectionStart;\r\n    setTimeout(() => {\r\n      el.focus();\r\n      el.setSelectionRange(pos || el.value.length, pos || el.value.length);\r\n    }, 0);\r\n  }, [isValueHidden]);\r\n\r\n  return (\r\n    <Input\r\n      {...props}\r\n      ref={inputRef}\r\n      type={isValueHidden ? \"password\" : \"text\"}\r\n      icon={isValueHidden ? \"ShowIcon\" : \"HideIcon\"}\r\n      onIconClick={handleIconClick}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PasswordInput;\r\n","import { useState, useRef, useEffect, ChangeEvent, FormEvent } from \"react\";\r\n\r\nconst emailRegExp =\r\n  /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n\r\ntype TValidationRuleNames = \"required\" | \"email\" | \"minLength\";\r\n\r\ninterface IValidationRuleParams<TParam = any> {\r\n  value: string;\r\n  param?: TParam;\r\n  message?: string;\r\n}\r\n\r\ntype TValidationRules = {\r\n  [key in TValidationRuleNames]: (params: IValidationRuleParams) => string;\r\n};\r\n\r\ntype TValidationRuleValue =\r\n  | boolean\r\n  | number\r\n  | {\r\n      param: boolean | number;\r\n      message?: string;\r\n    };\r\n\r\ntype TValidationRuleValues = {\r\n  [key in TValidationRuleNames]?: TValidationRuleValue;\r\n};\r\n\r\n// Правила валидации\r\nconst validationRules: TValidationRules = {\r\n  required: ({ value, message = \"Введите значение\" }) => {\r\n    return value && value.length > 0 ? \"\" : message;\r\n  },\r\n  email: ({ value, message = \"Введите корректный email\" }) => {\r\n    return emailRegExp.test(String(value).toLowerCase()) ? \"\" : message;\r\n  },\r\n  minLength: ({ value, param = 0, message }: IValidationRuleParams<number>) => {\r\n    message = message || `Введите не менее ${param} символов`;\r\n    return value.length >= param || value.length === 0 ? \"\" : message;\r\n  },\r\n};\r\n\r\n/**\r\n * Проверка значения в соответствии с правилами\r\n * @param value значение\r\n * @param rules правила\r\n * @returns Первое сообщение об ошибке или \"\", если без ошибок\r\n */\r\nfunction validate(value: string, rules: TValidationRuleValues): string {\r\n  if (!rules) return \"\";\r\n\r\n  const messages = Object.entries(rules).map(([ruleName, ruleParam]) => {\r\n    if (!ruleParam) return \"\";\r\n    return validationRules[ruleName as TValidationRuleNames]({\r\n      value,\r\n      param: typeof ruleParam === \"object\" ? ruleParam.param : ruleParam,\r\n      ...(typeof ruleParam === \"object\" ? { message: ruleParam.message } : {}),\r\n    });\r\n  });\r\n\r\n  return messages.filter((message) => !!message)[0] || \"\";\r\n}\r\n\r\n/**\r\n * Проверка всех значени в values в соотвествии с правилами rules\r\n * @param values\r\n * @param rules\r\n * @returns объект: ключ имя поля, значение - первое сообщение об ошибке\r\n */\r\nfunction validateAll(\r\n  values: { [name: string]: string },\r\n  rules: { [name: string]: TValidationRuleValues }\r\n) {\r\n  const errors: { [name: string]: string } = {};\r\n  for (const name of Object.keys(values)) {\r\n    errors[name] = validate(values[name], rules[name]);\r\n  }\r\n\r\n  return errors;\r\n}\r\n\r\n/**\r\n * Хук управляет отправкой данных формы,\r\n * проверяет клиентскую валидацию с помощью правил validation,\r\n * устанавливает значения полей по умолчанию defValues\r\n * @param {(values) => Promise} onSubmit Отправщик данных формы\r\n * @return {{\r\n *   handleSubmit, обрабочик формы onSubmit\r\n *   data,         данные с сервера после отправки формы\r\n *   error,        ошибка с сервера после отправки формы\r\n *   loading,      загрузка данных после отправки формы\r\n *   register,     обрабтчик изменения поля формы\r\n * }}\r\n */\r\nexport function useFormSubmit<IData>({\r\n  onSubmit,\r\n}: {\r\n  onSubmit: (param: any) => Promise<IData>;\r\n}) {\r\n  const [values, setValues] = useState<{ [key: string]: string }>({});\r\n  const [validation, setValidation] = useState<{ [key: string]: string }>({});\r\n  const [data, setData] = useState<IData | null>(null);\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const prevDataRef = useRef<IData | null>(null);\r\n  const rulesRef = useRef<{ [name: string]: TValidationRuleValues }>({});\r\n\r\n  useEffect(() => {\r\n    prevDataRef.current = data;\r\n  });\r\n\r\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n    const rules = rulesRef.current;\r\n\r\n    setValues({\r\n      ...values,\r\n      [name]: value,\r\n    });\r\n\r\n    setValidation({\r\n      ...validation,\r\n      [name]: validate(value, rules[name]),\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    const rules = rulesRef.current;\r\n\r\n    if (loading) return;\r\n\r\n    const errors = validateAll(values, rules);\r\n    setValidation(errors);\r\n    // Есть ошибки клиентской валидации\r\n    if (Object.values(errors).some((error) => error)) {\r\n      return;\r\n    }\r\n\r\n    setData(null);\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await onSubmit(values);\r\n      setError(\"\");\r\n      setData(res);\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const register = (\r\n    name: string,\r\n    {\r\n      value = \"\",\r\n      validate,\r\n    }: {\r\n      value?: string;\r\n      validate?: TValidationRuleValues;\r\n    } = {}\r\n  ) => {\r\n    if (!(name in values)) {\r\n      setValues({\r\n        ...values,\r\n        [name]: value,\r\n      });\r\n    }\r\n\r\n    if (validate && !(name in rulesRef.current)) {\r\n      rulesRef.current[name] = validate;\r\n    }\r\n\r\n    return {\r\n      name,\r\n      value: values[name] || \"\",\r\n      onChange: handleChange,\r\n      error: !!validation[name],\r\n      errorText: validation[name],\r\n    };\r\n  };\r\n\r\n  return {\r\n    handleSubmit,\r\n    data,\r\n    dataChanged: data !== prevDataRef.current,\r\n    error,\r\n    loading,\r\n    values,\r\n    setValues,\r\n    register,\r\n  };\r\n}\r\n","import { loadUser } from \"../api\";\r\nimport { AppDispatch, AppThunk } from \"../types\";\r\nimport { IUser } from \"../types/data\";\r\n\r\nexport const GET_USER_REQUEST: \"GET_USER_REQUEST\" = \"GET_USER_REQUEST\";\r\nexport const GET_USER_SUCCESS: \"GET_USER_SUCCESS\" = \"GET_USER_SUCCESS\";\r\nexport const GET_USER_ERROR: \"GET_USER_ERROR\" = \"GET_USER_ERROR\";\r\nexport const SET_USER: \"SET_USER\" = \"SET_USER\";\r\nexport const CLEAR_USER: \"CLEAR_USER\" = \"CLEAR_USER\";\r\n\r\nexport interface IGetUserRequestAction {\r\n  readonly type: typeof GET_USER_REQUEST;\r\n}\r\n\r\nexport interface IGetUserSuccessAction {\r\n  readonly type: typeof GET_USER_SUCCESS;\r\n  readonly user: IUser;\r\n}\r\n\r\nexport interface IGetUserErrorAction {\r\n  readonly type: typeof GET_USER_ERROR;\r\n  readonly message: string;\r\n}\r\n\r\nexport interface ISetUserAction {\r\n  readonly type: typeof SET_USER;\r\n  readonly user: IUser;\r\n}\r\n\r\nexport interface IClearUserAction {\r\n  readonly type: typeof CLEAR_USER;\r\n}\r\n\r\nexport type TUserActions =\r\n  | IGetUserRequestAction\r\n  | IGetUserSuccessAction\r\n  | IGetUserErrorAction\r\n  | ISetUserAction\r\n  | IClearUserAction;\r\n\r\nexport const getUser: AppThunk =\r\n  () => async (dispatch: AppDispatch, getState) => {\r\n    dispatch({\r\n      type: GET_USER_REQUEST,\r\n    });\r\n    try {\r\n      const data = await loadUser();\r\n      dispatch({\r\n        type: GET_USER_SUCCESS,\r\n        user: data.user,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: GET_USER_ERROR,\r\n        message: err.message,\r\n      });\r\n    }\r\n  };\r\n","import { useEffect, useCallback } from \"react\";\r\nimport { useSelector, useDispatch } from \"./hooks\";\r\nimport { login, logout } from \"./api\";\r\nimport { getUser, SET_USER, CLEAR_USER } from \"./actions/user\";\r\n\r\nexport function useAuth() {\r\n  const { user, userRequest, userSuccess, userErrorMessage } = useSelector(\r\n    (store) => store.user\r\n  );\r\n  const userLoaded = userSuccess || !!userErrorMessage;\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!userRequest && !userLoaded) {\r\n      dispatch(getUser());\r\n    }\r\n  }, [dispatch, userLoaded, userRequest]);\r\n\r\n  const signIn = useCallback(\r\n    async (params) => {\r\n      const data = await login(params);\r\n      dispatch({ type: SET_USER, user: data.user });\r\n      return data;\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const signOut = useCallback(async () => {\r\n    await logout();\r\n    dispatch({ type: CLEAR_USER });\r\n  }, [dispatch]);\r\n\r\n  return {\r\n    user,\r\n    userLoaded,\r\n    signIn,\r\n    signOut,\r\n  };\r\n}\r\n","import cn from \"classnames\";\r\nimport {\r\n  Input,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\r\n\r\nimport PasswordInput from \"../components/password-input/password-input\";\r\nimport { useFormSubmit } from \"../services/form\";\r\nimport { useAuth } from \"../services/auth\";\r\n\r\nimport styles from \"./login.module.css\";\r\n\r\nexport function LoginPage() {\r\n  const { user, userLoaded, signIn } = useAuth();\r\n  const location = useLocation<{ from?: Location }>();\r\n  const { data, loading, error, register, handleSubmit } = useFormSubmit({\r\n    onSubmit: signIn,\r\n  });\r\n\r\n  if (!userLoaded) {\r\n    return null;\r\n  }\r\n\r\n  if (!loading && user) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  if (data) {\r\n    return <Redirect to={location.state?.from || \"/\"} />;\r\n  }\r\n\r\n  return (\r\n    <form className={styles.container} onSubmit={handleSubmit}>\r\n      <h1 className=\"text text_type_main-medium mb-6\">Вход</h1>\r\n      {error && (\r\n        <p className={cn(styles.error, \"text text_type_main-default mb-4\")}>\r\n          {error}\r\n        </p>\r\n      )}\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type=\"email\"\r\n          placeholder=\"E-mail\"\r\n          {...register(\"email\", { validate: { required: true, email: true } })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <PasswordInput\r\n          placeholder=\"Пароль\"\r\n          {...register(\"password\", {\r\n            validate: { required: true, minLength: 6 },\r\n          })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <div className=\"mb-20\">\r\n        <Button>Войти</Button>\r\n      </div>\r\n      <p className=\"text text_type_main-default text_color_inactive mb-4\">\r\n        Вы новый пользователь? <Link to=\"/register\">Зарегистрироваться</Link>\r\n      </p>\r\n      <p className=\"text text_type_main-default text_color_inactive\">\r\n        Забыли пароль? <Link to=\"/forgot-password\">Восстановить пароль</Link>\r\n      </p>\r\n    </form>\r\n  );\r\n}\r\n","import cn from \"classnames\";\r\nimport {\r\n  Input,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport PasswordInput from \"../components/password-input/password-input\";\r\nimport { useFormSubmit } from \"../services/form\";\r\nimport { register as callRegister } from \"../services/api\";\r\n\r\nimport styles from \"./register.module.css\";\r\n\r\nexport function RegisterPage() {\r\n  const { data, loading, error, register, handleSubmit } = useFormSubmit({\r\n    onSubmit: (params) => callRegister(params),\r\n  });\r\n\r\n  if (data) {\r\n    return (\r\n      <form className={styles.container}>\r\n        <h1 className=\"text text_type_main-medium mb-6\">Регистрация</h1>\r\n        <p className=\"text text_type_main-default \">\r\n          Вы успешно зарегистирированы. <Link to=\"/login\">Войти</Link>\r\n        </p>\r\n      </form>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <form className={styles.container} onSubmit={handleSubmit}>\r\n      <h1 className=\"text text_type_main-medium mb-6\">Регистрация</h1>\r\n      {error && (\r\n        <p className={cn(styles.error, \"text text_type_main-default mb-4\")}>\r\n          {error}\r\n        </p>\r\n      )}\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n          {...register(\"name\", { validate: { required: true, minLength: 3 } })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type=\"email\"\r\n          placeholder=\"E-mail\"\r\n          {...register(\"email\", { validate: { required: true, email: true } })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <PasswordInput\r\n          placeholder=\"Пароль\"\r\n          {...register(\"password\", {\r\n            validate: { required: true, minLength: 6 },\r\n          })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <div className=\"mb-20\">\r\n        <Button>Зарегистрироваться</Button>\r\n      </div>\r\n      <p className=\"text text_type_main-default text_color_inactive\">\r\n        Уже зарегистированы? <Link to=\"/login\">Войти</Link>\r\n      </p>\r\n    </form>\r\n  );\r\n}\r\n","import cn from \"classnames\";\r\nimport {\r\n  Input,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport { Link, Redirect } from \"react-router-dom\";\r\nimport { useFormSubmit } from \"../services/form\";\r\nimport { checkResetPassword } from \"../services/api\";\r\n\r\nimport styles from \"./forgot-password.module.css\";\r\n\r\nexport function ForgotPasswordPage() {\r\n  const { data, loading, error, register, values, handleSubmit } =\r\n    useFormSubmit({\r\n      onSubmit: checkResetPassword,\r\n    });\r\n\r\n  if (data) {\r\n    return (\r\n      <Redirect\r\n        to={{\r\n          pathname: \"/reset-password\",\r\n          state: { email: values.email },\r\n        }}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <form className={styles.container} onSubmit={handleSubmit}>\r\n      <h1 className=\"text text_type_main-medium mb-6\">Восстановление пароля</h1>\r\n      {error && (\r\n        <p className={cn(styles.error, \"text text_type_main-default mb-4\")}>\r\n          {error}\r\n        </p>\r\n      )}\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type=\"email\"\r\n          placeholder=\"Укажите e-mail\"\r\n          {...register(\"email\", { validate: { required: true, email: true } })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <div className=\"mb-20\">\r\n        <Button>Восстановить</Button>\r\n      </div>\r\n      <p className=\"text text_type_main-default text_color_inactive\">\r\n        Вспомнили пароль? <Link to=\"/login\">Войти</Link>\r\n      </p>\r\n    </form>\r\n  );\r\n}\r\n","import cn from \"classnames\";\r\nimport {\r\n  Input,\r\n  Button,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport PasswordInput from \"../components/password-input/password-input\";\r\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\r\nimport { useFormSubmit } from \"../services/form\";\r\nimport { resetPassword } from \"../services/api\";\r\n\r\nimport styles from \"./reset-password.module.css\";\r\n\r\nexport function ResetPasswordPage() {\r\n  const location = useLocation<{ email?: string }>();\r\n  const { data, loading, error, register, handleSubmit } = useFormSubmit({\r\n    onSubmit: resetPassword,\r\n  });\r\n\r\n  if (!location.state?.email) {\r\n    return <Redirect to=\"/forgot-password\" />;\r\n  }\r\n\r\n  if (data) {\r\n    return (\r\n      <form className={styles.container}>\r\n        <h1 className=\"text text_type_main-medium mb-6\">\r\n          Восстановление пароля\r\n        </h1>\r\n        <p className=\"text text_type_main-default \">\r\n          Пароль успешно изменён. <Link to=\"/login\">Войти</Link>\r\n        </p>\r\n      </form>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <form className={styles.container} onSubmit={handleSubmit}>\r\n      <h1 className=\"text text_type_main-medium mb-6\">Восстановление пароля</h1>\r\n      {error && (\r\n        <p className={cn(styles.error, \"text text_type_main-default mb-4\")}>\r\n          {error}\r\n        </p>\r\n      )}\r\n      <div className=\"mb-6\">\r\n        <PasswordInput\r\n          placeholder=\"Введите новый пароль\"\r\n          {...register(\"password\", {\r\n            validate: { required: true, minLength: 6 },\r\n          })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <Input\r\n          type=\"text\"\r\n          placeholder=\"Введите код из письма\"\r\n          {...register(\"token\", {\r\n            validate: { required: true, minLength: 10 },\r\n          })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <div className=\"mb-20\">\r\n        <Button>Сохранить</Button>\r\n      </div>\r\n      <p className=\"text text_type_main-default text_color_inactive\">\r\n        Вспомнили пароль? <Link to=\"/login\">Войти</Link>\r\n      </p>\r\n    </form>\r\n  );\r\n}\r\n","import { useState, useRef, FocusEvent } from \"react\";\r\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport \"./view-input.module.css\";\r\n\r\ntype TViewInputProps = {\r\n  setValue: (value: string) => void;\r\n} & {\r\n  value: string;\r\n  onChange(e: React.ChangeEvent<HTMLInputElement>): void;\r\n} & typeof Input[\"defaultProps\"];\r\n\r\nconst ViewInput: React.FC<TViewInputProps> = ({ setValue, ...props }) => {\r\n  const [isEditMode, setEditMode] = useState(false);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  let iconClick = false;\r\n\r\n  const handleIconClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    const el = inputRef.current;\r\n    iconClick = true;\r\n    if (isEditMode && el) {\r\n      setValue(\"\");\r\n      el.focus();\r\n    } else if (el) {\r\n      setEditMode(true);\r\n      setTimeout(() => {\r\n        el.focus();\r\n      }, 0);\r\n    }\r\n  };\r\n\r\n  const handleBlur = (e?: FocusEvent<HTMLInputElement>) => {\r\n    setTimeout(() => {\r\n      if (iconClick) {\r\n        iconClick = false;\r\n        return;\r\n      }\r\n      setEditMode(false);\r\n    }, 200);\r\n  };\r\n\r\n  return (\r\n    <Input\r\n      {...props}\r\n      ref={inputRef}\r\n      icon={isEditMode ? \"CloseIcon\" : \"EditIcon\"}\r\n      onIconClick={handleIconClick}\r\n      onBlur={handleBlur}\r\n      disabled={props.disabled || !isEditMode}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ViewInput;\r\n","import cn from \"classnames\";\r\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport ViewInput from \"../view-input/view-input\";\r\nimport { useFormSubmit } from \"../../services/form\";\r\nimport { useAuth } from \"../../services/auth\";\r\nimport { updateUser } from \"../../services/api\";\r\nimport { isEqual } from \"../../services/utils\";\r\n\r\nimport { SET_USER } from \"../../services/actions/user\";\r\n\r\nimport styles from \"./profile-form.module.css\";\r\n\r\nconst ProfileForm: React.FC = () => {\r\n  const dispatch = useDispatch();\r\n  const { user } = useAuth();\r\n  const {\r\n    data,\r\n    dataChanged,\r\n    loading,\r\n    error,\r\n    register,\r\n    values,\r\n    setValues,\r\n    handleSubmit,\r\n  } = useFormSubmit({\r\n    onSubmit: updateUser,\r\n  });\r\n\r\n  if (!user) {\r\n    return null;\r\n  }\r\n\r\n  const footerVisible = !isEqual({ ...user, password: \"\" }, values);\r\n\r\n  const createSetValue = (name: string) => {\r\n    return (value: string) => setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setValues({ ...user, password: \"\" });\r\n  };\r\n\r\n  if (\r\n    data &&\r\n    dataChanged &&\r\n    !isEqual(values, {\r\n      ...data.user,\r\n      password: \"\",\r\n    })\r\n  ) {\r\n    setValues({\r\n      ...data.user,\r\n      password: \"\",\r\n    });\r\n  }\r\n\r\n  if (data && user !== data.user) {\r\n    dispatch({ type: SET_USER, user: data.user });\r\n  }\r\n\r\n  return (\r\n    <form className={cn(styles.form, \"mt-20\")} onSubmit={handleSubmit}>\r\n      {error && (\r\n        <p className={cn(styles.error, \"text text_type_main-default mb-4\")}>\r\n          {error}\r\n        </p>\r\n      )}\r\n      <div className=\"mb-6\">\r\n        <ViewInput\r\n          type=\"text\"\r\n          placeholder=\"Имя\"\r\n          setValue={createSetValue(\"name\")}\r\n          {...register(\"name\", {\r\n            value: user.name,\r\n            validate: { required: true, minLength: 3 },\r\n          })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <ViewInput\r\n          type=\"email\"\r\n          placeholder=\"Логин\"\r\n          setValue={createSetValue(\"email\")}\r\n          {...register(\"email\", {\r\n            value: user.email,\r\n            validate: { required: true, email: true },\r\n          })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <div className=\"mb-6\">\r\n        <ViewInput\r\n          placeholder=\"Пароль\"\r\n          type=\"password\"\r\n          setValue={createSetValue(\"password\")}\r\n          {...register(\"password\", { validate: { minLength: 6 } })}\r\n          disabled={loading}\r\n        />\r\n      </div>\r\n      <footer\r\n        style={{ display: footerVisible ? \"\" : \"none\" }}\r\n        className={styles.formFooter}\r\n      >\r\n        <a\r\n          className=\"text text_type_main-default mr-7\"\r\n          onClick={loading ? undefined : handleCancel}\r\n        >\r\n          Отмена\r\n        </a>\r\n        <Button type=\"primary\" size=\"medium\">\r\n          Сохранить\r\n        </Button>\r\n      </footer>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default ProfileForm;\r\n","import cn from \"classnames\";\r\n\r\nimport styles from \"./ingredient-avatar.module.css\";\r\n\r\ninterface IIngredientAvatarProps {\r\n  image: string;\r\n  count?: number;\r\n}\r\n\r\nconst IngredientAvatar: React.FC<IIngredientAvatarProps> = ({\r\n  image,\r\n  count = 0,\r\n}) => {\r\n  return (\r\n    <div className={styles.ingredient}>\r\n      <img\r\n        src={image}\r\n        className={styles.ingredientImage}\r\n        width={112}\r\n        height={56}\r\n        alt=\"ingredient\"\r\n      />\r\n      {count > 0 && (\r\n        <i className={cn(styles.ingredientFg, \"text text_type_main-default\")}>\r\n          +{count}\r\n        </i>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IngredientAvatar;\r\n","import { IOrder } from \"../types/data\";\r\n\r\nexport const WS_FEED_CONNECTION_START: \"WS_FEED_CONNECTION_START\" =\r\n  \"WS_FEED_CONNECTION_START\";\r\nexport const WS_FEED_CONNECTION_CLOSE: \"WS_FEED_CONNECTION_CLOSE\" =\r\n  \"WS_FEED_CONNECTION_CLOSE\";\r\nexport const WS_FEED_SEND_MESSAGE: \"WS_FEED_SEND_MESSAGE\" =\r\n  \"WS_FEED_SEND_MESSAGE\";\r\nexport const WS_FEED_CONNECTION_SUCCESS: \"WS_FEED_CONNECTION_SUCCESS\" =\r\n  \"WS_FEED_CONNECTION_SUCCESS\";\r\nexport const WS_FEED_CONNECTION_CLOSED: \"WS_FEED_CONNECTION_CLOSED\" =\r\n  \"WS_FEED_CONNECTION_CLOSED\";\r\nexport const WS_FEED_CONNECTION_ERROR: \"WS_FEED_CONNECTION_ERROR\" =\r\n  \"WS_FEED_CONNECTION_ERROR\";\r\nexport const WS_FEED_GET_MESSAGE: \"WS_FEED_GET_MESSAGE\" = \"WS_FEED_GET_MESSAGE\";\r\n\r\nexport interface IWsFeedConnectionStartAction {\r\n  readonly type: typeof WS_FEED_CONNECTION_START;\r\n}\r\n\r\nexport interface IWsFeedConnectionCloseAction {\r\n  readonly type: typeof WS_FEED_CONNECTION_CLOSE;\r\n}\r\n\r\nexport interface IWsFeedConnectionClosedAction {\r\n  readonly type: typeof WS_FEED_CONNECTION_CLOSED;\r\n}\r\n\r\nexport interface IWsFeedConnectionSuccessAction {\r\n  readonly type: typeof WS_FEED_CONNECTION_SUCCESS;\r\n}\r\n\r\nexport interface IWsFeedConnectionErrorAction {\r\n  readonly type: typeof WS_FEED_CONNECTION_ERROR;\r\n  readonly payload: { message: string };\r\n}\r\n\r\nexport interface IWsFeedGetMessageAction {\r\n  readonly type: typeof WS_FEED_GET_MESSAGE;\r\n  readonly payload: {\r\n    message?: string;\r\n    orders: IOrder[];\r\n    total: number;\r\n    totalToday: number;\r\n  };\r\n}\r\n\r\nexport type TWsFeedActions =\r\n  | IWsFeedConnectionStartAction\r\n  | IWsFeedConnectionCloseAction\r\n  | IWsFeedConnectionClosedAction\r\n  | IWsFeedConnectionSuccessAction\r\n  | IWsFeedConnectionErrorAction\r\n  | IWsFeedGetMessageAction;\r\n","import { IOrder } from \"../types/data\";\r\n\r\nexport const WS_PROFILE_CONNECTION_START: \"WS_PROFILE_CONNECTION_START\" =\r\n  \"WS_PROFILE_CONNECTION_START\";\r\nexport const WS_PROFILE_CONNECTION_CLOSE: \"WS_PROFILE_CONNECTION_CLOSE\" =\r\n  \"WS_PROFILE_CONNECTION_CLOSE\";\r\nexport const WS_PROFILE_SEND_MESSAGE: \"WS_PROFILE_SEND_MESSAGE\" =\r\n  \"WS_PROFILE_SEND_MESSAGE\";\r\nexport const WS_PROFILE_CONNECTION_SUCCESS: \"WS_PROFILE_CONNECTION_SUCCESS\" =\r\n  \"WS_PROFILE_CONNECTION_SUCCESS\";\r\nexport const WS_PROFILE_CONNECTION_CLOSED: \"WS_PROFILE_CONNECTION_CLOSED\" =\r\n  \"WS_PROFILE_CONNECTION_CLOSED\";\r\nexport const WS_PROFILE_CONNECTION_ERROR: \"WS_PROFILE_CONNECTION_ERROR\" =\r\n  \"WS_PROFILE_CONNECTION_ERROR\";\r\nexport const WS_PROFILE_GET_MESSAGE: \"WS_PROFILE_GET_MESSAGE\" =\r\n  \"WS_PROFILE_GET_MESSAGE\";\r\n\r\nexport interface IWsProfileConnectionStartAction {\r\n  readonly type: typeof WS_PROFILE_CONNECTION_START;\r\n}\r\n\r\nexport interface IWsProfileConnectionCloseAction {\r\n  readonly type: typeof WS_PROFILE_CONNECTION_CLOSE;\r\n}\r\n\r\nexport interface IWsProfileConnectionClosedAction {\r\n  readonly type: typeof WS_PROFILE_CONNECTION_CLOSED;\r\n}\r\n\r\nexport interface IWsProfileConnectionSuccessAction {\r\n  readonly type: typeof WS_PROFILE_CONNECTION_SUCCESS;\r\n}\r\n\r\nexport interface IWsProfileConnectionErrorAction {\r\n  readonly type: typeof WS_PROFILE_CONNECTION_ERROR;\r\n  readonly payload: { message: string };\r\n}\r\n\r\nexport interface IWsProfileGetMessageAction {\r\n  readonly type: typeof WS_PROFILE_GET_MESSAGE;\r\n  readonly payload: {\r\n    message?: string;\r\n    orders: IOrder[];\r\n    total: number;\r\n    totalToday: number;\r\n  };\r\n}\r\n\r\nexport type TWsProfileActions =\r\n  | IWsProfileConnectionStartAction\r\n  | IWsProfileConnectionCloseAction\r\n  | IWsProfileConnectionClosedAction\r\n  | IWsProfileConnectionSuccessAction\r\n  | IWsProfileConnectionErrorAction\r\n  | IWsProfileGetMessageAction;\r\n","import { useEffect, useLayoutEffect, useMemo, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"../services/hooks\";\r\n\r\nimport {\r\n  WS_FEED_CONNECTION_START,\r\n  WS_FEED_CONNECTION_CLOSE,\r\n} from \"./actions/ws-feed\";\r\n\r\nimport {\r\n  WS_PROFILE_CONNECTION_START,\r\n  WS_PROFILE_CONNECTION_CLOSE,\r\n} from \"./actions/ws-profile\";\r\n\r\nimport { getIngredients } from \"./actions/ingredients\";\r\nimport { loadOrderById } from \"./api\";\r\nimport {\r\n  IIngredient,\r\n  IOrder,\r\n  IOrderIngredient,\r\n  IFullOrder,\r\n} from \"./types/data\";\r\n\r\nfunction useIngredientsMap(ingredients: IIngredient[]) {\r\n  return useMemo(\r\n    () =>\r\n      ingredients.reduce((map: { [key: string]: IIngredient }, item) => {\r\n        map[item._id] = item;\r\n        return map;\r\n      }, {}),\r\n    [ingredients]\r\n  );\r\n}\r\n\r\nfunction getFullOrder(\r\n  order: IOrder,\r\n  ingredientsMap: { [key: string]: IIngredient }\r\n): IFullOrder | null {\r\n  if (Object.keys(ingredientsMap).length === 0) {\r\n    return null;\r\n  }\r\n\r\n  const ingredients = order.ingredients\r\n    .filter((id) => !!id)\r\n    .map((id) => ingredientsMap[id])\r\n    .reduce((result: IOrderIngredient[], ingredient) => {\r\n      const found = result.find(({ _id }) => ingredient._id === _id);\r\n\r\n      if (found) {\r\n        if (found.type !== \"bun\") {\r\n          found.count++;\r\n        }\r\n        return result;\r\n      }\r\n\r\n      result.push({\r\n        ...ingredient,\r\n        count: ingredient.type === \"bun\" ? 2 : 1,\r\n      });\r\n      return result;\r\n    }, []);\r\n\r\n  return {\r\n    ...order,\r\n    price: ingredients.reduce(\r\n      (total, { count, price }) => total + count * price,\r\n      0\r\n    ),\r\n    ingredients,\r\n  };\r\n}\r\n\r\nconst statusMap = {\r\n  created: \"Создан\",\r\n  pending: \"Готовится\",\r\n  done: \"Выполнен\",\r\n  canceled: \"Отменен\",\r\n};\r\n\r\nexport function translateStatus(status: IFullOrder[\"status\"]) {\r\n  return statusMap[status] || status;\r\n}\r\n\r\nexport function useOrders(orders: IOrder[]) {\r\n  const { items: ingredients } = useSelector((store) => store.ingredients);\r\n\r\n  const ingredientsMap = useIngredientsMap(ingredients);\r\n\r\n  const ordersList = useMemo(\r\n    () =>\r\n      orders\r\n        .map((order) => getFullOrder(order, ingredientsMap))\r\n        .filter((order): order is IFullOrder => order !== null),\r\n    [orders, ingredientsMap]\r\n  );\r\n\r\n  return { ordersList };\r\n}\r\n\r\nexport function useOrderLoad(id: string) {\r\n  const dispatch = useDispatch();\r\n\r\n  const [serverOrder, setServerOrder] = useState<IOrder>();\r\n  const [order, setOrder] = useState<IFullOrder | null>(null);\r\n  const [orderLoading, setOrderLoading] = useState(true);\r\n  const [orderError, setOrderError] = useState(\"\");\r\n\r\n  const {\r\n    items: ingredients,\r\n    itemsErrorMessage: ingredientsError,\r\n    itemsRequest: ingredientsLoading,\r\n  } = useSelector((store) => store.ingredients);\r\n\r\n  useEffect(() => {\r\n    if (ingredients.length === 0) {\r\n      dispatch(getIngredients());\r\n    }\r\n  }, [dispatch, ingredients.length]);\r\n\r\n  const ingredientsMap = useIngredientsMap(ingredients);\r\n\r\n  if (ingredients.length && serverOrder && !order) {\r\n    setOrder(getFullOrder(serverOrder, ingredientsMap));\r\n  }\r\n\r\n  useEffect(() => {\r\n    setOrderLoading(true);\r\n    loadOrderById(id)\r\n      .then((data) => {\r\n        setServerOrder(data);\r\n      })\r\n      .catch((err) => setOrderError(err))\r\n      .finally(() => {\r\n        setOrderLoading(false);\r\n      });\r\n  }, [id]);\r\n\r\n  const loading = ingredientsLoading || orderLoading;\r\n  const error = ingredientsError + orderError;\r\n\r\n  return { order, loading, error };\r\n}\r\n\r\nexport function useFeedOrders() {\r\n  const dispatch = useDispatch();\r\n\r\n  const {\r\n    orders,\r\n    total,\r\n    totalToday,\r\n    wsError: ordersError,\r\n  } = useSelector((store) => store.feed);\r\n\r\n  useEffect(() => {\r\n    dispatch({ type: WS_FEED_CONNECTION_START });\r\n\r\n    return () => {\r\n      dispatch({ type: WS_FEED_CONNECTION_CLOSE });\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const {\r\n    items: ingredients,\r\n    itemsErrorMessage: ingredientsError,\r\n    itemsRequest: ingredientsLoading,\r\n  } = useSelector((store) => store.ingredients);\r\n\r\n  useLayoutEffect(() => {\r\n    if (ingredients.length === 0) {\r\n      dispatch(getIngredients());\r\n    }\r\n  }, [dispatch, ingredients.length]);\r\n\r\n  const { ordersList } = useOrders(orders);\r\n\r\n  const completeNumbers = useMemo(\r\n    () =>\r\n      orders\r\n        .filter(({ status }) => status === \"done\")\r\n        .slice(0, 20)\r\n        .map(({ number }) => number),\r\n    [orders]\r\n  );\r\n\r\n  const progressNumbers = useMemo(\r\n    () =>\r\n      orders\r\n        .filter(({ status }) => status === \"pending\")\r\n        .slice(0, 20)\r\n        .map(({ number }) => number),\r\n    [orders]\r\n  );\r\n\r\n  const error = ordersError + ingredientsError;\r\n  const loading = (!orders.length && !error) || ingredientsLoading;\r\n\r\n  return {\r\n    ordersList,\r\n    total,\r\n    totalToday,\r\n    completeNumbers,\r\n    progressNumbers,\r\n    error,\r\n    loading,\r\n  };\r\n}\r\n\r\nexport function useProfileOrders() {\r\n  const dispatch = useDispatch();\r\n\r\n  const { orders, wsError: ordersError } = useSelector(\r\n    (store) => store.profile\r\n  );\r\n\r\n  useLayoutEffect(() => {\r\n    dispatch({ type: WS_PROFILE_CONNECTION_START });\r\n\r\n    return () => {\r\n      dispatch({ type: WS_PROFILE_CONNECTION_CLOSE });\r\n    };\r\n  }, [dispatch]);\r\n\r\n  const {\r\n    items: ingredients,\r\n    itemsErrorMessage: ingredientsError,\r\n    itemsRequest: ingredientsLoading,\r\n  } = useSelector((store) => store.ingredients);\r\n\r\n  useLayoutEffect(() => {\r\n    if (ingredients.length === 0) {\r\n      dispatch(getIngredients());\r\n    }\r\n  }, [dispatch, ingredients.length]);\r\n\r\n  let { ordersList } = useOrders(orders);\r\n\r\n  ordersList.sort(\r\n    (a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\r\n  );\r\n\r\n  const error = ordersError + ingredientsError;\r\n  const loading = (!orders.length && !error) || ingredientsLoading;\r\n\r\n  return {\r\n    ordersList,\r\n    error,\r\n    loading,\r\n  };\r\n}\r\n","import { memo } from \"react\";\r\nimport cn from \"classnames\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport { Link, useRouteMatch, useLocation } from \"react-router-dom\";\r\nimport { formatPastDate } from \"../../services/utils\";\r\nimport IngredientAvatar from \"../ingredient-avatar/ingredient-avatar\";\r\nimport { IFullOrder, IOrderIngredient } from \"../../services/types/data\";\r\nimport { translateStatus } from \"../../services/orders\";\r\n\r\nimport styles from \"./order-item.module.css\";\r\n\r\ninterface IIngredientsProps {\r\n  ingredients: IOrderIngredient[];\r\n}\r\n\r\nconst Ingredients: React.FC<IIngredientsProps> = ({ ingredients = [] }) => {\r\n  const list = ingredients.slice(0, 5);\r\n  const rest = ingredients.slice(5);\r\n  return (\r\n    <ul className={styles.ingredientList}>\r\n      {list.map(({ image }, index) => (\r\n        <li\r\n          className={styles.ingredient}\r\n          key={index}\r\n          style={{ zIndex: list.length - index }}\r\n        >\r\n          <IngredientAvatar image={image} />\r\n        </li>\r\n      ))}\r\n      {rest.length > 0 && (\r\n        <li className={styles.ingredient} key={list.length}>\r\n          <IngredientAvatar image={rest[0].image} count={rest.length - 1} />\r\n        </li>\r\n      )}\r\n    </ul>\r\n  );\r\n};\r\n\r\ninterface IOrderItemProps {\r\n  order: IFullOrder;\r\n}\r\n\r\nconst OrderItem: React.FC<IOrderItemProps> = memo(({ order }) => {\r\n  const location = useLocation();\r\n  const { path } = useRouteMatch();\r\n  return (\r\n    <Link\r\n      className={cn(styles.container, \"pl-6 pr-6 pb-6 pt-6\")}\r\n      to={{\r\n        pathname: `${path}/${order.number}`,\r\n        state: { background: location },\r\n      }}\r\n    >\r\n      <header className={styles.header}>\r\n        <h2 className=\"text text_type_digits-default\">#{order.number}</h2>\r\n        <span className=\"text text_type_main-default text_color_inactive\">\r\n          {formatPastDate(order.createdAt)}\r\n        </span>\r\n      </header>\r\n      <h1 className=\"text text_type_main-medium mt-6\">{order.name}</h1>\r\n      {order.status && (\r\n        <p\r\n          className={cn(\"text text_type_main-default pt-2\", {\r\n            [styles.statusDone]: order.status === \"done\",\r\n          })}\r\n        >\r\n          {translateStatus(order.status)}\r\n        </p>\r\n      )}\r\n      <footer className={cn(styles.footer, \"mt-6\")}>\r\n        <Ingredients ingredients={order.ingredients} />\r\n        <div className={styles.price}>\r\n          <p className=\"text text_type_digits-default mr-2\">{order.price}</p>\r\n          <p className=\"text\">\r\n            <CurrencyIcon type=\"primary\" />\r\n          </p>\r\n        </div>\r\n      </footer>\r\n    </Link>\r\n  );\r\n});\r\n\r\nexport default OrderItem;\r\n","import cn from \"classnames\";\r\n\r\nimport { useState, useEffect, useRef } from \"react\";\r\n\r\nimport { NavLink, Route, useRouteMatch } from \"react-router-dom\";\r\n\r\nimport ProfileForm from \"../components/profile-form/profile-form\";\r\nimport { useAuth } from \"../services/auth\";\r\nimport OrderItem from \"../components/order-item/order-item\";\r\nimport Skeleton from \"../components/skeleton/skeleton\";\r\nimport Spinner from \"../components/spinner/spinner\";\r\n\r\nimport { useProfileOrders } from \"../services/orders\";\r\n\r\nimport styles from \"./profile.module.css\";\r\nimport { useScrollbar } from \"../services/scrollbar\";\r\n\r\nfunction Menu() {\r\n  const { path } = useRouteMatch();\r\n  return (\r\n    <nav className={cn(styles.menu, \"mt-20 mr-15\")}>\r\n      <ul className=\"text text_type_main-medium\">\r\n        <li>\r\n          <NavLink\r\n            to={path}\r\n            exact\r\n            className={styles.menuItem}\r\n            activeClassName={styles.menuItemActive}\r\n          >\r\n            Профиль\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink\r\n            to={`${path}/orders`}\r\n            className={styles.menuItem}\r\n            activeClassName={styles.menuItemActive}\r\n          >\r\n            История заказов\r\n          </NavLink>\r\n        </li>\r\n        <li>\r\n          <NavLink\r\n            to={`${path}/logout`}\r\n            exact\r\n            className={styles.menuItem}\r\n            activeClassName={styles.menuItemActive}\r\n          >\r\n            Выход\r\n          </NavLink>\r\n        </li>\r\n      </ul>\r\n      <footer\r\n        className={cn(\r\n          styles.menuFooter,\r\n          \"text text_type_main-default text_color_inactive mt-20\"\r\n        )}\r\n      >\r\n        <Route path={path} exact>\r\n          В этом разделе вы можете изменить свои персональные данные\r\n        </Route>\r\n        <Route path={`${path}/orders`} exact>\r\n          В этом разделе вы можете просмотреть свою историю заказов\r\n        </Route>\r\n      </footer>\r\n    </nav>\r\n  );\r\n}\r\n\r\nfunction Logout() {\r\n  const { signOut } = useAuth();\r\n  const [logoutError, setLogoutError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    signOut().catch((err) => setLogoutError(err.message));\r\n  }, [signOut]);\r\n\r\n  return logoutError ? (\r\n    <p className={cn(styles.error, \"text text_type_main-default mt-20\")}>\r\n      При выходе возникла ошибка. Пожалуйста, попробуйте позже. {logoutError}\r\n    </p>\r\n  ) : (\r\n    <Spinner center={true} />\r\n  );\r\n}\r\n\r\nfunction OrderList() {\r\n  const orderListRef = useRef<HTMLUListElement>(null);\r\n  useScrollbar(orderListRef);\r\n\r\n  const { ordersList, error, loading } = useProfileOrders();\r\n\r\n  return (\r\n    <>\r\n      {error && (\r\n        <p className={cn(styles.error, \"text text_type_main-default\")}>\r\n          Что-то пошло не так. {error}\r\n        </p>\r\n      )}\r\n      <ul className={styles.orderList} ref={orderListRef}>\r\n        {loading && (\r\n          <Skeleton\r\n            repeat={2}\r\n            className={cn(styles.skeletonOrder, \"mb-6 mr-2\")}\r\n            tag=\"li\"\r\n          />\r\n        )}\r\n        {ordersList.map((order) => (\r\n          <li key={order.number} className=\"mb-6 mr-2\">\r\n            <OrderItem order={order} />\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </>\r\n  );\r\n}\r\n\r\nexport function ProfilePage() {\r\n  const { path } = useRouteMatch();\r\n  return (\r\n    <section className={cn(styles.container, \"mt-10\")}>\r\n      <Menu />\r\n      <Route path={path} exact>\r\n        <ProfileForm />\r\n      </Route>\r\n      <Route path={`${path}/orders`} exact>\r\n        <OrderList />\r\n      </Route>\r\n      <Route path={`${path}/logout`} exact>\r\n        <Logout />\r\n      </Route>\r\n    </section>\r\n  );\r\n}\r\n","import { useRef } from \"react\";\r\nimport cn from \"classnames\";\r\n\r\nimport OrderItem from \"../components/order-item/order-item\";\r\nimport Skeleton from \"../components/skeleton/skeleton\";\r\nimport { useScrollbar } from \"../services/scrollbar\";\r\nimport { useFeedOrders } from \"../services/orders\";\r\n\r\nimport styles from \"./feed.module.css\";\r\nimport appStyles from \"../components/app/app.module.css\";\r\n\r\ninterface IStatisticGridItemProps {\r\n  title: string;\r\n  orders: number[];\r\n  loading: boolean;\r\n  className?: string;\r\n  complete?: boolean;\r\n}\r\n\r\nfunction StatisticGridItem({\r\n  title,\r\n  orders,\r\n  loading,\r\n  className,\r\n  complete = false,\r\n}: IStatisticGridItemProps) {\r\n  return (\r\n    <section className={cn(styles.statisticGridItem, className)}>\r\n      <h2 className=\"text text_type_main-medium mb-6\">{title}</h2>\r\n      <ul\r\n        className={cn(\r\n          styles.statisticGridItemList,\r\n          \"text text_type_digits-default\",\r\n          {\r\n            [styles.success]: complete,\r\n          }\r\n        )}\r\n      >\r\n        {loading && <Skeleton repeat={3} className=\"mb-2\" tag=\"li\" />}\r\n        {orders.map((order, index) => (\r\n          <li className=\"mb-2\" key={index}>\r\n            {order}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport function FeedPage() {\r\n  const statisticRef = useRef<HTMLElement>(null);\r\n  const orderListRef = useRef<HTMLUListElement>(null);\r\n  useScrollbar(statisticRef);\r\n  useScrollbar(orderListRef);\r\n\r\n  const {\r\n    ordersList,\r\n    completeNumbers,\r\n    progressNumbers,\r\n    total,\r\n    totalToday,\r\n    error,\r\n    loading,\r\n  } = useFeedOrders();\r\n\r\n  return (\r\n    <section className={cn(styles.container, \"mt-10\")}>\r\n      <h1 className=\"text text_type_main-large mb-5\">Лента заказов</h1>\r\n      <section className={styles.content}>\r\n        {error && (\r\n          <p className={cn(styles.error, \"text text_type_main-default\")}>\r\n            Что-то пошло не так. {error}\r\n          </p>\r\n        )}\r\n        <ul className={cn(styles.orderList, \"mr-15\")} ref={orderListRef}>\r\n          {loading && (\r\n            <Skeleton\r\n              className={cn(styles.skeletonOrder, \"mb-4 mr-2\")}\r\n              repeat={2}\r\n              tag=\"li\"\r\n            />\r\n          )}\r\n          {ordersList.map((order) => (\r\n            <li className=\"mb-4 mr-2\" key={order.number}>\r\n              <OrderItem order={order} />\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        <section className={styles.statistic} ref={statisticRef}>\r\n          <section className={styles.statisticGrid}>\r\n            <StatisticGridItem\r\n              className=\"mr-9\"\r\n              title=\"Готовы:\"\r\n              loading={loading}\r\n              orders={completeNumbers}\r\n              complete={true}\r\n            />\r\n            <StatisticGridItem\r\n              title=\"В работе:\"\r\n              loading={loading}\r\n              orders={progressNumbers}\r\n            />\r\n          </section>\r\n          {total > 0 && (\r\n            <>\r\n              <h2 className=\"text text_type_main-medium mt-15\">\r\n                Выполнено за все время:\r\n              </h2>\r\n              <p\r\n                className={cn(\r\n                  appStyles.textSpaceShadow,\r\n                  \"text text_type_digits-large\"\r\n                )}\r\n              >\r\n                {total}\r\n              </p>\r\n              <h2 className=\"text text_type_main-medium mt-15\">\r\n                Выполнено за сегодня:\r\n              </h2>\r\n              <p\r\n                className={cn(\r\n                  appStyles.textSpaceShadow,\r\n                  \"text text_type_digits-large\"\r\n                )}\r\n              >\r\n                {totalToday}\r\n              </p>\r\n            </>\r\n          )}\r\n        </section>\r\n      </section>\r\n    </section>\r\n  );\r\n}\r\n","import { useRef, memo, RefObject } from \"react\";\r\nimport cn from \"classnames\";\r\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport { formatPastDate } from \"../../services/utils\";\r\nimport { useScrollbar } from \"../../services/scrollbar\";\r\nimport { translateStatus } from \"../../services/orders\";\r\n\r\nimport IngredientAvatar from \"../ingredient-avatar/ingredient-avatar\";\r\n\r\nimport { IFullOrder, IOrderIngredient } from \"../../services/types/data\";\r\n\r\nimport styles from \"./order-info.module.css\";\r\n\r\ninterface IIngredientsProps {\r\n  ingredients: IOrderIngredient[];\r\n  listRef: RefObject<HTMLUListElement>;\r\n}\r\n\r\nconst Ingredients: React.FC<IIngredientsProps> = ({\r\n  ingredients = [],\r\n  listRef,\r\n}) => {\r\n  return (\r\n    <ul className={styles.ingredientList} ref={listRef}>\r\n      {ingredients.map(({ image, name, count, price }, index) => (\r\n        <li className={cn(styles.ingredient, \"mb-4 mr-6\")} key={index}>\r\n          <IngredientAvatar image={image} />\r\n          <p\r\n            className={cn(\r\n              styles.ingredientName,\r\n              \"text text_type_main-default ml-4\"\r\n            )}\r\n          >\r\n            {name}\r\n          </p>\r\n          <div className={styles.price}>\r\n            <p className=\"text text_type_digits-default mr-2\">\r\n              {count} x {price}\r\n            </p>\r\n            <p className=\"text\">\r\n              <CurrencyIcon type=\"primary\" />\r\n            </p>\r\n          </div>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\ninterface IOrderInfoProps {\r\n  order: IFullOrder;\r\n  isInModal?: boolean;\r\n}\r\n\r\nconst OrderInfo: React.FC<IOrderInfoProps> = memo(\r\n  ({ order, isInModal = false }) => {\r\n    const listRef = useRef<HTMLUListElement>(null);\r\n    const footerRef = useRef<HTMLElement>(null);\r\n\r\n    useScrollbar(listRef, { exclude: footerRef, maxHeight: 312, isInModal });\r\n\r\n    return (\r\n      <section className={cn(styles.container)}>\r\n        <h1 className=\"text text_type_main-medium mt-5\">{order.name}</h1>\r\n        {order.status && (\r\n          <p\r\n            className={cn(\"text text_type_main-default pt-3\", {\r\n              [styles.statusDone]: order.status === \"done\",\r\n            })}\r\n          >\r\n            {translateStatus(order.status)}\r\n          </p>\r\n        )}\r\n        <section className={cn(\"mt-15\")}>\r\n          <h1 className=\"text text_type_main-medium mb-6\">Состав:</h1>\r\n          <Ingredients ingredients={order.ingredients} listRef={listRef} />\r\n        </section>\r\n        <footer className={cn(styles.footer, \"mt-10\")} ref={footerRef}>\r\n          <span className=\"text text_type_main-default text_color_inactive\">\r\n            {formatPastDate(order.createdAt)}\r\n          </span>\r\n          <div className={styles.price}>\r\n            <p className=\"text text_type_digits-default mr-2\">{order.price}</p>\r\n            <p className=\"text\">\r\n              <CurrencyIcon type=\"primary\" />\r\n            </p>\r\n          </div>\r\n        </footer>\r\n      </section>\r\n    );\r\n  }\r\n);\r\n\r\nexport default OrderInfo;\r\n","import cn from \"classnames\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport OrderInfo from \"../components/order-info/order-info\";\r\nimport Skeleton from \"../components/skeleton/skeleton\";\r\nimport { useOrderLoad } from \"../services/orders\";\r\nimport styles from \"./order.module.css\";\r\n\r\nexport function OrderPage() {\r\n  const { id } = useParams<{ id: string }>();\r\n\r\n  const { order, loading, error } = useOrderLoad(id);\r\n\r\n  if (error) {\r\n    return (\r\n      <section\r\n        className={cn(\r\n          styles.container,\r\n          \"mt-2 mb-2 text text_type_main-default\"\r\n        )}\r\n      >\r\n        <p className={styles.error}>\r\n          Не удалось найти заказ {id}.<br /> {error}\r\n        </p>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <section className={cn(styles.container, \"mt-2 mb-2\")}>\r\n        <div className={styles.center}>\r\n          <Skeleton\r\n            width={200}\r\n            className={\"text text_type_digits-default mb-10\"}\r\n          />\r\n        </div>\r\n        <Skeleton repeat={2} className=\"text text_type_main-medium mt-5\" />\r\n        <div className=\"mt-15\">\r\n          <Skeleton width={64} circle={true} className=\"mr-4\" />\r\n          <Skeleton width=\"60%\" className=\"text text_type_main-default mt-6\" />\r\n        </div>\r\n        <div className=\"mt-4\">\r\n          <Skeleton width={64} height={64} circle={true} className=\"mr-4\" />\r\n          <Skeleton width=\"60%\" className=\"text text_type_main-default mt-6\" />\r\n        </div>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  return (\r\n    order && (\r\n      <section className={cn(styles.container, \"mt-2 mb-2\")}>\r\n        <h2\r\n          className={cn(styles.center, \"text text_type_digits-default mb-10\")}\r\n        >\r\n          #{order.number}\r\n        </h2>\r\n        <OrderInfo order={order} />\r\n      </section>\r\n    )\r\n  );\r\n}\r\n","import { useState, useEffect, memo } from \"react\";\r\nimport cn from \"classnames\";\r\n\r\nimport styles from \"./ingredient-details.module.css\";\r\nimport { IIngredient } from \"../../services/types/data\";\r\n\r\nfunction useImageLoading(src: string) {\r\n  const [isLoading, setLoading] = useState(true);\r\n\r\n  const loadImage = async (src: string) => {\r\n    if (!src) return;\r\n    const img = new Image();\r\n    img.src = src;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      img.onload = () => resolve(src);\r\n      img.onerror = reject;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    if (src) {\r\n      loadImage(src).then(() => setLoading(false));\r\n    }\r\n  }, [src]);\r\n\r\n  return isLoading;\r\n}\r\n\r\ninterface IngredientDetailsProps {\r\n  ingredient: IIngredient;\r\n}\r\n\r\nconst IngredientDetails: React.FC<IngredientDetailsProps> = memo(\r\n  ({ ingredient }) => {\r\n    const imageLoading = useImageLoading(ingredient.image_large);\r\n\r\n    return (\r\n      <div className={cn(styles.container, \"pl-15 pr-15 pb-5\")}>\r\n        {imageLoading ? (\r\n          <div className={styles.imagePreloader}></div>\r\n        ) : (\r\n          <img\r\n            className={styles.image}\r\n            src={ingredient.image_large}\r\n            alt={ingredient.name}\r\n          />\r\n        )}\r\n        <h1\r\n          className={cn(styles.title, \"text text_type_main-medium mt-4 mb-8\")}\r\n        >\r\n          {ingredient.name}\r\n        </h1>\r\n        <dl className={cn(styles.content, \"text text_type_main-default\")}>\r\n          <div>\r\n            <dt>Калории, ккал</dt>\r\n            <dd className=\"text text_type_digits-default mt-2\">\r\n              {ingredient.calories}\r\n            </dd>\r\n          </div>\r\n          <div>\r\n            <dt>Белки, г</dt>\r\n            <dd className=\"text text_type_digits-default mt-2\">\r\n              {ingredient.proteins}\r\n            </dd>\r\n          </div>\r\n          <div>\r\n            <dt>Жиры, г</dt>\r\n            <dd className=\"text text_type_digits-default mt-2\">\r\n              {ingredient.fat}\r\n            </dd>\r\n          </div>\r\n          <div>\r\n            <dt>Углеводы, г</dt>\r\n            <dd className=\"text text_type_digits-default mt-2\">\r\n              {ingredient.carbohydrates}\r\n            </dd>\r\n          </div>\r\n        </dl>\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default IngredientDetails;\r\n","import { useLayoutEffect } from \"react\";\r\nimport cn from \"classnames\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\nimport { useSelector, useDispatch } from \"../services/hooks\";\r\n\r\nimport Skeleton from \"../components/skeleton/skeleton\";\r\nimport IngredientDetails from \"../components/ingredient-details/ingredient-details\";\r\n\r\nimport { getIngredients } from \"../services/actions/ingredients\";\r\n\r\nimport styles from \"./ingredient.module.css\";\r\n\r\nconst skeleton = (\r\n  <div>\r\n    <Skeleton width=\"80%\" className=\"text text_type_main-large\" />\r\n    <Skeleton width={480} height={240} className=\"mt-4 mb-8\" />\r\n    <Skeleton height={30} className=\"mt-4\" repeat={3} />\r\n  </div>\r\n);\r\nexport function IngredientPage() {\r\n  const { id } = useParams<{ id: string }>();\r\n  const dispatch = useDispatch();\r\n\r\n  const {\r\n    items: ingredients,\r\n    itemsErrorMessage: error,\r\n    itemsRequest: loading,\r\n  } = useSelector((store) => store.ingredients);\r\n\r\n  useLayoutEffect(() => {\r\n    if (ingredients.length === 0) {\r\n      dispatch(getIngredients());\r\n    }\r\n  }, [ingredients.length, dispatch]);\r\n\r\n  const ingredient = ingredients.find(({ _id }) => _id === id);\r\n  return (\r\n    <section className={cn(styles.container)}>\r\n      {loading && skeleton}\r\n      {error && (\r\n        <p className={cn(styles.error, \"text text_type_main-default\")}>\r\n          Ошибка загрузки данных. {error}\r\n        </p>\r\n      )}\r\n      {ingredient && (\r\n        <>\r\n          <h1 className=\"text text_type_main-large\">Детали ингредиента</h1>\r\n          <IngredientDetails ingredient={ingredient} />\r\n        </>\r\n      )}\r\n      {!error && !loading && !ingredient && (\r\n        <p className=\"text text_type_main-default\">\r\n          Увы, не удалось найти ингредиент.\r\n        </p>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n","export function NotFound404() {\r\n  return (\r\n    <div style={{ textAlign: \"center\" }}>\r\n      <p className=\"text text_type_digits-large mt-20\">\r\n        404\r\n      </p>\r\n      <p className=\"text text_type_main-medium text_color_inactive mt-5\">\r\n        Упс!\r\n      </p>\r\n      <p className=\"text text_type_main-medium text_color_inactive mt-5\">\r\n        Кажется, мы её потеряли...\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n","import { ReactNode } from \"react\";\r\nimport cn from \"classnames\";\r\nimport { useRouteMatch, Link } from \"react-router-dom\";\r\nimport { BurgerIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\r\n\r\nimport styles from \"./header-item.module.css\";\r\n\r\ninterface IHeaderItemProps {\r\n  icon: typeof BurgerIcon;\r\n  path: string;\r\n  children: ReactNode;\r\n}\r\n\r\nconst HeaderItem: React.FC<IHeaderItemProps> = ({\r\n  icon: Icon,\r\n  children,\r\n  path,\r\n}) => {\r\n  const match = useRouteMatch({ path, exact: path === \"/\" });\r\n  return (\r\n    <Link\r\n      className={cn(\r\n        styles.container,\r\n        \"text text_type_main-default pl-5 pr-5 pt-4 pb-4\"\r\n      )}\r\n      to={path}\r\n    >\r\n      <Icon type={match ? \"primary\" : \"secondary\"} />\r\n      <span className={cn({ text_color_inactive: !match }, \"ml-2\")}>\r\n        {children}\r\n      </span>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default HeaderItem;\r\n","import styles from \"./app-header.module.css\";\r\n\r\nimport { Link } from \"react-router-dom\";\r\nimport cn from \"classnames\";\r\nimport {\r\n  BurgerIcon,\r\n  ListIcon,\r\n  Logo,\r\n  ProfileIcon,\r\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\r\nimport HeaderItem from \"./header-item/header-item\";\r\n\r\nconst AppHeader: React.FC = () => {\r\n  return (\r\n    <header className={cn(styles.header)}>\r\n      <ul className={styles.content}>\r\n        <li className={styles.contentItem}>\r\n          <nav className={cn(styles.navigation, \"mt-4 mb-4\")}>\r\n            <ul>\r\n              <li>\r\n                <HeaderItem icon={BurgerIcon} path=\"/\">\r\n                  Конструктор\r\n                </HeaderItem>\r\n              </li>\r\n              <li className={cn(\"ml-2\")}>\r\n                <HeaderItem icon={ListIcon} path=\"/feed\">\r\n                  Лента заказов\r\n                </HeaderItem>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n        </li>\r\n        <li className={styles.contentItemCenter}>\r\n          <Link to=\"/\">\r\n            <Logo />\r\n          </Link>\r\n        </li>\r\n        <li className={styles.contentItemRight}>\r\n          <HeaderItem icon={ProfileIcon} path=\"/profile\">\r\n            Личный кабинет\r\n          </HeaderItem>\r\n        </li>\r\n      </ul>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default AppHeader;\r\n","import React from \"react\";\r\nimport { Redirect, Route, RouteProps } from \"react-router-dom\";\r\n\r\nimport { useAuth } from \"../services/auth\";\r\nimport Spinner from \"./spinner/spinner\";\r\n\r\ninterface IProtectedRouteProps extends RouteProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const ProtectedRoute: React.FC<IProtectedRouteProps> = ({\r\n  children,\r\n  ...rest\r\n}) => {\r\n  const { user, userLoaded } = useAuth();\r\n\r\n  if (!userLoaded) {\r\n    return <Spinner center={true} />;\r\n  }\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={({ location }) =>\r\n        user ? (\r\n          children\r\n        ) : (\r\n          <Redirect\r\n            to={{\r\n              pathname: \"/login\",\r\n              state: { from: location },\r\n            }}\r\n          />\r\n        )\r\n      }\r\n    />\r\n  );\r\n};\r\n","import { useAuth } from \"../services/auth\";\r\nimport { Redirect, Route, RouteProps } from \"react-router-dom\";\r\nimport Spinner from \"./spinner/spinner\";\r\n\r\ninterface IUnauthorizedRouteProps extends RouteProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const UnauthorizedRoute: React.FC<IUnauthorizedRouteProps> = ({\r\n  children,\r\n  ...rest\r\n}) => {\r\n  const { user, userLoaded } = useAuth();\r\n\r\n  if (!userLoaded) {\r\n    return <Spinner center={true} />;\r\n  }\r\n\r\n  return (\r\n    <Route {...rest} render={() => (user ? <Redirect to=\"/\" /> : children)} />\r\n  );\r\n};\r\n","import { memo, useCallback } from \"react\";\r\nimport { useSelector } from \"../../services/hooks\";\r\nimport { useHistory, useParams } from \"react-router-dom\";\r\n\r\nimport Modal from \"../modal/modal\";\r\nimport IngredientDetails from \"../ingredient-details/ingredient-details\";\r\n\r\nconst IngredientDetailsModal: React.FC = memo(() => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const history = useHistory();\r\n  const { items: ingredients } = useSelector((store) => store.ingredients);\r\n\r\n  const ingredient = ingredients.find(({ _id }) => _id === id) || null;\r\n\r\n  const modalOnClose = useCallback(() => {\r\n    history.goBack();\r\n  }, [history]);\r\n\r\n  return (\r\n    ingredient && (\r\n      <Modal header=\"Детали ингридиента\" visible={true} onClose={modalOnClose}>\r\n        <IngredientDetails ingredient={ingredient} />\r\n      </Modal>\r\n    )\r\n  );\r\n});\r\n\r\nexport default IngredientDetailsModal;\r\n","import { memo, useCallback } from \"react\";\r\nimport OrderInfo from \"../order-info/order-info\";\r\nimport { useHistory, useLocation, useParams } from \"react-router-dom\";\r\nimport { useSelector } from \"../../services/hooks\";\r\n\r\nimport { useOrders } from \"../../services/orders\";\r\n\r\nimport Modal from \"../modal/modal\";\r\n\r\nconst OrderInfoModal: React.FC = memo(() => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const { orders: feedOrders } = useSelector((store) => store.feed);\r\n  const { orders: profileOrders } = useSelector((store) => store.profile);\r\n\r\n  const orders = location.pathname.startsWith(\"/feed\")\r\n    ? feedOrders\r\n    : profileOrders;\r\n\r\n  const { ordersList } = useOrders(orders);\r\n\r\n  const order = ordersList.find(({ number }) => number === Number(id)) || null;\r\n\r\n  const modalOnClose = useCallback(() => {\r\n    history.goBack();\r\n  }, [history]);\r\n\r\n  const header = order && (\r\n    <div className=\"text text_type_digits-default\">#{order.number}</div>\r\n  );\r\n\r\n  return (\r\n    order && (\r\n      <Modal header={header} visible={true} onClose={modalOnClose}>\r\n        <OrderInfo order={order} isInModal={true} />\r\n      </Modal>\r\n    )\r\n  );\r\n});\r\n\r\nexport default OrderInfoModal;\r\n","import styles from \"./app.module.css\";\r\n\r\nimport {\r\n  Switch,\r\n  Route,\r\n  useLocation,\r\n  useHistory,\r\n  useRouteMatch,\r\n} from \"react-router-dom\";\r\n\r\nimport { Location } from \"history\";\r\n\r\nimport {\r\n  HomePage,\r\n  LoginPage,\r\n  RegisterPage,\r\n  ForgotPasswordPage,\r\n  ResetPasswordPage,\r\n  ProfilePage,\r\n  OrderPage,\r\n  FeedPage,\r\n  IngredientPage,\r\n  NotFound404,\r\n} from \"../../pages\";\r\nimport AppHeader from \"../app-header/app-header\";\r\nimport { ProtectedRoute } from \"../protected-route\";\r\nimport { UnauthorizedRoute } from \"../unauthorized-route\";\r\nimport IngredientDetailsModal from \"../ingredient-details-modal/ingredient-details-modal\";\r\nimport OrderInfoModal from \"../order-info-modal/order-info-modal\";\r\n\r\nconst App: React.FC = () => {\r\n  const location = useLocation<{ background?: Location }>();\r\n  // для gh-pages : при перезагрузке страницы не подхватывается URL текущей страницы. Кладем его в ?p=/feed\r\n  const customPath = new URLSearchParams(location.search).get(\"p\");\r\n  const customLocation = customPath\r\n    ? ({ pathname: customPath } as Location)\r\n    : null;\r\n  const history = useHistory();\r\n  const background = history.action === \"PUSH\" && location.state?.background;\r\n  return (\r\n    <div className={styles.app}>\r\n      <AppHeader />\r\n      <main className={styles.main}>\r\n        <Switch location={background || customLocation || location}>\r\n          <Route path=\"/\" exact={true}>\r\n            <HomePage />\r\n          </Route>\r\n          <Route path=\"/login\" exact={true}>\r\n            <LoginPage />\r\n          </Route>\r\n          <UnauthorizedRoute path=\"/register\" exact={true}>\r\n            <RegisterPage />\r\n          </UnauthorizedRoute>\r\n          <UnauthorizedRoute path=\"/forgot-password\" exact={true}>\r\n            <ForgotPasswordPage />\r\n          </UnauthorizedRoute>\r\n          <UnauthorizedRoute path=\"/reset-password\" exact={true}>\r\n            <ResetPasswordPage />\r\n          </UnauthorizedRoute>\r\n          <ProtectedRoute path=\"/profile/orders/:id\" exact={true}>\r\n            <OrderPage />\r\n          </ProtectedRoute>\r\n          <ProtectedRoute path=\"/profile\">\r\n            <ProfilePage />\r\n          </ProtectedRoute>\r\n          <Route path=\"/feed/:id\" exact={true}>\r\n            <OrderPage />\r\n          </Route>\r\n          <Route path=\"/feed\" exact={true}>\r\n            <FeedPage />\r\n          </Route>\r\n          <Route path=\"/ingredients/:id\" exact={true}>\r\n            <IngredientPage />\r\n          </Route>\r\n          <Route>\r\n            <NotFound404 />\r\n          </Route>\r\n        </Switch>\r\n      </main>\r\n      {background && (\r\n        <Route path=\"/ingredients/:id\">\r\n          <IngredientDetailsModal />\r\n        </Route>\r\n      )}\r\n      {background && (\r\n        <Route path=\"/profile/orders/:id\">\r\n          <OrderInfoModal />\r\n        </Route>\r\n      )}\r\n      {background && (\r\n        <Route path=\"/feed/:id\">\r\n          <OrderInfoModal />\r\n        </Route>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import {\r\n  GET_INGREDIENTS_REQUEST,\r\n  GET_INGREDIENTS_SUCCESS,\r\n  GET_INGREDIENTS_ERROR,\r\n} from \"../actions/ingredients\";\r\n\r\nimport { TIngredientsActions } from \"../actions/ingredients\";\r\nimport { IIngredient } from \"../types/data\";\r\n\r\nexport interface IIngredientsState {\r\n  items: IIngredient[];\r\n  itemsRequest: boolean;\r\n  itemsSuccess: boolean;\r\n  itemsErrorMessage: string;\r\n}\r\n\r\nconst ingredientsState: IIngredientsState = {\r\n  items: [],\r\n  itemsRequest: false,\r\n  itemsSuccess: false,\r\n  itemsErrorMessage: \"\",\r\n};\r\n\r\nexport const ingredientsReducer = (\r\n  state: IIngredientsState = ingredientsState,\r\n  action: TIngredientsActions\r\n) => {\r\n  switch (action.type) {\r\n    case GET_INGREDIENTS_REQUEST:\r\n      return {\r\n        ...state,\r\n        itemsRequest: true,\r\n        itemsSuccess: false,\r\n        itemsErrorMessage: \"\",\r\n      };\r\n\r\n    case GET_INGREDIENTS_SUCCESS:\r\n      return {\r\n        ...state,\r\n        itemsRequest: false,\r\n        itemsSuccess: true,\r\n        itemsErrorMessage: \"\",\r\n        items: action.items,\r\n      };\r\n\r\n    case GET_INGREDIENTS_ERROR:\r\n      return {\r\n        ...state,\r\n        itemsRequest: false,\r\n        itemsSuccess: false,\r\n        itemsErrorMessage: action.message,\r\n        items: [],\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  ADD_CONSTRUCTOR_INGREDIENT,\r\n  REMOVE_CONSTRUCTOR_INGREDIENT,\r\n  REORDER_CONSTRUCTOR_INGREDIENTS,\r\n  CLEAR_CONSTRUCTOR,\r\n} from \"../actions/constructor\";\r\n\r\nimport { TConstructorActions } from \"../actions/constructor\";\r\nimport { IIngredient, IConstructorIngredient } from \"../types/data\";\r\n\r\nfunction countTotalPrice(\r\n  items: IConstructorIngredient[] = [],\r\n  bunItem: IIngredient | null\r\n) {\r\n  return (\r\n    items.reduce((prev, value) => prev + value.price, 0) +\r\n    (bunItem?.price || 0) * 2\r\n  );\r\n}\r\n\r\nexport interface IConstructorState {\r\n  items: IConstructorIngredient[];\r\n  bunItem: IIngredient | null;\r\n  totalPrice: number;\r\n}\r\n\r\nconst constructorState: IConstructorState = {\r\n  items: [],\r\n  bunItem: null,\r\n  totalPrice: 0,\r\n};\r\n\r\nexport const constructorReducer = (\r\n  state: IConstructorState = constructorState,\r\n  action: TConstructorActions\r\n) => {\r\n  switch (action.type) {\r\n    case ADD_CONSTRUCTOR_INGREDIENT:\r\n      const item = action.item;\r\n\r\n      if (item.type === \"bun\") {\r\n        return {\r\n          ...state,\r\n          bunItem: item,\r\n          totalPrice: countTotalPrice(state.items, item),\r\n        };\r\n      } else {\r\n        const items = [\r\n          ...state.items,\r\n          {\r\n            ...item,\r\n            key: item._id + new Date().getTime(),\r\n          },\r\n        ];\r\n        return {\r\n          ...state,\r\n          items,\r\n          totalPrice: countTotalPrice(items, state.bunItem),\r\n        };\r\n      }\r\n\r\n    case REMOVE_CONSTRUCTOR_INGREDIENT:\r\n      const items = state.items.filter(({ key }) => key !== action.item.key);\r\n      return {\r\n        ...state,\r\n        items,\r\n        totalPrice: countTotalPrice(items, state.bunItem),\r\n      };\r\n\r\n    case REORDER_CONSTRUCTOR_INGREDIENTS: {\r\n      const items = state.items;\r\n      const dropItem = items[action.dropIndex];\r\n\r\n      return {\r\n        ...state,\r\n        items: [\r\n          ...items\r\n            .slice(0, action.hoverIndex + 1)\r\n            .filter(({ key }) => key !== dropItem.key),\r\n          dropItem,\r\n          ...items\r\n            .slice(action.hoverIndex + 1)\r\n            .filter(({ key }) => key !== dropItem.key),\r\n        ],\r\n      };\r\n    }\r\n\r\n    case CLEAR_CONSTRUCTOR:\r\n      return constructorState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  CHECKOUT_ORDER_REQUEST,\r\n  CHECKOUT_ORDER_SUCCESS,\r\n  CHECKOUT_ORDER_ERROR,\r\n  CLEAR_ORDER,\r\n} from \"../actions/order\";\r\n\r\nimport { TOrderActions } from \"../actions/order\";\r\n\r\nexport interface IOrderState {\r\n  number: number | null;\r\n  checkoutRequest: boolean;\r\n  checkoutSuccess: boolean;\r\n  checkoutErrorMessage: string;\r\n}\r\n\r\nconst orderState: IOrderState = {\r\n  number: null,\r\n  checkoutRequest: false,\r\n  checkoutSuccess: false,\r\n  checkoutErrorMessage: \"\",\r\n};\r\n\r\nexport const orderReducer = (\r\n  state: IOrderState = orderState,\r\n  action: TOrderActions\r\n) => {\r\n  switch (action.type) {\r\n    case CHECKOUT_ORDER_REQUEST:\r\n      return {\r\n        ...state,\r\n        checkoutRequest: true,\r\n        checkoutSuccess: false,\r\n        checkoutErrorMessage: \"\",\r\n        number: null,\r\n      };\r\n\r\n    case CHECKOUT_ORDER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        checkoutRequest: false,\r\n        checkoutSuccess: true,\r\n        number: action.number,\r\n      };\r\n\r\n    case CHECKOUT_ORDER_ERROR:\r\n      return {\r\n        ...state,\r\n        checkoutRequest: false,\r\n        checkoutSuccess: false,\r\n        checkoutErrorMessage: action.message,\r\n      };\r\n\r\n    case CLEAR_ORDER:\r\n      return orderState;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  GET_USER_REQUEST,\r\n  GET_USER_SUCCESS,\r\n  GET_USER_ERROR,\r\n  SET_USER,\r\n  CLEAR_USER,\r\n} from \"../actions/user\";\r\n\r\nimport { TUserActions } from \"../actions/user\";\r\nimport { IUser } from \"../types/data\";\r\n\r\nexport interface IUserState {\r\n  user: IUser | null;\r\n  userRequest: boolean;\r\n  userSuccess: boolean;\r\n  userErrorMessage: string;\r\n}\r\n\r\nconst userState: IUserState = {\r\n  user: null,\r\n  userRequest: false,\r\n  userSuccess: false,\r\n  userErrorMessage: \"\",\r\n};\r\n\r\nexport const userReducer = (\r\n  state: IUserState = userState,\r\n  action: TUserActions\r\n) => {\r\n  switch (action.type) {\r\n    case GET_USER_REQUEST:\r\n      return {\r\n        ...state,\r\n        userRequest: true,\r\n        userSuccess: false,\r\n        userErrorMessage: \"\",\r\n        user: null,\r\n      };\r\n\r\n    case GET_USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        userRequest: false,\r\n        userSuccess: true,\r\n        userErrorMessage: \"\",\r\n        user: action.user,\r\n      };\r\n\r\n    case GET_USER_ERROR:\r\n      return {\r\n        ...state,\r\n        userRequest: false,\r\n        userSuccess: false,\r\n        userErrorMessage: action.message,\r\n        user: null,\r\n      };\r\n\r\n    case SET_USER:\r\n      return {\r\n        ...state,\r\n        user: action.user,\r\n      };\r\n\r\n    case CLEAR_USER:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  WS_FEED_CONNECTION_SUCCESS,\r\n  WS_FEED_CONNECTION_ERROR,\r\n  WS_FEED_CONNECTION_CLOSED,\r\n  WS_FEED_GET_MESSAGE,\r\n  TWsFeedActions,\r\n} from \"../actions/ws-feed\";\r\nimport { IOrder } from \"../types/data\";\r\n\r\nexport interface IWsFeedState {\r\n  orders: IOrder[];\r\n  total: number;\r\n  totalToday: number;\r\n  wsConnected: boolean;\r\n  wsError: string;\r\n}\r\n\r\nconst initialState: IWsFeedState = {\r\n  wsConnected: false,\r\n  wsError: \"\",\r\n  orders: [],\r\n  total: 0,\r\n  totalToday: 0,\r\n};\r\n\r\nexport const wsFeedReducer = (\r\n  state: IWsFeedState = initialState,\r\n  action: TWsFeedActions\r\n) => {\r\n  switch (action.type) {\r\n    case WS_FEED_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        wsError: \"\",\r\n        wsConnected: true,\r\n      };\r\n\r\n    case WS_FEED_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        wsError: action.payload.message,\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_FEED_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        wsError: \"\",\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_FEED_GET_MESSAGE:\r\n      if (action.payload.message) {\r\n        return {\r\n          ...state,\r\n          wsError: action.payload.message,\r\n          orders: [],\r\n          total: 0,\r\n          totalToday: 0,\r\n        };\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        wsError: \"\",\r\n        orders: action.payload.orders,\r\n        total: action.payload.total,\r\n        totalToday: action.payload.totalToday,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  WS_PROFILE_CONNECTION_SUCCESS,\r\n  WS_PROFILE_CONNECTION_ERROR,\r\n  WS_PROFILE_CONNECTION_CLOSED,\r\n  WS_PROFILE_GET_MESSAGE,\r\n} from \"../actions/ws-profile\";\r\n\r\nimport { TWsProfileActions } from \"../actions/ws-profile\";\r\nimport { IOrder } from \"../types/data\";\r\n\r\nexport interface IWsProfileState {\r\n  orders: IOrder[];\r\n  wsConnected: boolean;\r\n  wsError: string;\r\n}\r\n\r\nconst initialState: IWsProfileState = {\r\n  wsConnected: false,\r\n  wsError: \"\",\r\n  orders: [],\r\n};\r\n\r\nexport const wsProfileReducer = (\r\n  state: IWsProfileState = initialState,\r\n  action: TWsProfileActions\r\n) => {\r\n  switch (action.type) {\r\n    case WS_PROFILE_CONNECTION_SUCCESS:\r\n      return {\r\n        ...state,\r\n        wsError: \"\",\r\n        wsConnected: true,\r\n      };\r\n\r\n    case WS_PROFILE_CONNECTION_ERROR:\r\n      return {\r\n        ...state,\r\n        wsError: action.payload.message,\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_PROFILE_CONNECTION_CLOSED:\r\n      return {\r\n        ...state,\r\n        wsError: \"\",\r\n        wsConnected: false,\r\n      };\r\n\r\n    case WS_PROFILE_GET_MESSAGE:\r\n      if (action.payload.message) {\r\n        return {\r\n          ...state,\r\n          wsError: action.payload.message,\r\n          orders: [],\r\n        };\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        wsError: \"\",\r\n        orders: action.payload.orders,\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers } from \"redux\";\r\nimport { ingredientsReducer } from \"./ingredients\";\r\nimport { constructorReducer } from \"./constructor\";\r\nimport { orderReducer } from \"./order\";\r\nimport { userReducer } from \"./user\";\r\nimport { wsFeedReducer } from \"./ws-feed\";\r\nimport { wsProfileReducer } from \"./ws-profile\";\r\n\r\nexport const rootReducer = combineReducers({\r\n  ingredients: ingredientsReducer,\r\n  construct: constructorReducer,\r\n  order: orderReducer,\r\n  user: userReducer,\r\n  feed: wsFeedReducer,\r\n  profile: wsProfileReducer,\r\n});\r\n","import { Middleware, Dispatch } from \"redux\";\r\nimport { getCookie } from \"./utils\";\r\nimport { refreshToken } from \"./api\";\r\nimport { rootReducer } from \"./reducers\";\r\nimport {\r\n  WS_FEED_CONNECTION_START,\r\n  WS_FEED_CONNECTION_CLOSE,\r\n  WS_FEED_SEND_MESSAGE,\r\n  WS_FEED_CONNECTION_SUCCESS,\r\n  WS_FEED_CONNECTION_CLOSED,\r\n  WS_FEED_CONNECTION_ERROR,\r\n  WS_FEED_GET_MESSAGE,\r\n  TWsFeedActions,\r\n} from \"./actions/ws-feed\";\r\n\r\nimport {\r\n  WS_PROFILE_CONNECTION_START,\r\n  WS_PROFILE_CONNECTION_CLOSE,\r\n  WS_PROFILE_SEND_MESSAGE,\r\n  WS_PROFILE_CONNECTION_SUCCESS,\r\n  WS_PROFILE_CONNECTION_CLOSED,\r\n  WS_PROFILE_CONNECTION_ERROR,\r\n  WS_PROFILE_GET_MESSAGE,\r\n  TWsProfileActions,\r\n} from \"./actions/ws-profile\";\r\n\r\ntype TWsActions = {\r\n  wsInit: typeof WS_FEED_CONNECTION_START | typeof WS_PROFILE_CONNECTION_START;\r\n  wsClose: typeof WS_FEED_CONNECTION_CLOSE | typeof WS_PROFILE_CONNECTION_CLOSE;\r\n  wsSendMessage: typeof WS_FEED_SEND_MESSAGE | typeof WS_PROFILE_SEND_MESSAGE;\r\n  onOpen:\r\n    | typeof WS_FEED_CONNECTION_SUCCESS\r\n    | typeof WS_PROFILE_CONNECTION_SUCCESS;\r\n  onClose:\r\n    | typeof WS_FEED_CONNECTION_CLOSED\r\n    | typeof WS_PROFILE_CONNECTION_CLOSED;\r\n  onError: typeof WS_FEED_CONNECTION_ERROR | typeof WS_PROFILE_CONNECTION_ERROR;\r\n  onMessage: typeof WS_FEED_GET_MESSAGE | typeof WS_PROFILE_GET_MESSAGE;\r\n};\r\n\r\nexport const socketMiddleware = (\r\n  wsUrl: string,\r\n  wsActions: TWsActions,\r\n  useToken?: boolean\r\n): Middleware<\r\n  {},\r\n  ReturnType<typeof rootReducer>,\r\n  Dispatch<TWsFeedActions | TWsProfileActions>\r\n> => {\r\n  return (store) => {\r\n    let socket: WebSocket | null = null;\r\n\r\n    return (next) => (action) => {\r\n      const { dispatch } = store;\r\n      const { type, payload } = action;\r\n      const {\r\n        wsInit,\r\n        wsClose,\r\n        wsSendMessage,\r\n        onOpen,\r\n        onClose,\r\n        onError,\r\n        onMessage,\r\n      } = wsActions;\r\n      if (type === wsInit) {\r\n        let url = wsUrl;\r\n        if (useToken) {\r\n          const accessToken = getCookie(\"accessToken\");\r\n          url += `?token=${accessToken}`;\r\n        }\r\n        socket = new WebSocket(url);\r\n      }\r\n      if (socket) {\r\n        socket.onopen = (event) => {\r\n          dispatch({ type: onOpen, payload: event });\r\n        };\r\n\r\n        socket.onerror = (event) => {\r\n          dispatch({\r\n            type: onError,\r\n            payload: { message: \"Ошибка соединения\" },\r\n          });\r\n        };\r\n\r\n        socket.onmessage = (event) => {\r\n          const { data } = event;\r\n          const parsedData = JSON.parse(data);\r\n          const { success, ...restParsedData } = parsedData;\r\n\r\n          if (\r\n            restParsedData.message &&\r\n            restParsedData.message === \"Invalid or missing token\" &&\r\n            socket\r\n          ) {\r\n            socket.close();\r\n            refreshToken().then(() => {\r\n              dispatch({ type: wsInit });\r\n            });\r\n          } else {\r\n            dispatch({ type: onMessage, payload: restParsedData });\r\n          }\r\n        };\r\n\r\n        socket.onclose = (event) => {\r\n          dispatch({ type: onClose });\r\n        };\r\n\r\n        if (type === wsSendMessage) {\r\n          const message = { ...payload };\r\n          socket.send(JSON.stringify(message));\r\n        }\r\n\r\n        if (type === wsClose) {\r\n          socket.close();\r\n          socket = null;\r\n        }\r\n      }\r\n\r\n      next(action);\r\n    };\r\n  };\r\n};\r\n","import { compose, createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport { rootReducer } from \"./reducers\";\r\nimport { socketMiddleware } from \"./socket-middleware\";\r\nimport {\r\n  WS_FEED_CONNECTION_START,\r\n  WS_FEED_CONNECTION_CLOSE,\r\n  WS_FEED_SEND_MESSAGE,\r\n  WS_FEED_CONNECTION_SUCCESS,\r\n  WS_FEED_CONNECTION_CLOSED,\r\n  WS_FEED_CONNECTION_ERROR,\r\n  WS_FEED_GET_MESSAGE,\r\n} from \"./actions/ws-feed\";\r\n\r\nimport {\r\n  WS_PROFILE_CONNECTION_START,\r\n  WS_PROFILE_CONNECTION_CLOSE,\r\n  WS_PROFILE_SEND_MESSAGE,\r\n  WS_PROFILE_CONNECTION_SUCCESS,\r\n  WS_PROFILE_CONNECTION_CLOSED,\r\n  WS_PROFILE_CONNECTION_ERROR,\r\n  WS_PROFILE_GET_MESSAGE,\r\n} from \"./actions/ws-profile\";\r\n\r\nconst wsFeedOrders = {\r\n  url: \"wss://norma.nomoreparties.space/orders/all\",\r\n  actions: {\r\n    wsInit: WS_FEED_CONNECTION_START,\r\n    wsClose: WS_FEED_CONNECTION_CLOSE,\r\n    wsSendMessage: WS_FEED_SEND_MESSAGE,\r\n    onOpen: WS_FEED_CONNECTION_SUCCESS,\r\n    onClose: WS_FEED_CONNECTION_CLOSED,\r\n    onError: WS_FEED_CONNECTION_ERROR,\r\n    onMessage: WS_FEED_GET_MESSAGE,\r\n  },\r\n};\r\n\r\nconst wsProfileOrders = {\r\n  url: \"wss://norma.nomoreparties.space/orders\",\r\n  actions: {\r\n    wsInit: WS_PROFILE_CONNECTION_START,\r\n    wsClose: WS_PROFILE_CONNECTION_CLOSE,\r\n    wsSendMessage: WS_PROFILE_SEND_MESSAGE,\r\n    onOpen: WS_PROFILE_CONNECTION_SUCCESS,\r\n    onClose: WS_PROFILE_CONNECTION_CLOSED,\r\n    onError: WS_PROFILE_CONNECTION_ERROR,\r\n    onMessage: WS_PROFILE_GET_MESSAGE,\r\n  },\r\n};\r\n\r\ndeclare global {\r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n  }\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst enhancer = composeEnhancers(\r\n  applyMiddleware(\r\n    thunk,\r\n    socketMiddleware(wsFeedOrders.url, wsFeedOrders.actions),\r\n    socketMiddleware(wsProfileOrders.url, wsProfileOrders.actions, true)\r\n  )\r\n);\r\n\r\nexport default createStore(rootReducer, enhancer);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./components/app/app\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport store from \"./services/store\";\r\nimport { Provider } from \"react-redux\";\r\n/** */\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <Router basename=\"./\">\r\n        <App />\r\n      </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"feed_container__3FFys\",\"content\":\"feed_content__2E5Lm\",\"orderList\":\"feed_orderList__2hkH1\",\"statistic\":\"feed_statistic__2hEME\",\"statisticGrid\":\"feed_statisticGrid__S1kqS\",\"statisticGridItem\":\"feed_statisticGridItem__uSPWc\",\"statisticGridItemList\":\"feed_statisticGridItemList__V5ezI\",\"success\":\"feed_success__2FCpK\",\"error\":\"feed_error__2z11Q\",\"skeletonOrder\":\"feed_skeletonOrder__-fkNx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-ingredients_container__1mIzx\",\"tabs\":\"burger-ingredients_tabs__3RiDP\",\"ingredientList\":\"burger-ingredients_ingredientList__2McjM\",\"ingredients\":\"burger-ingredients_ingredients__FlEt5\",\"ingredient\":\"burger-ingredients_ingredient__nSw7g\",\"enter\":\"burger-ingredients_enter__2YIl2\",\"enterActive\":\"burger-ingredients_enterActive__3FYmj\",\"exit\":\"burger-ingredients_exit__2hgk6\",\"exitActive\":\"burger-ingredients_exitActive__yRGtd\",\"hidden\":\"burger-ingredients_hidden__wLGPj\",\"error\":\"burger-ingredients_error__2OzX3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"app_app__N3KUB\",\"main\":\"app_main__De77e\",\"customScrollbar\":\"app_customScrollbar__1OJ9p\",\"textSpaceShadow\":\"app_textSpaceShadow__2STRd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"burger-constructor_container__12ryR\",\"elements\":\"burger-constructor_elements__1X2Yg\",\"dragMessage\":\"burger-constructor_dragMessage__3m0nf\",\"dragMessageOver\":\"burger-constructor_dragMessageOver__34pC3\",\"elementsScroll\":\"burger-constructor_elementsScroll__18Kg0 burger-constructor_elements__1X2Yg\",\"footer\":\"burger-constructor_footer__18uQK\",\"error\":\"burger-constructor_error__cqVgS\",\"center\":\"burger-constructor_center__2CIEi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-item_container__1_AMh\",\"header\":\"order-item_header__1yTmV\",\"statusDone\":\"order-item_statusDone__1JFDa\",\"footer\":\"order-item_footer__1R1Xa\",\"ingredientList\":\"order-item_ingredientList__iKBJ1\",\"ingredient\":\"order-item_ingredient__GYD5e\",\"price\":\"order-item_price__1xwt1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-info_container__3j5pD\",\"statusDone\":\"order-info_statusDone__RmVZe\",\"footer\":\"order-info_footer__2unYS\",\"ingredientList\":\"order-info_ingredientList__3n_en\",\"ingredient\":\"order-info_ingredient__2ChiD\",\"ingredientName\":\"order-info_ingredientName__1Vot-\",\"price\":\"order-info_price__1y9Tc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order_container__1D9c6\",\"center\":\"order_center__1w7od\",\"error\":\"order_error__1crqc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__3Q8lN\",\"content\":\"app-header_content__V_W1P\",\"contentItem\":\"app-header_contentItem__39A0D\",\"contentItemCenter\":\"app-header_contentItemCenter__113Z0 app-header_contentItem__39A0D\",\"contentItemRight\":\"app-header_contentItemRight__1dy55 app-header_contentItem__39A0D\",\"navigation\":\"app-header_navigation__2KFAa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"modal_container__24Uof\",\"title\":\"modal_title__juNYG\",\"content\":\"modal_content__1rDqk app_customScrollbar__1OJ9p\",\"closeButton\":\"modal_closeButton__3MFAw\",\"hidden\":\"modal_hidden__2soD5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient-details_container__3JN8n\",\"title\":\"ingredient-details_title__2-6tF\",\"image\":\"ingredient-details_image__xBBcD\",\"imagePreloader\":\"ingredient-details_imagePreloader__2AHTo ingredient-details_image__xBBcD\",\"content\":\"ingredient-details_content__17UrE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient_container__1h4hK\",\"price\":\"ingredient_price__-Ql3n\",\"title\":\"ingredient_title__1-oer\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"spinner\":\"spinner_spinner__1L3cA\",\"rotate\":\"spinner_rotate__2FOQ8\",\"spinnerCenter\":\"spinner_spinnerCenter__3JlQD\",\"circle\":\"spinner_circle__2yHIr\",\"dash\":\"spinner_dash__3PLeA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"register_container__3seLH\",\"error\":\"register_error__2zjTx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"reset-password_container__1NZjq\",\"error\":\"reset-password_error__21m5H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"profile-form_form__2f_Ue\",\"formFooter\":\"profile-form_formFooter__2r_iT\",\"error\":\"profile-form_error__1_0MN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"ingredient-avatar_ingredient__2Kp_K\",\"ingredientImage\":\"ingredient-avatar_ingredientImage__2xVUb\",\"ingredientFg\":\"ingredient-avatar_ingredientFg__1xBgW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"skeleton\":\"skeleton_skeleton__1esC8\",\"circle\":\"skeleton_circle__Zt_Ou\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"order-details_container__1czLA\",\"title\":\"order-details_title__3cyFa app_textSpaceShadow__2STRd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"modal-overlay_container__g25Pp\",\"hidden\":\"modal-overlay_hidden__23bD2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"drag-element_container__33BrS\",\"dragItem\":\"drag-element_dragItem__1bYcd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"login_container__1tr7a\",\"error\":\"login_error__Dos9R\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"forgot-password_container__162dR\",\"error\":\"forgot-password_error__BYfxt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ingredient_container__2oMZM\",\"error\":\"ingredient_error__1zWw_\"};"],"sourceRoot":""}