(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{109:function(e,t,r){e.exports={container:"header-item_container__rqenJ"}},117:function(e,t,r){},16:function(e,t,r){e.exports={container:"profile_container__2srQK",menu:"profile_menu__1__XZ",menuItem:"profile_menuItem__lVgDN",menuItemActive:"profile_menuItemActive__a_SQV",menuFooter:"profile_menuFooter__27Xhl",orderList:"profile_orderList__3X4Yq",error:"profile_error__3jZER",skeletonOrder:"profile_skeletonOrder__2z85r"}},191:function(e,t,r){},192:function(e,t,r){},193:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(39),s=r.n(a),i=r(8),o=(r(117),r(26)),u=r.n(o),l=r(13),d=r(198),j=r(111),m=r(7),b=r(24),p=r.n(b),O=r(25),x=function(){return Object(O.b)()},f=O.c,h=r(3),_=r.n(h),g=r(6),v=r(56),y=r.n(v),N=r(199),E=r(0),S=Object(n.memo)((function(e){var t=e.className,r=e.item,n=e.count,c=void 0===n?0:n,a=e.onClick,s=void 0===a?function(){}:a,i=r.name,o=r.price,u=r.image,l=Object(N.a)({type:"ingredient",item:r}),d=Object(m.a)(l,2)[1];return Object(E.jsxs)("section",{className:_()(y.a.container,t),onClick:function(e){return s(e,r)},ref:d,"data-test-id":"ingredient-".concat(r._id),children:[c>0&&Object(E.jsx)(g.Counter,{count:c,size:"default"}),Object(E.jsx)("img",{src:u,width:240,height:120,className:"mb-1",alt:i}),Object(E.jsxs)("p",{className:_()(y.a.price,"text text_type_digits-default mb-1"),children:[Object(E.jsx)("span",{className:"mr-2",children:o}),Object(E.jsx)(g.CurrencyIcon,{type:"primary"})]}),Object(E.jsx)("p",{className:_()(y.a.title,"text text_type_main-default"),children:i})]})})),w=r(12),I=r(2),C=r(81),k=r.n(C),R=function(e){var t=e.width,r=e.height,n=e.className,c=e.circle,a=void 0!==c&&c,s=e.repeat,i=void 0===s?1:s,o=e.tag,u=void 0===o?"div":o,l=Object(I.a)(Object(I.a)(Object(I.a)({},t?{width:t}:{}),a?{height:t}:{}),r?{height:r}:{}),d=_()(k.a.skeleton,n,Object(w.a)({},k.a.circle,a));return i>1?Object(E.jsx)(E.Fragment,{children:Array(i).fill(null).map((function(e,t){return Object(E.jsx)(u,{className:d,style:Object(I.a)({},l),children:"\xa0"},t)}))}):Object(E.jsx)(u,{className:d,style:Object(I.a)({},l),children:"\xa0"})};function T(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[]\\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function L(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.expires;if("number"==typeof n&&n){var c=new Date;c.setTime(c.getTime()+1e3*n),n=r.expires=c}n&&n instanceof Date&&(r.expires=n.toUTCString()),r.path="/";var a=e+"="+(t=encodeURIComponent(t));for(var s in r){a+="; "+s;var i=r[s];!0!==i&&(a+="="+i)}document.cookie=a}function M(e){L(e,"",{expires:-1})}function D(e,t){for(var r in e){if(e.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;switch(typeof e[r]){case"object":if(!D(e[r],t[r]))return!1;break;case"function":if("undefined"==typeof t[r]||"compare"!==r&&e[r].toString()!==t[r].toString())return!1;break;default:if(e[r]!==t[r])return!1}}for(var n in t)if("undefined"==typeof e[n])return!1;return!0}function q(e){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0);var r=new Date(e),n=r.getHours()-r.getUTCHours(),c=r.getHours().toString().padStart(2,"0"),a=r.getMinutes().toString().padStart(2,"0"),s="";if(r.getTime()>t.getTime()+864e5)s=r.toLocaleDateString();else if(r>t)s="\u0421\u0435\u0433\u043e\u0434\u043d\u044f";else if(r.getTime()>t.getTime()-864e5)s="\u0412\u0447\u0435\u0440\u0430";else{var i=Math.ceil((t.getTime()-r.getTime())/864e5);s="".concat(i," ").concat(function(e,t){var r=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:r>1&&r<5?t[1]:1===r?t[0]:t[2]}(i,["\u0434\u0435\u043d\u044c","\u0434\u043d\u044f","\u0434\u043d\u0435\u0439"])," \u043d\u0430\u0437\u0430\u0434")}return"".concat(s,", ").concat(c,":").concat(a," i-GMT").concat(n>0?"+":"").concat(n)}var F={linear:function(e){return e},easeIn:function(e){return Math.pow(e,1.675)},easeOut:function(e){return 1-Math.pow(1-e,1.675)},easeInOut:function(e){return.5*(Math.sin((e-.5)*Math.PI)+1)}};function A(e){var t=e.timing,r=void 0===t?"easeInOut":t,n=e.draw,c=e.duration,a=performance.now(),s=F[r];return new Promise((function(e){requestAnimationFrame((function t(r){var i=(r-a)/c;i>1&&(i=1),i<0&&(i=0);var o=s(i);n(o),i<1?requestAnimationFrame(t):e(!0)}))}))}function G(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e}),[e]),t.current}var P=r(32);function B(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=r.exclude,a=void 0===c?[]:c,s=r.props,i=void 0===s?[]:s,o=r.maxHeight,l=r.isInModal;t=a instanceof Array?a:[a],Object(n.useLayoutEffect)((function(){var r=e.current;if(r){var n=t.reduce((function(e,t){var r=t.current;if(!r)return e;var n=getComputedStyle(r);return e+r.offsetHeight+parseInt(n.marginTop)+parseInt(n.marginBottom)}),0),c=l?"(5vh + 41px)":"0px",a=r.getBoundingClientRect().top,s="(".concat(c," + ").concat(Math.ceil(a+n),"px)");return r.style.maxHeight=o?"calc(min(100vh - ".concat(s,", \n      ").concat(o,"px))"):"calc(100vh - ".concat(s,")"),r.classList.add(u.a.customScrollbar),function(){r.classList.remove(u.a.customScrollbar),r.style.maxHeight=""}}}),[e,o,l,t].concat(Object(P.a)(i)))}var U=r(5),H=r.n(U),W=r(9),V="https://norma.nomoreparties.space/api",J={ingredients:"".concat(V,"/ingredients"),orders:"".concat(V,"/orders"),auth:{login:"".concat(V,"/auth/login"),register:"".concat(V,"/auth/register"),logout:"".concat(V,"/auth/logout"),token:"".concat(V,"/auth/token"),user:"".concat(V,"/auth/user")},password:{resetCheck:"".concat(V,"/password-reset"),reset:"".concat(V,"/password-reset/reset")}};function Q(e){switch(e){case"email or password are incorrect":return"\u0412\u0432\u0435\u0434\u0435\u043d\u044b \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0435 Email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c";case"Incorrect reset token":return"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u0434\u043b\u044f \u0441\u0431\u0440\u043e\u0441\u0430 \u043f\u0430\u0440\u043e\u043b\u044f";default:return e}}function X(e){return z.apply(this,arguments)}function z(){return(z=Object(W.a)(H.a.mark((function e(t){var r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.prev=1,e.next=4,t.json();case 4:r=e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:if(!r||r.success){e.next=12;break}throw r.message=Q(r.message),r;case 12:if(t.ok){e.next=14;break}throw new Error("\u0421\u0442\u0430\u0442\u0443\u0441: ".concat(t.status));case 14:if(r){e.next=16;break}throw new Error("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043e\u0442\u0432\u0435\u0442\u0430");case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function K(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(W.a)(H.a.mark((function e(t,r){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 2:return n=e.sent,e.abrupt("return",X(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){var t=e.accessToken,r=e.refreshToken;t&&L("accessToken",t=t.split("Bearer ")[1]),localStorage.setItem("refreshToken",r)}function $(){return ee.apply(this,arguments)}function ee(){return(ee=Object(W.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(J.auth.token,{token:localStorage.getItem("refreshToken")});case 2:return Y(t=e.sent),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return re.apply(this,arguments)}function re(){return(re=Object(W.a)(H.a.mark((function e(t){var r,n,c,a,s,i,o,u=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},n=r.params,c=void 0===n?{}:n,a=r.method,s=void 0===a?"GET":a,e.prev=1,i={method:s,headers:{"Content-Type":"application/json",Authorization:"Bearer "+T("accessToken")}},"GET"!==s&&(i.body=JSON.stringify(c)),e.next=6,fetch(t,i);case 6:return o=e.sent,e.next=9,X(o);case 9:return e.abrupt("return",e.sent);case 12:if(e.prev=12,e.t0=e.catch(1),"jwt expired"!==e.t0.message){e.next=20;break}return e.next=17,$();case 17:return e.abrupt("return",te(t,{params:c,method:s}));case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function ne(){return ce.apply(this,arguments)}function ce(){return(ce=Object(W.a)(H.a.mark((function e(){var t,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(J.ingredients);case 2:return t=e.sent,e.next=5,X(t);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return se.apply(this,arguments)}function se(){return(se=Object(W.a)(H.a.mark((function e(){var t,r=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],e.next=3,te(J.orders,{method:"POST",params:{ingredients:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return oe.apply(this,arguments)}function oe(){return(oe=Object(W.a)(H.a.mark((function e(t){var r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(J.auth.login,t);case 2:return Y(r=e.sent),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return le.apply(this,arguments)}function le(){return(le=Object(W.a)(H.a.mark((function e(){var t;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(J.auth.logout,{token:localStorage.getItem("refreshToken")});case 2:return t=e.sent,M("accessToken"),localStorage.removeItem("refreshToken"),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(W.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(J.auth.register,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return me.apply(this,arguments)}function me(){return(me=Object(W.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(J.password.resetCheck,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(W.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(J.password.reset,t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(){return xe.apply(this,arguments)}function xe(){return(xe=Object(W.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(J.auth.user);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return he.apply(this,arguments)}function he(){return(he=Object(W.a)(H.a.mark((function e(t){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(J.auth.user,{method:"PATCH",params:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return(_e=Object(W.a)(H.a.mark((function e(t){var r,n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J.orders,"/").concat(t));case 2:return r=e.sent,e.next=5,X(r);case 5:return n=e.sent,e.abrupt("return",n.orders[0]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ge="GET_INGREDIENTS_REQUEST",ve="GET_INGREDIENTS_SUCCESS",ye="GET_INGREDIENTS_ERROR",Ne=function(){return function(){var e=Object(W.a)(H.a.mark((function e(t){var r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ge}),e.prev=1,e.next=4,ne();case 4:r=e.sent,t({type:ve,items:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:ye,message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},Ee={bun:"\u0411\u0443\u043b\u043a\u0438",sauce:"\u0421\u043e\u0443\u0441\u044b",main:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"},Se=function(){var e=Object(n.useState)("bun"),t=Object(m.a)(e,2),r=t[0],c=t[1],a=x(),s=Object(l.h)(),o=f((function(e){return e.ingredients})),u=o.items,d=o.itemsErrorMessage,j=o.itemsRequest,b=f((function(e){return e.construct})),O=b.items,h=b.bunItem,v=Object(n.useRef)(null);B(v);var y=Object(n.useMemo)((function(){return u.reduce((function(e,t){return h&&t._id===h._id?(e[t._id]=2,e):(e[t._id]=O.filter((function(e){return e._id===t._id})).length,e)}),{})}),[u,O,h]);Object(n.useLayoutEffect)((function(){0===u.length&&a(Ne())}),[a,u.length]);Object(n.useEffect)((function(){var e=v.current;if(e){var t=e.offsetHeight,r=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var t=e.target;c(t.dataset.group||"bun")}}))}),{root:e,rootMargin:"-130px 0px ".concat(130-t,"px 0px")}),n=e.querySelectorAll("[data-group]");return n.forEach((function(e){return r.observe(e)})),function(){return n.forEach((function(e){return r.unobserve(e)}))}}}),[u]);var N=Object(n.useMemo)((function(){return Object(E.jsx)("ul",{className:_()(p.a.ingredients,"mt-10"),"data-test-id":"ingredients-skeleton",children:Object(E.jsxs)("li",{children:[Object(E.jsx)(R,{width:100,className:"text text_type_main-medium"}),Object(E.jsx)("div",{className:_()(p.a.ingredientList,"pl-4 pr-4 pt-6 pb-2"),children:Object(E.jsx)(R,{height:200,repeat:2,className:_()(p.a.ingredient,"mb-8 mt-4")})})]})})}),[]);return Object(E.jsxs)("section",{className:_()(p.a.container,"mr-10"),children:[Object(E.jsx)("h1",{className:"text text_type_main-large text mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(E.jsx)("section",{className:p.a.tabs,children:Object.entries(Ee).map((function(e){var t=Object(m.a)(e,2),n=t[0],c=t[1];return Object(E.jsx)(g.Tab,{value:n,active:n===r,onClick:function(){return function(e){var t=v.current;if(t){var r=t.querySelector('[data-group="'.concat(e,'"]')),n=t.scrollTop,c=(null===r||void 0===r?void 0:r.offsetTop)||0;A({draw:function(e){t.scrollTop=n+(c-n)*e},duration:400})}}(n)},children:c},n)}))}),d&&Object(E.jsxs)("p",{className:_()(p.a.error,"text text_type_main-default mt-15"),children:["\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u0430\u0439\u0442\u0438 \u0435\u0449\u0435 \u0440\u0430\u0437 \u043f\u043e\u0437\u0436\u0435. ",d]}),j&&N,Object(E.jsx)("ul",{className:_()(p.a.ingredients,"mt-10"),ref:v,children:Object(n.useMemo)((function(){return u.length>0&&Object.entries(Ee).map((function(e){var t=Object(m.a)(e,2),r=t[0],n=t[1];return Object(E.jsxs)("li",{"data-group":r,children:[Object(E.jsx)("h2",{className:"text text_type_main-medium",children:n}),Object(E.jsx)("ul",{className:_()(p.a.ingredientList,"pl-4 pr-4 pt-6 pb-2"),children:u.filter((function(e){return e.type===r})).map((function(e,t){return Object(E.jsx)("li",{className:_()(p.a.ingredient,"mb-8"),children:Object(E.jsx)(i.b,{to:{pathname:"/ingredients/".concat(e._id),state:{background:s}},children:Object(E.jsx)(S,{count:y[e._id],item:e})})},e._id)}))})]},r)}))}),[s,u,y])})]})},we=r(200),Ie=r.p+"static/media/done.7341dd32.svg",Ce=r(84),ke=r.n(Ce),Re=function(e){var t=e.orderNumber;return Object(E.jsxs)("div",{className:_()(ke.a.container,"pl-15 pr-15 pb-20"),children:[Object(E.jsx)("h1",{className:_()(ke.a.title,"text text_type_digits-large mt-4 mb-8"),children:t}),Object(E.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(E.jsx)("img",{width:"120",height:"120",src:Ie,alt:"\u0417\u0430\u043a\u0430\u0437 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"}),Object(E.jsx)("p",{className:"text text_type_main-default mt-15 mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(E.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Te=r(40),Le=r.n(Te),Me=r(85),De=r.n(Me),qe=function(e){var t=e.visible,r=void 0!==t&&t,n=e.onClose,c=void 0===n?function(){}:n;return Object(E.jsx)("div",{className:_()(De.a.container,Object(w.a)({},De.a.hidden,!r)),onClick:c})},Fe=document.getElementById("react-modals"),Ae=[],Ge=Object(n.memo)((function(e){var t=e.children,r=e.header,c=void 0===r?"":r,s=e.visible,i=void 0!==s&&s,o=e.onClose,u=Object(n.useRef)(),l=!!o;return Object(n.useEffect)((function(){if(i)Ae.push(u);else{var e=Ae.indexOf(u);Ae.splice(e,1)}}),[i]),Object(n.useEffect)((function(){var e=function(e){"Escape"===e.key&&Ae[Ae.length-1]===u&&o&&o()};return i&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[o,i]),Object(a.createPortal)(Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(qe,{visible:i,onClose:o}),Object(E.jsxs)("div",{className:_()(Le.a.container,"pt-10 pl-10 pr-10 pb-10",Object(w.a)({},Le.a.hidden,!i)),children:[Object(E.jsx)("h1",{className:_()(Le.a.title,"text text_type_main-large pr-7"),children:c}),l&&Object(E.jsx)("div",{className:Le.a.closeButton,children:Object(E.jsx)(g.CloseIcon,{type:"primary",onClick:o})}),Object(E.jsx)("section",{className:_()(Le.a.content),children:t})]})]}),Fe)})),Pe=r(57),Be=r.n(Pe),Ue=function(e){var t=e.size,r=void 0===t?50:t,n=e.stroke,c=void 0===n?3:n,a=e.className,s=e.center,i=void 0!==s&&s,o=.4*r;return Object(E.jsx)("svg",{className:_()(Be.a.spinner,Object(w.a)({},Be.a.spinnerCenter,i),a),style:{width:r,height:r},viewBox:"0 0 ".concat(r," ").concat(r),children:Object(E.jsx)("circle",{className:Be.a.circle,cx:r/2,cy:r/2,r:o,fill:"none",strokeWidth:c})})},He="ADD_CONSTRUCTOR_INGREDIENT",We="REMOVE_CONSTRUCTOR_INGREDIENT",Ve="REORDER_CONSTRUCTOR_INGREDIENTS",Je="CLEAR_CONSTRUCTOR",Qe=r(86),Xe=r.n(Qe),ze=function(e){var t,r,c=e.item,a=e.index,s=e.onDelete,i=void 0===s?function(){}:s,o=Object(O.b)(),u=Object(n.useRef)(null),l=Object(n.useState)(!1),d=Object(m.a)(l,2),j=d[0],b=d[1],p=Object(n.useState)(!1),x=Object(m.a)(p,2),f=x[0],h=x[1],v=null===(t=u.current)||void 0===t?void 0:t.querySelector(".constructor-element");Object(n.useEffect)((function(){var e=u.current;e&&(e.style.opacity="0",A({draw:function(t){e.style.opacity="".concat(t)},duration:500,timing:"easeOut"}))}),[]);var y=Object(N.a)({type:"constructorItem",item:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return{id:c._id,index:a}})),collect:function(e){return{isDrag:e.isDragging()}}}),S=Object(m.a)(y,2),w=S[0].isDrag,I=S[1],C=Object(we.a)({accept:"constructorItem",drop:function(e){var t=a-(j?1:0),r=e.index;h(!1),r!==t&&(o({type:Ve,dropIndex:r,hoverIndex:t}),e.index=t)},hover:function(e,t){if(v){h(!0);var r=v.getBoundingClientRect(),n=t.getSourceClientOffset()||{y:0};b(n.y<=r.y)}},collect:function(e){return{isOver:e.isOver(),didDrop:e.didDrop()}}}),k=Object(m.a)(C,2),R=k[0],T=R.isOver,L=R.didDrop,M=k[1],D=G(w),q=G(T)&&!T,F=D&&!w,P=(null===(r=u.current)||void 0===r?void 0:r.getBoundingClientRect().height)||0;return I(M(u)),Object(E.jsxs)("li",{className:_()(Xe.a.container,"pb-4"),ref:u,style:{opacity:w?0:1,display:F&&L?"none":"",marginTop:w&&q?-P:0,paddingBottom:w||!T||j?16:112,paddingTop:!w&&T&&j?96:0,transitionDuration:f?"0.3s":"0s"},"data-test-id":"ctr-item-".concat(c._id),children:[Object(E.jsx)("i",{className:_()(Xe.a.dragItem,"mr-2"),children:Object(E.jsx)(g.DragIcon,{type:"primary"})}),Object(E.jsx)(g.ConstructorElement,{text:c.name,price:c.price,thumbnail:c.image,handleClose:function(){return i(c,u)}})]})},Ke="CHECKOUT_ORDER_REQUEST",Ze="CHECKOUT_ORDER_SUCCESS",Ye="CHECKOUT_ORDER_ERROR",$e="CLEAR_ORDER",et=r(27),tt=r.n(et),rt=function(){var e,t=Object(n.useState)(!1),r=Object(m.a)(t,2),c=r[0],a=r[1],s=f((function(e){return e.construct})),i=s.bunItem,o=s.items,u=s.totalPrice,d=f((function(e){return e.order})),j=d.number,b=d.checkoutRequest,p=d.checkoutErrorMessage,O=x(),h=Object(n.useCallback)((function(e,t){var r=t.current;if(r){var n=r.offsetHeight;r.style.zIndex="-1",A({draw:function(e){r.style.opacity="".concat(1-e),r.style.marginTop="-".concat(n*e,"px")},duration:500,timing:"easeOut"}).then((function(){return O({type:We,item:e})}))}}),[O]),v=Object(n.useCallback)((function(){a(!1),j&&(O({type:Je}),O({type:$e}))}),[O,j]);var y=Object(we.a)({accept:"ingredient",drop:function(e,t){O({type:He,item:e})},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),N=Object(m.a)(y,2),S=N[0],I=S.isOver,C=S.canDrop,k=N[1],R=Object(n.useRef)(null),T=Object(n.useRef)(null),L=Object(n.useRef)(null);B(R,{exclude:[T,L],props:[i,0===o.length]});var M=Object(l.g)();return"jwt malformed"===p?(O({type:Ye,message:""}),M.replace("/login"),null):Object(E.jsxs)("section",{className:_()(tt.a.container,"pt-25 pl-4"),ref:k,"data-test-id":"constructor-container",children:[Object(E.jsxs)("ul",{className:tt.a.elements,children:[!i&&!o.length&&Object(E.jsx)("li",{className:_()(tt.a.dragMessage,"text text_type_main-medium pt-25 pb-25",(e={},Object(w.a)(e,tt.a.dragMessageOver,I),Object(w.a)(e,"text_color_inactive",!C),e)),children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u044b \u0441\u044e\u0434\u0430"}),i&&Object(E.jsx)("li",{className:"ml-8 mr-4 mb-4","data-test-id":"ctr-bun-top",children:Object(E.jsx)(g.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(i.name," (\u0432\u0435\u0440\u0445)"),price:i.price,thumbnail:i.image})}),Object(E.jsx)("li",{children:Object(E.jsx)("ul",{className:_()(tt.a.elementsScroll,"noselect pr-2"),ref:R,children:o.map((function(e,t){return Object(E.jsx)(ze,{item:e,index:t,onDelete:h},e.key)}))})}),i&&Object(E.jsx)("li",{className:"ml-8 mr-4",ref:T,"data-test-id":"ctr-bun-bottom",children:Object(E.jsx)(g.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(i.name," (\u043d\u0438\u0437)"),price:i.price,thumbnail:i.image})})]}),Object(E.jsxs)("footer",{className:_()(tt.a.footer,"mt-10 mb-2"),ref:L,children:[Object(E.jsx)("p",{className:"text text_type_digits-medium mr-2",children:u}),Object(E.jsx)("p",{className:"text mr-10",children:Object(E.jsx)(g.CurrencyIcon,{type:"primary"})}),Object(E.jsx)(g.Button,{type:"primary",size:"large",onClick:function(){a(!0),O(function(){var e=Object(W.a)(H.a.mark((function e(t,r){var n,c,a,s,i;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r().construct,c=n.bunItem,a=n.items,c){e.next=3;break}return e.abrupt("return",t({type:Ye,message:"\u0414\u043b\u044f \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u0443\u043b\u043a\u0443!"}));case 3:return s=[c._id].concat(Object(P.a)(a.map((function(e){return e._id})))),t({type:Ke}),e.prev=5,e.next=8,ae(s);case 8:i=e.sent,t({type:Ze,number:i.order.number}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),t({type:Ye,message:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[5,12]])})));return function(t,r){return e.apply(this,arguments)}}())},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]}),Object(E.jsx)(Ge,{header:p&&"\u041e\u0448\u0438\u0431\u043a\u0430",visible:c,onClose:b?void 0:v,children:Object(E.jsxs)(E.Fragment,{children:[b&&Object(E.jsxs)("div",{className:tt.a.center,children:[Object(E.jsx)("p",{className:"text text_type_main-default mb-20 ml-25 mr-25",children:"\u041e\u0444\u043e\u0440\u043c\u043b\u044f\u0435\u043c \u0437\u0430\u043a\u0430\u0437..."}),Object(E.jsx)(Ue,{className:"mb-15"})]}),p&&Object(E.jsx)("p",{className:_()("text text_type_main-default mt-5",tt.a.error),children:p}),j&&Object(E.jsx)(Re,{orderNumber:j})]})})]})};function nt(){return Object(E.jsxs)(d.a,{backend:j.a,children:[Object(E.jsx)(Se,{}),Object(E.jsx)(rt,{})]})}r(191);var ct=function(e){var t=Object.assign({},e),r=Object(n.useState)(!0),c=Object(m.a)(r,2),a=c[0],s=c[1],i=Object(n.useRef)(null),o=Object(n.useCallback)((function(){s(!a);var e=i.current;if(e){var t=e.selectionStart;setTimeout((function(){e.focus(),e.setSelectionRange(t||e.value.length,t||e.value.length)}),0)}}),[a]);return Object(E.jsx)(g.Input,Object(I.a)(Object(I.a)({},t),{},{ref:i,type:a?"password":"text",icon:a?"ShowIcon":"HideIcon",onIconClick:o}))},at=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,st={required:function(e){var t=e.value,r=e.message,n=void 0===r?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435":r;return t&&t.length>0?"":n},email:function(e){var t=e.value,r=e.message,n=void 0===r?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 email":r;return at.test(String(t).toLowerCase())?"":n},minLength:function(e){var t=e.value,r=e.param,n=void 0===r?0:r,c=e.message;return c=c||"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0435 \u043c\u0435\u043d\u0435\u0435 ".concat(n," \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),t.length>=n||0===t.length?"":c}};function it(e,t){return t&&Object.entries(t).map((function(t){var r=Object(m.a)(t,2),n=r[0],c=r[1];return c?st[n](Object(I.a)({value:e,param:"object"===typeof c?c.param:c},"object"===typeof c?{message:c.message}:{})):""})).filter((function(e){return!!e}))[0]||""}function ot(e,t){for(var r={},n=0,c=Object.keys(e);n<c.length;n++){var a=c[n];r[a]=it(e[a],t[a])}return r}function ut(e){var t=e.onSubmit,r=Object(n.useState)({}),c=Object(m.a)(r,2),a=c[0],s=c[1],i=Object(n.useState)({}),o=Object(m.a)(i,2),u=o[0],l=o[1],d=Object(n.useState)(null),j=Object(m.a)(d,2),b=j[0],p=j[1],O=Object(n.useState)(""),x=Object(m.a)(O,2),f=x[0],h=x[1],_=Object(n.useState)(!1),g=Object(m.a)(_,2),v=g[0],y=g[1],N=Object(n.useRef)(null),E=Object(n.useRef)({});Object(n.useEffect)((function(){N.current=b}));var S=function(e){var t=e.target.name,r=e.target.value,n=E.current;s(Object(I.a)(Object(I.a)({},a),{},Object(w.a)({},t,r))),l(Object(I.a)(Object(I.a)({},u),{},Object(w.a)({},t,it(r,n[t]))))};return{handleSubmit:function(){var e=Object(W.a)(H.a.mark((function e(r){var n,c,s;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=E.current,!v){e.next=4;break}return e.abrupt("return");case 4:if(c=ot(a,n),l(c),!Object.values(c).some((function(e){return e}))){e.next=8;break}return e.abrupt("return");case 8:return p(null),y(!0),e.prev=10,e.next=13,t(a);case 13:s=e.sent,h(""),p(s),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),h(e.t0.message);case 21:return e.prev=21,y(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[10,18,21,24]])})));return function(t){return e.apply(this,arguments)}}(),data:b,dataChanged:b!==N.current,error:f,loading:v,values:a,setValues:s,register:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.value,n=void 0===r?"":r,c=t.validate;return e in a||s(Object(I.a)(Object(I.a)({},a),{},Object(w.a)({},e,n))),c&&!(e in E.current)&&(E.current[e]=c),{name:e,value:a[e]||"",onChange:S,error:!!u[e],errorText:u[e]}}}}var lt="GET_USER_REQUEST",dt="GET_USER_SUCCESS",jt="GET_USER_ERROR",mt="SET_USER",bt="CLEAR_USER";function pt(){var e=f((function(e){return e.user})),t=e.user,r=e.userRequest,c=e.userSuccess,a=e.userErrorMessage,s=c||!!a,i=x();Object(n.useEffect)((function(){r||s||i(function(){var e=Object(W.a)(H.a.mark((function e(t,r){var n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:lt}),e.prev=1,e.next=4,Oe();case 4:n=e.sent,t({type:dt,user:n.user}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:jt,message:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}())}),[i,s,r]);var o=Object(n.useCallback)(function(){var e=Object(W.a)(H.a.mark((function e(t){var r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(t);case 2:return r=e.sent,i({type:mt,user:r.user}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i]),u=Object(n.useCallback)(Object(W.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:i({type:bt});case 3:case"end":return e.stop()}}),e)}))),[i]);return{user:t,userLoaded:s,signIn:o,signOut:u}}var Ot=r(88),xt=r.n(Ot);function ft(){var e,t=pt(),r=t.user,n=t.userLoaded,c=t.signIn,a=Object(l.h)(),s=ut({onSubmit:c}),o=s.data,u=s.loading,d=s.error,j=s.register,m=s.handleSubmit;return n?!u&&r?Object(E.jsx)(l.a,{to:"/"}):o?Object(E.jsx)(l.a,{to:(null===(e=a.state)||void 0===e?void 0:e.from)||"/"}):Object(E.jsxs)("form",{className:xt.a.container,onSubmit:m,children:[Object(E.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),d&&Object(E.jsx)("p",{className:_()(xt.a.error,"text text_type_main-default mb-4"),children:d}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(g.Input,Object(I.a)(Object(I.a)({type:"email",placeholder:"E-mail"},j("email",{validate:{required:!0,email:!0}})),{},{disabled:u}))}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(ct,Object(I.a)(Object(I.a)({placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"},j("password",{validate:{required:!0,minLength:6}})),{},{disabled:u}))}),Object(E.jsx)("div",{className:"mb-20",children:Object(E.jsx)(g.Button,{children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(E.jsxs)("p",{className:"text text_type_main-default text_color_inactive mb-4",children:["\u0412\u044b \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(E.jsx)(i.b,{to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(E.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(E.jsx)(i.b,{to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]}):null}var ht=r(58),_t=r.n(ht);function gt(){var e=ut({onSubmit:function(e){return function(e){return de.apply(this,arguments)}(e)}}),t=e.data,r=e.loading,n=e.error,c=e.register,a=e.handleSubmit;return t?Object(E.jsxs)("form",{className:_t.a.container,children:[Object(E.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(E.jsxs)("p",{className:"text text_type_main-default ",children:["\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0438\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b. ",Object(E.jsx)(i.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(E.jsxs)("form",{className:_t.a.container,onSubmit:a,children:[Object(E.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),n&&Object(E.jsx)("p",{className:_()(_t.a.error,"text text_type_main-default mb-4"),children:n}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(g.Input,Object(I.a)(Object(I.a)({type:"text",placeholder:"\u0418\u043c\u044f"},c("name",{validate:{required:!0,minLength:3}})),{},{disabled:r}))}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(g.Input,Object(I.a)(Object(I.a)({type:"email",placeholder:"E-mail"},c("email",{validate:{required:!0,email:!0}})),{},{disabled:r}))}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(ct,Object(I.a)(Object(I.a)({placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c"},c("password",{validate:{required:!0,minLength:6}})),{},{disabled:r}))}),Object(E.jsx)("div",{className:"mb-20",children:Object(E.jsx)(g.Button,{children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(E.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(E.jsx)(i.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var vt=r(89),yt=r.n(vt);function Nt(){var e=ut({onSubmit:je}),t=e.data,r=e.loading,n=e.error,c=e.register,a=e.values,s=e.handleSubmit;return t?Object(E.jsx)(l.a,{to:{pathname:"/reset-password",state:{email:a.email}}}):Object(E.jsxs)("form",{className:yt.a.container,onSubmit:s,children:[Object(E.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),n&&Object(E.jsx)("p",{className:_()(yt.a.error,"text text_type_main-default mb-4"),children:n}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(g.Input,Object(I.a)(Object(I.a)({type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail"},c("email",{validate:{required:!0,email:!0}})),{},{disabled:r}))}),Object(E.jsx)("div",{className:"mb-20",children:Object(E.jsx)(g.Button,{children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})}),Object(E.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(E.jsx)(i.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})}var Et=r(59),St=r.n(Et);function wt(){var e,t=Object(l.h)(),r=ut({onSubmit:be}),n=r.data,c=r.loading,a=r.error,s=r.register,o=r.handleSubmit;return(null===(e=t.state)||void 0===e?void 0:e.email)?n?Object(E.jsxs)("form",{className:St.a.container,children:[Object(E.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(E.jsxs)("p",{className:"text text_type_main-default ",children:["\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d. ",Object(E.jsx)(i.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(E.jsxs)("form",{className:St.a.container,onSubmit:o,children:[Object(E.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),a&&Object(E.jsx)("p",{className:_()(St.a.error,"text text_type_main-default mb-4"),children:a}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(ct,Object(I.a)(Object(I.a)({placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"},s("password",{validate:{required:!0,minLength:6}})),{},{disabled:c}))}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(g.Input,Object(I.a)(Object(I.a)({type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430"},s("token",{validate:{required:!0,minLength:10}})),{},{disabled:c}))}),Object(E.jsx)("div",{className:"mb-20",children:Object(E.jsx)(g.Button,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})}),Object(E.jsxs)("p",{className:"text text_type_main-default text_color_inactive",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(E.jsx)(i.b,{to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(E.jsx)(l.a,{to:"/forgot-password"})}var It=r(31),Ct=(r(192),function(e){var t=e.setValue,r=Object(It.a)(e,["setValue"]),c=Object(n.useState)(!1),a=Object(m.a)(c,2),s=a[0],i=a[1],o=Object(n.useRef)(null),u=!1;return Object(E.jsx)(g.Input,Object(I.a)(Object(I.a)({},r),{},{ref:o,icon:s?"CloseIcon":"EditIcon",onIconClick:function(e){var r=o.current;u=!0,s&&r?(t(""),r.focus()):r&&(i(!0),setTimeout((function(){r.focus()}),0))},onBlur:function(e){setTimeout((function(){u?u=!1:i(!1)}),200)},disabled:r.disabled||!s}))}),kt=r(60),Rt=r.n(kt),Tt=function(){var e=Object(O.b)(),t=pt().user,r=ut({onSubmit:fe}),n=r.data,c=r.dataChanged,a=r.loading,s=r.error,i=r.register,o=r.values,u=r.setValues,l=r.handleSubmit;if(!t)return null;var d=!D(Object(I.a)(Object(I.a)({},t),{},{password:""}),o),j=function(e){return function(t){return u(Object(I.a)(Object(I.a)({},o),{},Object(w.a)({},e,t)))}};return n&&c&&!D(o,Object(I.a)(Object(I.a)({},n.user),{},{password:""}))&&u(Object(I.a)(Object(I.a)({},n.user),{},{password:""})),n&&t!==n.user&&e({type:mt,user:n.user}),Object(E.jsxs)("form",{className:_()(Rt.a.form,"mt-20"),onSubmit:l,children:[s&&Object(E.jsx)("p",{className:_()(Rt.a.error,"text text_type_main-default mb-4"),children:s}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(Ct,Object(I.a)(Object(I.a)({type:"text",placeholder:"\u0418\u043c\u044f",setValue:j("name")},i("name",{value:t.name,validate:{required:!0,minLength:3}})),{},{disabled:a}))}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(Ct,Object(I.a)(Object(I.a)({type:"email",placeholder:"\u041b\u043e\u0433\u0438\u043d",setValue:j("email")},i("email",{value:t.email,validate:{required:!0,email:!0}})),{},{disabled:a}))}),Object(E.jsx)("div",{className:"mb-6",children:Object(E.jsx)(Ct,Object(I.a)(Object(I.a)({placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",setValue:j("password")},i("password",{validate:{minLength:6}})),{},{disabled:a}))}),Object(E.jsxs)("footer",{style:{display:d?"":"none"},className:Rt.a.formFooter,children:[Object(E.jsx)("a",{className:"text text_type_main-default mr-7",onClick:a?void 0:function(){u(Object(I.a)(Object(I.a)({},t),{},{password:""}))},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(E.jsx)(g.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},Lt=r(61),Mt=r.n(Lt),Dt=function(e){var t=e.image,r=e.count,n=void 0===r?0:r;return Object(E.jsxs)("div",{className:Mt.a.ingredient,children:[Object(E.jsx)("img",{src:t,className:Mt.a.ingredientImage,width:112,height:56,alt:"ingredient"}),n>0&&Object(E.jsxs)("i",{className:_()(Mt.a.ingredientFg,"text text_type_main-default"),children:["+",n]})]})},qt="WS_FEED_CONNECTION_START",Ft="WS_FEED_CONNECTION_CLOSE",At="WS_FEED_CONNECTION_SUCCESS",Gt="WS_FEED_CONNECTION_CLOSED",Pt="WS_FEED_CONNECTION_ERROR",Bt="WS_FEED_GET_MESSAGE",Ut="WS_PROFILE_CONNECTION_START",Ht="WS_PROFILE_CONNECTION_CLOSE",Wt="WS_PROFILE_CONNECTION_SUCCESS",Vt="WS_PROFILE_CONNECTION_CLOSED",Jt="WS_PROFILE_CONNECTION_ERROR",Qt="WS_PROFILE_GET_MESSAGE";function Xt(e){return Object(n.useMemo)((function(){return e.reduce((function(e,t){return e[t._id]=t,e}),{})}),[e])}function zt(e,t){if(0===Object.keys(t).length)return null;var r=e.ingredients.filter((function(e){return!!e})).map((function(e){return t[e]})).reduce((function(e,t){var r=e.find((function(e){var r=e._id;return t._id===r}));return r?("bun"!==r.type&&r.count++,e):(e.push(Object(I.a)(Object(I.a)({},t),{},{count:"bun"===t.type?2:1})),e)}),[]);return Object(I.a)(Object(I.a)({},e),{},{price:r.reduce((function(e,t){return e+t.count*t.price}),0),ingredients:r})}var Kt={created:"\u0421\u043e\u0437\u0434\u0430\u043d",pending:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",done:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",canceled:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d"};function Zt(e){return Kt[e]||e}function Yt(e){var t=Xt(f((function(e){return e.ingredients})).items);return{ordersList:Object(n.useMemo)((function(){return e.map((function(e){return zt(e,t)})).filter((function(e){return null!==e}))}),[e,t])}}function $t(e){var t=x(),r=Object(n.useState)(),c=Object(m.a)(r,2),a=c[0],s=c[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),u=o[0],l=o[1],d=Object(n.useState)(!0),j=Object(m.a)(d,2),b=j[0],p=j[1],O=Object(n.useState)(""),h=Object(m.a)(O,2),_=h[0],g=h[1],v=f((function(e){return e.ingredients})),y=v.items,N=v.itemsErrorMessage,E=v.itemsRequest;Object(n.useEffect)((function(){0===y.length&&t(Ne())}),[t,y.length]);var S=Xt(y);return y.length&&a&&!u&&l(zt(a,S)),Object(n.useEffect)((function(){p(!0),function(e){return _e.apply(this,arguments)}(e).then((function(e){s(e)})).catch((function(e){return g(e)})).finally((function(){p(!1)}))}),[e]),{order:u,loading:E||b,error:N+_}}var er=r(28),tr=r.n(er),rr=function(e){var t=e.ingredients,r=void 0===t?[]:t,n=r.slice(0,5),c=r.slice(5);return Object(E.jsxs)("ul",{className:tr.a.ingredientList,children:[n.map((function(e,t){var r=e.image;return Object(E.jsx)("li",{className:tr.a.ingredient,style:{zIndex:n.length-t},children:Object(E.jsx)(Dt,{image:r})},t)})),c.length>0&&Object(E.jsx)("li",{className:tr.a.ingredient,children:Object(E.jsx)(Dt,{image:c[0].image,count:c.length-1})},n.length)]})},nr=Object(n.memo)((function(e){var t=e.order,r=Object(l.h)(),n=Object(l.j)().path;return Object(E.jsxs)(i.b,{className:_()(tr.a.container,"pl-6 pr-6 pb-6 pt-6"),to:{pathname:"".concat(n,"/").concat(t.number),state:{background:r}},children:[Object(E.jsxs)("header",{className:tr.a.header,children:[Object(E.jsxs)("h2",{className:"text text_type_digits-default",children:["#",t.number]}),Object(E.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:q(t.createdAt)})]}),Object(E.jsx)("h1",{className:"text text_type_main-medium mt-6",children:t.name}),t.status&&Object(E.jsx)("p",{className:_()("text text_type_main-default pt-2",Object(w.a)({},tr.a.statusDone,"done"===t.status)),children:Zt(t.status)}),Object(E.jsxs)("footer",{className:_()(tr.a.footer,"mt-6"),children:[Object(E.jsx)(rr,{ingredients:t.ingredients}),Object(E.jsxs)("div",{className:tr.a.price,children:[Object(E.jsx)("p",{className:"text text_type_digits-default mr-2",children:t.price}),Object(E.jsx)("p",{className:"text",children:Object(E.jsx)(g.CurrencyIcon,{type:"primary"})})]})]})]})})),cr=r(16),ar=r.n(cr);function sr(){var e=Object(l.j)().path;return Object(E.jsxs)("nav",{className:_()(ar.a.menu,"mt-20 mr-15"),children:[Object(E.jsxs)("ul",{className:"text text_type_main-medium",children:[Object(E.jsx)("li",{children:Object(E.jsx)(i.c,{to:e,exact:!0,className:ar.a.menuItem,activeClassName:ar.a.menuItemActive,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(E.jsx)("li",{children:Object(E.jsx)(i.c,{to:"".concat(e,"/orders"),className:ar.a.menuItem,activeClassName:ar.a.menuItemActive,children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(E.jsx)("li",{children:Object(E.jsx)(i.c,{to:"".concat(e,"/logout"),exact:!0,className:ar.a.menuItem,activeClassName:ar.a.menuItemActive,children:"\u0412\u044b\u0445\u043e\u0434"})})]}),Object(E.jsxs)("footer",{className:_()(ar.a.menuFooter,"text text_type_main-default text_color_inactive mt-20"),children:[Object(E.jsx)(l.b,{path:e,exact:!0,children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"}),Object(E.jsx)(l.b,{path:"".concat(e,"/orders"),exact:!0,children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]})}function ir(){var e=pt().signOut,t=Object(n.useState)(""),r=Object(m.a)(t,2),c=r[0],a=r[1];return Object(n.useEffect)((function(){e().catch((function(e){return a(e.message)}))}),[e]),c?Object(E.jsxs)("p",{className:_()(ar.a.error,"text text_type_main-default mt-20"),children:["\u041f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435. ",c]}):Object(E.jsx)(Ue,{center:!0})}function or(){var e=Object(n.useRef)(null);B(e);var t=function(){var e=x(),t=f((function(e){return e.profile})),r=t.orders,c=t.wsError;Object(n.useLayoutEffect)((function(){return e({type:Ut}),function(){e({type:Ht})}}),[e]);var a=f((function(e){return e.ingredients})),s=a.items,i=a.itemsErrorMessage,o=a.itemsRequest;Object(n.useLayoutEffect)((function(){0===s.length&&e(Ne())}),[e,s.length]);var u=Yt(r).ordersList;u.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}));var l=c+i;return{ordersList:u,error:l,loading:!r.length&&!l||o}}(),r=t.ordersList,c=t.error,a=t.loading;return Object(E.jsxs)(E.Fragment,{children:[c&&Object(E.jsxs)("p",{className:_()(ar.a.error,"text text_type_main-default"),children:["\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. ",c]}),Object(E.jsxs)("ul",{className:ar.a.orderList,ref:e,children:[a&&Object(E.jsx)(R,{repeat:2,className:_()(ar.a.skeletonOrder,"mb-6 mr-2"),tag:"li"}),r.map((function(e){return Object(E.jsx)("li",{className:"mb-6 mr-2",children:Object(E.jsx)(nr,{order:e})},e.number)}))]})]})}function ur(){var e=Object(l.j)().path;return Object(E.jsxs)("section",{className:_()(ar.a.container,"mt-10"),children:[Object(E.jsx)(sr,{}),Object(E.jsx)(l.b,{path:e,exact:!0,children:Object(E.jsx)(Tt,{})}),Object(E.jsx)(l.b,{path:"".concat(e,"/orders"),exact:!0,children:Object(E.jsx)(or,{})}),Object(E.jsx)(l.b,{path:"".concat(e,"/logout"),exact:!0,children:Object(E.jsx)(ir,{})})]})}var lr=r(23),dr=r.n(lr);function jr(e){var t=e.title,r=e.orders,n=e.loading,c=e.className,a=e.complete,s=void 0!==a&&a;return Object(E.jsxs)("section",{className:_()(dr.a.statisticGridItem,c),children:[Object(E.jsx)("h2",{className:"text text_type_main-medium mb-6",children:t}),Object(E.jsxs)("ul",{className:_()(dr.a.statisticGridItemList,"text text_type_digits-default",Object(w.a)({},dr.a.success,s)),children:[n&&Object(E.jsx)(R,{repeat:3,className:"mb-2",tag:"li"}),r.map((function(e,t){return Object(E.jsx)("li",{className:"mb-2",children:e},t)}))]})]})}function mr(){var e=Object(n.useRef)(null),t=Object(n.useRef)(null);B(e),B(t);var r=function(){var e=x(),t=f((function(e){return e.feed})),r=t.orders,c=t.total,a=t.totalToday,s=t.wsError;Object(n.useEffect)((function(){return e({type:qt}),function(){e({type:Ft})}}),[e]);var i=f((function(e){return e.ingredients})),o=i.items,u=i.itemsErrorMessage,l=i.itemsRequest;Object(n.useLayoutEffect)((function(){0===o.length&&e(Ne())}),[e,o.length]);var d=s+u;return{ordersList:Yt(r).ordersList,total:c,totalToday:a,completeNumbers:Object(n.useMemo)((function(){return r.filter((function(e){return"done"===e.status})).slice(0,20).map((function(e){return e.number}))}),[r]),progressNumbers:Object(n.useMemo)((function(){return r.filter((function(e){return"pending"===e.status})).slice(0,20).map((function(e){return e.number}))}),[r]),error:d,loading:!r.length&&!d||l}}(),c=r.ordersList,a=r.completeNumbers,s=r.progressNumbers,i=r.total,o=r.totalToday,l=r.error,d=r.loading;return Object(E.jsxs)("section",{className:_()(dr.a.container,"mt-10"),children:[Object(E.jsx)("h1",{className:"text text_type_main-large mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(E.jsxs)("section",{className:dr.a.content,children:[l&&Object(E.jsxs)("p",{className:_()(dr.a.error,"text text_type_main-default"),children:["\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. ",l]}),Object(E.jsxs)("ul",{className:_()(dr.a.orderList,"mr-15"),ref:t,children:[d&&Object(E.jsx)(R,{className:_()(dr.a.skeletonOrder,"mb-4 mr-2"),repeat:2,tag:"li"}),c.map((function(e){return Object(E.jsx)("li",{className:"mb-4 mr-2",children:Object(E.jsx)(nr,{order:e})},e.number)}))]}),Object(E.jsxs)("section",{className:dr.a.statistic,ref:e,children:[Object(E.jsxs)("section",{className:dr.a.statisticGrid,children:[Object(E.jsx)(jr,{className:"mr-9",title:"\u0413\u043e\u0442\u043e\u0432\u044b:",loading:d,orders:a,complete:!0}),Object(E.jsx)(jr,{title:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:",loading:d,orders:s})]}),i>0&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h2",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(E.jsx)("p",{className:_()(u.a.textSpaceShadow,"text text_type_digits-large"),children:i}),Object(E.jsx)("h2",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(E.jsx)("p",{className:_()(u.a.textSpaceShadow,"text text_type_digits-large"),children:o})]})]})]})]})}var br=r(29),pr=r.n(br),Or=function(e){var t=e.ingredients,r=void 0===t?[]:t,n=e.listRef;return Object(E.jsx)("ul",{className:pr.a.ingredientList,ref:n,children:r.map((function(e,t){var r=e.image,n=e.name,c=e.count,a=e.price;return Object(E.jsxs)("li",{className:_()(pr.a.ingredient,"mb-4 mr-6"),children:[Object(E.jsx)(Dt,{image:r}),Object(E.jsx)("p",{className:_()(pr.a.ingredientName,"text text_type_main-default ml-4"),children:n}),Object(E.jsxs)("div",{className:pr.a.price,children:[Object(E.jsxs)("p",{className:"text text_type_digits-default mr-2",children:[c," x ",a]}),Object(E.jsx)("p",{className:"text",children:Object(E.jsx)(g.CurrencyIcon,{type:"primary"})})]})]},t)}))})},xr=Object(n.memo)((function(e){var t=e.order,r=e.isInModal,c=void 0!==r&&r,a=Object(n.useRef)(null),s=Object(n.useRef)(null);return B(a,{exclude:s,maxHeight:312,isInModal:c}),Object(E.jsxs)("section",{className:_()(pr.a.container),children:[Object(E.jsx)("h1",{className:"text text_type_main-medium mt-5",children:t.name}),t.status&&Object(E.jsx)("p",{className:_()("text text_type_main-default pt-3",Object(w.a)({},pr.a.statusDone,"done"===t.status)),children:Zt(t.status)}),Object(E.jsxs)("section",{className:_()("mt-15"),children:[Object(E.jsx)("h1",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(E.jsx)(Or,{ingredients:t.ingredients,listRef:a})]}),Object(E.jsxs)("footer",{className:_()(pr.a.footer,"mt-10"),ref:s,children:[Object(E.jsx)("span",{className:"text text_type_main-default text_color_inactive",children:q(t.createdAt)}),Object(E.jsxs)("div",{className:pr.a.price,children:[Object(E.jsx)("p",{className:"text text_type_digits-default mr-2",children:t.price}),Object(E.jsx)("p",{className:"text",children:Object(E.jsx)(g.CurrencyIcon,{type:"primary"})})]})]})]})})),fr=r(35),hr=r.n(fr);function _r(){var e=Object(l.i)().id,t=$t(e),r=t.order,n=t.loading,c=t.error;return c?Object(E.jsx)("section",{className:_()(hr.a.container,"mt-2 mb-2 text text_type_main-default"),children:Object(E.jsxs)("p",{className:hr.a.error,children:["\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043d\u0430\u0439\u0442\u0438 \u0437\u0430\u043a\u0430\u0437 ",e,".",Object(E.jsx)("br",{})," ",c]})}):n?Object(E.jsxs)("section",{className:_()(hr.a.container,"mt-2 mb-2"),children:[Object(E.jsx)("div",{className:hr.a.center,children:Object(E.jsx)(R,{width:200,className:"text text_type_digits-default mb-10"})}),Object(E.jsx)(R,{repeat:2,className:"text text_type_main-medium mt-5"}),Object(E.jsxs)("div",{className:"mt-15",children:[Object(E.jsx)(R,{width:64,circle:!0,className:"mr-4"}),Object(E.jsx)(R,{width:"60%",className:"text text_type_main-default mt-6"})]}),Object(E.jsxs)("div",{className:"mt-4",children:[Object(E.jsx)(R,{width:64,height:64,circle:!0,className:"mr-4"}),Object(E.jsx)(R,{width:"60%",className:"text text_type_main-default mt-6"})]})]}):r&&Object(E.jsxs)("section",{className:_()(hr.a.container,"mt-2 mb-2"),children:[Object(E.jsxs)("h2",{className:_()(hr.a.center,"text text_type_digits-default mb-10"),children:["#",r.number]}),Object(E.jsx)(xr,{order:r})]})}var gr=r(41),vr=r.n(gr);var yr=Object(n.memo)((function(e){var t=e.ingredient,r=function(e){var t=Object(n.useState)(!0),r=Object(m.a)(t,2),c=r[0],a=r[1],s=function(){var e=Object(W.a)(H.a.mark((function e(t){var r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return(r=new Image).src=t,e.abrupt("return",new Promise((function(e,n){r.onload=function(){return e(t)},r.onerror=n})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a(!0),e&&s(e).then((function(){return a(!1)}))}),[e]),c}(t.image_large);return Object(E.jsxs)("div",{className:_()(vr.a.container,"pl-15 pr-15 pb-5"),children:[r?Object(E.jsx)("div",{className:vr.a.imagePreloader}):Object(E.jsx)("img",{className:vr.a.image,src:t.image_large,alt:t.name}),Object(E.jsx)("h1",{className:_()(vr.a.title,"text text_type_main-medium mt-4 mb-8"),children:t.name}),Object(E.jsxs)("dl",{className:_()(vr.a.content,"text text_type_main-default"),children:[Object(E.jsxs)("div",{children:[Object(E.jsx)("dt",{children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(E.jsx)("dd",{className:"text text_type_digits-default mt-2",children:t.calories})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("dt",{children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(E.jsx)("dd",{className:"text text_type_digits-default mt-2",children:t.proteins})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("dt",{children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(E.jsx)("dd",{className:"text text_type_digits-default mt-2",children:t.fat})]}),Object(E.jsxs)("div",{children:[Object(E.jsx)("dt",{children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(E.jsx)("dd",{className:"text text_type_digits-default mt-2",children:t.carbohydrates})]})]})]})})),Nr=r(90),Er=r.n(Nr),Sr=Object(E.jsxs)("div",{children:[Object(E.jsx)(R,{width:"80%",className:"text text_type_main-large"}),Object(E.jsx)(R,{width:480,height:240,className:"mt-4 mb-8"}),Object(E.jsx)(R,{height:30,className:"mt-4",repeat:3})]});function wr(){var e=Object(l.i)().id,t=x(),r=f((function(e){return e.ingredients})),c=r.items,a=r.itemsErrorMessage,s=r.itemsRequest;Object(n.useLayoutEffect)((function(){0===c.length&&t(Ne())}),[c.length,t]);var i=c.find((function(t){return t._id===e}));return Object(E.jsxs)("section",{className:_()(Er.a.container),children:[s&&Sr,a&&Object(E.jsxs)("p",{className:_()(Er.a.error,"text text_type_main-default"),children:["\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445. ",a]}),i&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h1",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(E.jsx)(yr,{ingredient:i})]}),!a&&!s&&!i&&Object(E.jsx)("p",{className:"text text_type_main-default",children:"\u0423\u0432\u044b, \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043d\u0430\u0439\u0442\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442."})]})}function Ir(){return Object(E.jsxs)("div",{style:{textAlign:"center"},children:[Object(E.jsx)("p",{className:"text text_type_digits-large mt-20",children:"404"}),Object(E.jsx)("p",{className:"text text_type_main-medium text_color_inactive mt-5",children:"\u0423\u043f\u0441!"}),Object(E.jsx)("p",{className:"text text_type_main-medium text_color_inactive mt-5",children:"\u041a\u0430\u0436\u0435\u0442\u0441\u044f, \u043c\u044b \u0435\u0451 \u043f\u043e\u0442\u0435\u0440\u044f\u043b\u0438..."})]})}var Cr=r(36),kr=r.n(Cr),Rr=r(109),Tr=r.n(Rr),Lr=function(e){var t=e.icon,r=e.children,n=e.path,c=Object(l.j)({path:n,exact:"/"===n});return Object(E.jsxs)(i.b,{className:_()(Tr.a.container,"text text_type_main-default pl-5 pr-5 pt-4 pb-4"),to:n,children:[Object(E.jsx)(t,{type:c?"primary":"secondary"}),Object(E.jsx)("span",{className:_()({text_color_inactive:!c},"ml-2"),children:r})]})},Mr=function(){return Object(E.jsx)("header",{className:_()(kr.a.header),children:Object(E.jsxs)("ul",{className:kr.a.content,children:[Object(E.jsx)("li",{className:kr.a.contentItem,children:Object(E.jsx)("nav",{className:_()(kr.a.navigation,"mt-4 mb-4"),children:Object(E.jsxs)("ul",{children:[Object(E.jsx)("li",{children:Object(E.jsx)(Lr,{icon:g.BurgerIcon,path:"/",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})}),Object(E.jsx)("li",{className:_()("ml-2"),children:Object(E.jsx)(Lr,{icon:g.ListIcon,path:"/feed",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})]})})}),Object(E.jsx)("li",{className:kr.a.contentItemCenter,children:Object(E.jsx)(i.b,{to:"/",children:Object(E.jsx)(g.Logo,{})})}),Object(E.jsx)("li",{className:kr.a.contentItemRight,children:Object(E.jsx)(Lr,{icon:g.ProfileIcon,path:"/profile",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})})]})})},Dr=function(e){var t=e.children,r=Object(It.a)(e,["children"]),n=pt(),c=n.user;return n.userLoaded?Object(E.jsx)(l.b,Object(I.a)(Object(I.a)({},r),{},{render:function(e){var r=e.location;return c?t:Object(E.jsx)(l.a,{to:{pathname:"/login",state:{from:r}}})}})):Object(E.jsx)(Ue,{center:!0})},qr=function(e){var t=e.children,r=Object(It.a)(e,["children"]),n=pt(),c=n.user;return n.userLoaded?Object(E.jsx)(l.b,Object(I.a)(Object(I.a)({},r),{},{render:function(){return c?Object(E.jsx)(l.a,{to:"/"}):t}})):Object(E.jsx)(Ue,{center:!0})},Fr=Object(n.memo)((function(){var e=Object(l.i)().id,t=Object(l.g)(),r=f((function(e){return e.ingredients})).items.find((function(t){return t._id===e}))||null,c=Object(n.useCallback)((function(){t.goBack()}),[t]);return r&&Object(E.jsx)(Ge,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0438\u0434\u0438\u0435\u043d\u0442\u0430",visible:!0,onClose:c,children:Object(E.jsx)(yr,{ingredient:r})})})),Ar=Object(n.memo)((function(){var e=Object(l.i)().id,t=Object(l.g)(),r=Object(l.h)(),c=f((function(e){return e.feed})).orders,a=f((function(e){return e.profile})).orders,s=Yt(r.pathname.startsWith("/feed")?c:a).ordersList.find((function(t){return t.number===Number(e)}))||null,i=Object(n.useCallback)((function(){t.goBack()}),[t]),o=s&&Object(E.jsxs)("div",{className:"text text_type_digits-default",children:["#",s.number]});return s&&Object(E.jsx)(Ge,{header:o,visible:!0,onClose:i,children:Object(E.jsx)(xr,{order:s,isInModal:!0})})})),Gr=function(){var e,t=Object(l.h)(),r=new URLSearchParams(t.search).get("p"),n=r?{pathname:r}:null,c="PUSH"===Object(l.g)().action&&(null===(e=t.state)||void 0===e?void 0:e.background);return Object(E.jsxs)("div",{className:u.a.app,children:[Object(E.jsx)(Mr,{}),Object(E.jsx)("main",{className:u.a.main,children:Object(E.jsxs)(l.d,{location:c||n||t,children:[Object(E.jsx)(l.b,{path:"/",exact:!0,children:Object(E.jsx)(nt,{})}),Object(E.jsx)(l.b,{path:"/login",exact:!0,children:Object(E.jsx)(ft,{})}),Object(E.jsx)(qr,{path:"/register",exact:!0,children:Object(E.jsx)(gt,{})}),Object(E.jsx)(qr,{path:"/forgot-password",exact:!0,children:Object(E.jsx)(Nt,{})}),Object(E.jsx)(qr,{path:"/reset-password",exact:!0,children:Object(E.jsx)(wt,{})}),Object(E.jsx)(Dr,{path:"/profile/orders/:id",exact:!0,children:Object(E.jsx)(_r,{})}),Object(E.jsx)(Dr,{path:"/profile",children:Object(E.jsx)(ur,{})}),Object(E.jsx)(l.b,{path:"/feed/:id",exact:!0,children:Object(E.jsx)(_r,{})}),Object(E.jsx)(l.b,{path:"/feed",exact:!0,children:Object(E.jsx)(mr,{})}),Object(E.jsx)(l.b,{path:"/ingredients/:id",exact:!0,children:Object(E.jsx)(wr,{})}),Object(E.jsx)(l.b,{children:Object(E.jsx)(Ir,{})})]})}),c&&Object(E.jsx)(l.b,{path:"/ingredients/:id",children:Object(E.jsx)(Fr,{})}),c&&Object(E.jsx)(l.b,{path:"/profile/orders/:id",children:Object(E.jsx)(Ar,{})}),c&&Object(E.jsx)(l.b,{path:"/feed/:id",children:Object(E.jsx)(Ar,{})})]})},Pr=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,201)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},Br=r(33),Ur=r(110),Hr={items:[],itemsRequest:!1,itemsSuccess:!1,itemsErrorMessage:""};function Wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.reduce((function(e,t){return e+t.price}),0)+2*((null===t||void 0===t?void 0:t.price)||0)}var Vr={items:[],bunItem:null,totalPrice:0},Jr={number:null,checkoutRequest:!1,checkoutSuccess:!1,checkoutErrorMessage:""},Qr={user:null,userRequest:!1,userSuccess:!1,userErrorMessage:""},Xr={wsConnected:!1,wsError:"",orders:[],total:0,totalToday:0},zr={wsConnected:!1,wsError:"",orders:[]},Kr=Object(Br.b)({ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return Object(I.a)(Object(I.a)({},e),{},{itemsRequest:!0,itemsSuccess:!1,itemsErrorMessage:""});case ve:return Object(I.a)(Object(I.a)({},e),{},{itemsRequest:!1,itemsSuccess:!0,itemsErrorMessage:"",items:t.items});case ye:return Object(I.a)(Object(I.a)({},e),{},{itemsRequest:!1,itemsSuccess:!1,itemsErrorMessage:t.message,items:[]});default:return e}},construct:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case He:var r=t.item;if("bun"===r.type)return Object(I.a)(Object(I.a)({},e),{},{bunItem:r,totalPrice:Wr(e.items,r)});var n=[].concat(Object(P.a)(e.items),[Object(I.a)(Object(I.a)({},r),{},{key:r._id+(new Date).getTime()})]);return Object(I.a)(Object(I.a)({},e),{},{items:n,totalPrice:Wr(n,e.bunItem)});case We:var c=e.items.filter((function(e){return e.key!==t.item.key}));return Object(I.a)(Object(I.a)({},e),{},{items:c,totalPrice:Wr(c,e.bunItem)});case Ve:var a=e.items,s=a[t.dropIndex];return Object(I.a)(Object(I.a)({},e),{},{items:[].concat(Object(P.a)(a.slice(0,t.hoverIndex+1).filter((function(e){return e.key!==s.key}))),[s],Object(P.a)(a.slice(t.hoverIndex+1).filter((function(e){return e.key!==s.key}))))});case Je:return Vr;default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke:return Object(I.a)(Object(I.a)({},e),{},{checkoutRequest:!0,checkoutSuccess:!1,checkoutErrorMessage:"",number:null});case Ze:return Object(I.a)(Object(I.a)({},e),{},{checkoutRequest:!1,checkoutSuccess:!0,number:t.number});case Ye:return Object(I.a)(Object(I.a)({},e),{},{checkoutRequest:!1,checkoutSuccess:!1,checkoutErrorMessage:t.message});case $e:return Jr;default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case lt:return Object(I.a)(Object(I.a)({},e),{},{userRequest:!0,userSuccess:!1,userErrorMessage:"",user:null});case dt:return Object(I.a)(Object(I.a)({},e),{},{userRequest:!1,userSuccess:!0,userErrorMessage:"",user:t.user});case jt:return Object(I.a)(Object(I.a)({},e),{},{userRequest:!1,userSuccess:!1,userErrorMessage:t.message,user:null});case mt:return Object(I.a)(Object(I.a)({},e),{},{user:t.user});case bt:return Object(I.a)(Object(I.a)({},e),{},{user:null});default:return e}},feed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case At:return Object(I.a)(Object(I.a)({},e),{},{wsError:"",wsConnected:!0});case Pt:return Object(I.a)(Object(I.a)({},e),{},{wsError:t.payload.message,wsConnected:!1});case Gt:return Object(I.a)(Object(I.a)({},e),{},{wsError:"",wsConnected:!1});case Bt:return t.payload.message?Object(I.a)(Object(I.a)({},e),{},{wsError:t.payload.message,orders:[],total:0,totalToday:0}):Object(I.a)(Object(I.a)({},e),{},{wsError:"",orders:t.payload.orders,total:t.payload.total,totalToday:t.payload.totalToday});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Wt:return Object(I.a)(Object(I.a)({},e),{},{wsError:"",wsConnected:!0});case Jt:return Object(I.a)(Object(I.a)({},e),{},{wsError:t.payload.message,wsConnected:!1});case Vt:return Object(I.a)(Object(I.a)({},e),{},{wsError:"",wsConnected:!1});case Qt:return t.payload.message?Object(I.a)(Object(I.a)({},e),{},{wsError:t.payload.message,orders:[]}):Object(I.a)(Object(I.a)({},e),{},{wsError:"",orders:t.payload.orders});default:return e}}}),Zr=function(e,t,r){return function(n){var c=null;return function(a){return function(s){var i=n.dispatch,o=s.type,u=s.payload,l=t.wsInit,d=t.wsClose,j=t.wsSendMessage,m=t.onOpen,b=t.onClose,p=t.onError,O=t.onMessage;if(o===l){var x=e;if(r){var f=T("accessToken");x+="?token=".concat(f)}c=new WebSocket(x)}if(c){if(c.onopen=function(e){i({type:m,payload:e})},c.onerror=function(e){i({type:p,payload:{message:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f"}})},c.onmessage=function(e){var t=e.data,r=JSON.parse(t),n=(r.success,Object(It.a)(r,["success"]));n.message&&"Invalid or missing token"===n.message&&c?(c.close(),$().then((function(){i({type:l})}))):i({type:O,payload:n})},c.onclose=function(e){i({type:b})},o===j){var h=Object(I.a)({},u);c.send(JSON.stringify(h))}o===d&&(c.close(),c=null)}a(s)}}}},Yr={url:"wss://norma.nomoreparties.space/orders/all",actions:{wsInit:qt,wsClose:Ft,wsSendMessage:"WS_FEED_SEND_MESSAGE",onOpen:At,onClose:Gt,onError:Pt,onMessage:Bt}},$r={url:"wss://norma.nomoreparties.space/orders",actions:{wsInit:Ut,wsClose:Ht,wsSendMessage:"WS_PROFILE_SEND_MESSAGE",onOpen:Wt,onClose:Vt,onError:Jt,onMessage:Qt}},en=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Br.c)(Object(Br.a)(Ur.a,Zr(Yr.url,Yr.actions),Zr($r.url,$r.actions,!0))),tn=Object(Br.d)(Kr,en);s.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(O.a,{store:tn,children:Object(E.jsx)(i.a,{basename:"/react-burger",children:Object(E.jsx)(Gr,{})})})}),document.getElementById("root")),Pr()},23:function(e,t,r){e.exports={container:"feed_container__1womP",content:"feed_content__3ZfI4",orderList:"feed_orderList__1PpT4",statistic:"feed_statistic__3GNTH",statisticGrid:"feed_statisticGrid__1ZOHC",statisticGridItem:"feed_statisticGridItem__1NvIS",statisticGridItemList:"feed_statisticGridItemList__3K1R6",success:"feed_success__3Grio",error:"feed_error__3ukov",skeletonOrder:"feed_skeletonOrder__lmqkO"}},24:function(e,t,r){e.exports={container:"burger-ingredients_container__g3Y-c",tabs:"burger-ingredients_tabs__11tAC",ingredientList:"burger-ingredients_ingredientList__1udKK",ingredients:"burger-ingredients_ingredients__3JkVS",ingredient:"burger-ingredients_ingredient__2d4AW",enter:"burger-ingredients_enter___35Li",enterActive:"burger-ingredients_enterActive__1L7vt",exit:"burger-ingredients_exit__2Ngrf",exitActive:"burger-ingredients_exitActive__1JkWc",hidden:"burger-ingredients_hidden__aAB8A",error:"burger-ingredients_error__28FCP"}},26:function(e,t,r){e.exports={app:"app_app__1iO2A",main:"app_main__2xlwg",customScrollbar:"app_customScrollbar__9oUGE",textSpaceShadow:"app_textSpaceShadow__oE2Xy"}},27:function(e,t,r){e.exports={container:"burger-constructor_container__6B1um",elements:"burger-constructor_elements__3rOpg",dragMessage:"burger-constructor_dragMessage__1qReQ",dragMessageOver:"burger-constructor_dragMessageOver__2sNJV",elementsScroll:"burger-constructor_elementsScroll__6hMO9 burger-constructor_elements__3rOpg",footer:"burger-constructor_footer__bba9V",error:"burger-constructor_error__3PhHj",center:"burger-constructor_center__rnF9g"}},28:function(e,t,r){e.exports={container:"order-item_container__21HZr",header:"order-item_header__2eoTj",statusDone:"order-item_statusDone__eoToN",footer:"order-item_footer__4G-RR",ingredientList:"order-item_ingredientList__1eMQg",ingredient:"order-item_ingredient__aB_BS",price:"order-item_price__2ByDf"}},29:function(e,t,r){e.exports={container:"order-info_container__3Z36n",statusDone:"order-info_statusDone__2YHWI",footer:"order-info_footer__xrBia",ingredientList:"order-info_ingredientList__2JmUv",ingredient:"order-info_ingredient__11Y2M",ingredientName:"order-info_ingredientName__2XXpq",price:"order-info_price__29-XW"}},35:function(e,t,r){e.exports={container:"order_container__109Bl",center:"order_center__v0cy4",error:"order_error__21SUu"}},36:function(e,t,r){e.exports={header:"app-header_header__2gokJ",content:"app-header_content__t8UHX",contentItem:"app-header_contentItem__EEQMV",contentItemCenter:"app-header_contentItemCenter__-07yp app-header_contentItem__EEQMV",contentItemRight:"app-header_contentItemRight__3YCaq app-header_contentItem__EEQMV",navigation:"app-header_navigation__1JSpu"}},40:function(e,t,r){e.exports={container:"modal_container__3-3mw",title:"modal_title__IJjDb",content:"modal_content__2OuMO app_customScrollbar__9oUGE",closeButton:"modal_closeButton__3REEC",hidden:"modal_hidden__1bEaB"}},41:function(e,t,r){e.exports={container:"ingredient-details_container__3MYGD",title:"ingredient-details_title__1mCpc",image:"ingredient-details_image__3PqS_",imagePreloader:"ingredient-details_imagePreloader__1QTSj ingredient-details_image__3PqS_",content:"ingredient-details_content__1ahpI"}},56:function(e,t,r){e.exports={container:"ingredient_container__31Igb",price:"ingredient_price__1pVsY",title:"ingredient_title__1ll2v"}},57:function(e,t,r){e.exports={spinner:"spinner_spinner__10eHT",rotate:"spinner_rotate__37IgN",spinnerCenter:"spinner_spinnerCenter__QRXSM",circle:"spinner_circle__38GPX",dash:"spinner_dash__1yuey"}},58:function(e,t,r){e.exports={container:"register_container__3Jyyi",error:"register_error__1WF_2"}},59:function(e,t,r){e.exports={container:"reset-password_container__3QctV",error:"reset-password_error__3D5Q8"}},60:function(e,t,r){e.exports={form:"profile-form_form__2dmNA",formFooter:"profile-form_formFooter__1Ed5L",error:"profile-form_error__2I4gz"}},61:function(e,t,r){e.exports={ingredient:"ingredient-avatar_ingredient__15Zld",ingredientImage:"ingredient-avatar_ingredientImage__2sdra",ingredientFg:"ingredient-avatar_ingredientFg__-tQzF"}},81:function(e,t,r){e.exports={skeleton:"skeleton_skeleton__2j3X9",circle:"skeleton_circle__1J7KM"}},84:function(e,t,r){e.exports={container:"order-details_container__21u_h",title:"order-details_title__3cmiO app_textSpaceShadow__oE2Xy"}},85:function(e,t,r){e.exports={container:"modal-overlay_container__1n_Ma",hidden:"modal-overlay_hidden__17Rf-"}},86:function(e,t,r){e.exports={container:"drag-element_container__3V56I",dragItem:"drag-element_dragItem__7xK8c"}},88:function(e,t,r){e.exports={container:"login_container__1FLBr",error:"login_error__1rcy-"}},89:function(e,t,r){e.exports={container:"forgot-password_container__7kREh",error:"forgot-password_error__3ID3w"}},90:function(e,t,r){e.exports={container:"ingredient_container__3LfsL",error:"ingredient_error__1v44w"}}},[[193,1,2]]]);
//# sourceMappingURL=main.6796c04e.chunk.js.map